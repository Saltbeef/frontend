<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Filter Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <style>
        /* Keep only essential styles for complex interactions */
        .province-area { cursor: pointer; transition: all 0.2s; }
        .province-area:hover { opacity: 0.7; }
        .province-area.active { fill: #007bff !important; }

        /* Property card states */
        .saved {
            background-color: #f0fdf4;
            border-left: 4px solid #22c55e;
        }
        .saved:hover {
            background-color: #dcfce7 !important;
        }
        .blacklisted {
            background-color: #fef2f2;
            border-left: 4px solid #ef4444;
        }
        .blacklisted:hover {
            background-color: #fecaca !important;
        }

        /* Rating button states - no background, just colored icons */
        .rating-btn {
            background: transparent !important;
            border: none !important;
            width: 28px !important;
            height: 28px !important;
            padding: 0 !important;
            min-width: 28px !important;
            min-height: 28px !important;
            max-width: 28px !important;
            max-height: 28px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            flex-shrink: 0 !important;
            font-size: 14px !important;
            line-height: 1 !important;
        }
        .rating-btn.neutral {
            color: #9ca3af !important;
        }
        .rating-btn.saved {
            color: #22c55e !important;
        }
        .rating-btn.blacklisted {
            color: #ef4444 !important;
        }

        /* Ensure colors are preserved during any parent hover states */
        *:hover .rating-btn.neutral {
            color: #9ca3af !important;
        }
        *:hover .rating-btn.saved {
            color: #22c55e !important;
        }
        *:hover .rating-btn.blacklisted {
            color: #ef4444 !important;
        }
        .rating-btn:hover {
            transform: scale(1.1);
        }

        /* Override any possible color inheritance issues */
        button.rating-btn.neutral,
        button.rating-btn.neutral:hover {
            color: #9ca3af !important;
        }
        button.rating-btn.saved,
        button.rating-btn.saved:hover {
            color: #22c55e !important;
        }
        button.rating-btn.blacklisted,
        button.rating-btn.blacklisted:hover {
            color: #ef4444 !important;
        }

        /* Filter toggle active state */
        .bg-gray-100.active {
            background-color: #2563eb !important;
            color: white !important;
            border-color: #1d4ed8 !important;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="max-w-7xl mx-auto p-2 sm:p-4 md:p-5">
        <!-- Header and Query Section - Full Width -->
        <div class="bg-white p-3 sm:p-4 md:p-5 rounded-lg mb-3 sm:mb-4 md:mb-5 shadow-sm">
            <h1 class="text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4">Property Filter Explorer</h1>
            <div class="flex flex-col sm:flex-row gap-2 sm:gap-2.5">
                <input type="text" id="queryInput" placeholder="Use $variables (e.g., $price < 200000) or edit manually" value="" class="flex-1 p-2 sm:p-3 border border-gray-300 rounded-md text-sm sm:text-base focus:border-blue-500 focus:outline-none">
                <button onclick="executeQuery()" class="px-4 sm:px-5 py-2 sm:py-3 bg-blue-600 text-white border-none rounded-md cursor-pointer hover:bg-blue-700 text-sm sm:text-base" title="Available variables:
$price - Property price
$livingArea - Living area in mÂ²
$plotArea - Plot area in mÂ²
$city - City name
$province - Province name
$bedrooms - Number of bedrooms
$energyLabel - Energy label (A-G)
$description - Property description
$lastmod - Date added

Example: $price < 200000 && $city.includes('Amsterdam')">Filter</button>
                <button onclick="shareState()" class="px-4 sm:px-5 py-2 sm:py-3 bg-green-600 text-white border-none rounded-md cursor-pointer hover:bg-green-700 text-sm sm:text-base" title="Share current state including query, ratings, and data source via URL">Share</button>
                <button onclick="showAnalysisConfigModal()" class="px-4 sm:px-5 py-2 sm:py-3 bg-purple-600 text-white border-none rounded-md cursor-pointer hover:bg-purple-700 text-sm sm:text-base" title="Configure GitHub and Apify tokens for house analysis">ðŸ”‘ Analysis Config</button>
            </div>
            <div class="bg-gray-50 p-2 rounded mt-2 font-mono text-xs border hidden" id="currentQuery">
                <strong>Active filters:</strong> <span id="currentQueryText"></span>
            </div>
            <div class="bg-yellow-50 p-2 rounded text-xs hidden mt-2" id="variableInfo">
                Available variables: <span id="variableList"></span>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="w-full bg-gray-200 rounded mb-3 sm:mb-4 md:mb-5 hidden" id="progressContainer">
            <div class="h-1 bg-blue-600 rounded transition-all duration-300" id="progressBar"></div>
        </div>

        <!-- Main Layout: Sidebar + Content -->
        <div class="flex flex-col md:flex-row gap-3 sm:gap-4 md:gap-5">
        <div class="w-full md:w-72 flex-shrink-0">
            <div class="bg-white p-3 sm:p-4 rounded-lg mb-3 sm:mb-4 shadow-sm">
                <h3 class="mb-3 text-sm sm:text-base font-medium text-gray-800 border-b border-gray-200 pb-2">Quick Filters</h3>
                <div class="mb-3">
                    <!-- Price range side by side -->
                    <div class="flex items-center gap-2 mb-1.5 w-full">
                        <input type="number" id="priceMin" placeholder="Min â‚¬" step="500" class="w-20 p-1.5 border border-gray-300 rounded text-xs focus:border-blue-500 focus:outline-none">
                        <span class="text-gray-600 text-xs flex-shrink-0">to</span>
                        <input type="number" id="priceMax" placeholder="Max â‚¬" step="500" class="w-20 p-1.5 border border-gray-300 rounded text-xs focus:border-blue-500 focus:outline-none">
                    </div>
                    <select id="cityFilter" class="w-full mb-1.5 p-2 border border-gray-300 rounded text-sm focus:border-blue-500 focus:outline-none">
                        <option value="">All cities</option>
                    </select>
                    <input type="text" id="textSearch" placeholder="Description search" class="w-full mb-2 p-2 border border-gray-300 rounded text-sm focus:border-blue-500 focus:outline-none">
                    <button onclick="applyQuickFilters()" class="w-full p-2.5 bg-blue-600 text-white border-none rounded cursor-pointer text-sm hover:bg-blue-700">Apply Quick Filters</button>
                </div>

<svg
   xmlns:mapsvg="http://mapsvg.com"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   mapsvg:geoViewBox="3.359403 53.560406 7.227496 50.750938"
   width="250"
   height="295"
   viewBox="0 0 612.54211 723.61865"
   style="max-width: 100%; height: auto;">
  
  <path
     d="m 468.10853,123.82483 4.33,1.6 2.01,-5.29 1.17,-0.36 0.37,-3.37 2.42,-6.42 0.27,-1.79 0.98,-0.97 1.07,-1.77 0.62,-0.21 0.71,-0.74 0.22,-2.02 0.27,-0.53 1.55,-0.66 2.19,-1.470004 0.17,-0.32 1.12,-0.29 1.4,-1.34 0.09,-0.93 2.68,-0.52 2.67,-0.87 1.42,0.02 1.33,-0.34 4.29,1.87 1.11,0.06 1.06,2.05 -0.06,0.53 0.6,0.02 2.34,4.090004 1.14,3.18 2.01,-0.87 0.38,0.06 0.69,1.18 0,1 0.49,1.92 1.32,0 2.04,1.79 0.79,1.05 0.71,0.27 1.06,2.92 0.7,0.55 0.36,1.24 0.68,0.34 0.04,1.81 6.53,-2.97 2.72,-0.74 6.57,0.35 1.25,0.84 0.79,1.13 6.81,6.99 3.13,3.6 2.5,2.34 9.02,10.29 7.53,7.58 4.51,6.22 8.2,12.39 0.19,-0.05 1.34,1.38 3.34,0.89 -4.49,10.91 3.76,0.4 0.49,1.85 0.59,-0.05 2.34,3.43 0.41,0.15 0.62,0.89 0.43,0.13 0.64,-0.36 0.18,0.1 -0.4,1.23 -0.14,1.49 3.18,-0.16 0,0 -3.31,7.5 0.02,2.95 -2.8,39.95 0.13,0.6 -2.2,2.6 -0.97,-0.6 -1.17,0.05 -2.56,-0.62 -0.8,-0.55 -0.42,-0.62 -1.92,0.13 -1.47,-0.99 -1.23,-0.39 -1.09,1.15 -1.25,-0.13 -1.05,1.06 -1.2,-0.15 -1.47,0.41 -1.24,-0.54 -0.31,-0.37 -1.4,0.03 -0.45,-1.59 -1.71,-0.49 -0.42,0.07 -0.8,-0.59 -2.5,0.26 -1.13,-0.94 -1.69,1.04 -1.27,-0.05 -0.53,0.23 -2.35,-0.88 -0.64,0.15 -1.63,0.99 -2.38,-0.39 -0.5,-0.57 -1.63,0.18 -0.53,-0.47 -0.85,-0.05 -1.19,0.24 -0.9,0.49 -0.52,0.83 -1.44,-0.52 -0.87,0.65 -0.33,-0.47 -1.4,0.6 -2.15,2.29 -0.63,0.96 -1.49,0.73 -0.6,1.07 0,0 -1.82,-0.11 0.57,-1.61 -0.32,-0.54 1.02,-1.12 -0.23,-0.52 -0.33,-0.11 0.81,-1.84 -5.4,-1.88 -9.63,-4.58 -10.1,2.27 -1.3,0.73 -4.73,3.9 -0.11,0.49 0.35,3.02 0.49,1.46 0.44,4.36 -0.23,0.45 -0.37,0 -0.08,-0.55 -0.36,-0.03 -0.27,-0.65 -0.71,-0.05 -0.43,-0.8 -1,0 -0.95,-0.42 -1.01,-0.05 -0.33,0.28 -1.2,-0.13 -0.18,-0.41 -0.66,-0.26 0.03,-0.65 -0.7,-0.37 -0.61,1.93 -0.51,0.54 -1.74,0.52 -0.93,-0.15 -0.95,-0.6 -0.53,-0.68 0.05,-1.01 -0.43,-0.42 -0.17,-0.59 -0.44,0.8 -0.95,0.7 -0.11,0.6 -0.46,0.37 -1.43,-0.73 -0.5,0.91 -1.51,-0.05 -0.39,0.67 -1.43,0.76 -0.22,-0.06 -0.14,-0.72 -0.4,0 -0.58,-0.78 -0.08,-0.84 -0.47,-0.8 0.15,-1.07 -0.68,-0.96 -0.26,-1.27 -1,-1.25 0.16,-0.34 -0.7,-0.52 -0.49,0.05 -0.32,-0.34 -0.09,-0.54 -1.44,-0.86 -0.4,-0.52 -1.23,-0.44 -1.17,-1.05 -0.05,-1.17 0.43,-0.52 -0.54,-0.93 -0.95,0.05 -1.96,0.93 -1.21,0.08 -0.57,0.84 -0.53,0.07 -0.46,-0.26 -0.97,-1.32 -0.58,-0.08 -0.7,0.88 -0.43,0.08 -0.8,-0.52 -0.54,-0.73 -1.13,-0.08 -0.93,-0.7 -0.84,-1.41 0,0 -0.87,0.08 0,0 -1.2,-0.6 -0.17,-0.36 -0.45,0.16 -1.42,-0.81 -0.17,-0.68 -1.26,0.47 -0.85,0.03 -0.85,1.17 -2.03,-0.24 -0.38,-0.44 -1.22,0.5 -0.76,-1.57 -0.52,-0.49 -0.2,0.13 -0.54,-0.34 -0.98,-1.3 -0.81,-2.81 -1.79,-3.91 -3.2,-8.24 0.72,-1.25 0.34,-0.24 3.64,-0.88 3.07,-1.54 0.19,-1.26 5.16,-5.71 -1.03,-1.04 -3,-4.13 -1.13,-0.63 -5.61,-6.53 -0.79,-1.04 -0.35,-1.02 -1.21,-1.57 0,0 6.67,-5.15 6.64,-4.27 4.21,-5.86 2.01,-1.59 0.73,-1.42 1.15,-0.73 1,-0.08 6.5,0.63 4.97,5.1 9.37,-6.7 5.52,-10.45 -10.35,-16.08 0.69,-8.93 -9.44,-3.57 z"
     title="Drenthe"
     id="NL-DR"
     class="province-area"
     data-province="Drenthe"
     onclick="filterByProvince('Drenthe')"
     style="cursor: pointer;" />
  <path
     d="m 327.34853,271.52483 -0.63,-0.23 -0.05,-0.52 0.32,-0.34 0.4,-2.08 2.06,-4.91 1.23,-1.22 2.61,-1.27 0.33,-0.6 -0.03,-0.52 -1.82,-5.61 -8.78,-14.14 0,0 0.36,-0.26 0,0 8.85,14.14 1.87,6.05 -0.4,1.27 -2.98,1.4 -0.93,1.04 -2.1,5.11 -0.31,2.69 z m 45.04,-80.51 1.58,0.31 1.25,1.23 1.08,-0.44 -0.98,-2.95 3.17,0.97 5.73,5.8 0.98,3.79 0.59,-0.34 0,0 1.41,2.51 2.14,1.88 0.03,0.5 2.9,0 0.33,0.23 1.87,0.34 1.39,0.68 3.1,2.14 0.93,1.3 1.61,1.38 0.95,0.6 0.57,0.03 3.05,2.9 0.57,0.89 1.12,2.89 1.6,5.53 1.11,0.57 0.54,0.94 0,0.91 0.32,-0.03 0.52,0.42 0.68,1.51 0.03,0.91 -0.41,0.68 -0.51,0.08 -0.9,1.07 -1.47,1.02 -1.79,2.03 0.06,0.89 0.38,0.44 0.68,0.08 0.02,-0.36 2.11,0.83 1.09,0.08 1.53,0.52 2.52,2.21 2.58,0.7 1.88,1.87 0.4,0.65 0.03,0.39 -0.82,0.96 -3.56,2.37 -5.24,1.14 -0.24,0.57 -3.64,2.05 -2.34,0.29 -0.79,-0.86 -1.27,-0.49 -9.32,2.05 -0.82,0.34 -0.43,0.7 -9.38,-0.03 -0.06,6.86 3.73,-0.05 1.46,0.26 6.74,7.19 0.49,1.48 1.25,7.14 0,0 -1.09,4.85 -0.98,1.43 -0.41,2.49 -1,2.75 0.02,0.49 -0.3,0.31 -1.11,-0.36 -0.44,0.21 -2.21,4.22 -0.05,0.29 0.9,1.32 -1.74,2.54 -0.33,1.01 -3.08,3.03 -1.25,0.75 -3.37,3.11 -0.57,0.16 -0.19,0.36 -2.47,1.99 -0.41,-0.03 -0.6,-0.54 -0.33,0.08 -0.09,0.36 0.27,0.49 -0.81,0.65 -0.38,0.65 -1.14,0.83 -1.74,0.7 -1.33,1.29 -1.49,0.44 -1.47,-0.03 -4.32,3.7 -0.76,-0.8 -0.57,-0.18 -3.92,1.86 -1.08,0.88 -0.73,-0.9 -0.54,-0.08 -2.29,0.49 -0.4,0.39 -1.85,2.87 -5.24,16.19 -1.06,2.89 -0.58,0.83 -17.58,5.03 -2.34,0.9 0,0 -3.07,-2.63 -8.04,-7.95 0,0 -3.81,-3.77 -4.65,-3.07 -9.73,-2.45 -11,1.88 -1.08,-0.62 -1.16,-1.45 0,0 0.22,-0.21 -0.27,-0.49 1.08,-0.98 -1.41,-1.34 -0.41,-0.03 -0.17,0.21 -0.13,-0.23 0.49,-0.54 0.17,-0.7 -0.27,-5.01 -1.63,-3.1 0.03,-1.53 5.41,-3.26 0.81,-1.86 7.18,-4.24 1.87,-0.05 0.73,-0.39 0.49,-0.34 0.97,-1.71 3.2,-1.97 20.44,-14.4 1.6,-0.23 0.98,-0.57 6.12,-5.5 0.3,-0.99 -0.51,-0.88 -0.09,-1.22 -0.41,0.23 -0.57,-0.03 0.14,-1.38 0.6,-0.16 0.14,0.39 0.19,-0.42 0.73,-0.21 0.74,-0.67 1.41,-3.27 1.03,-1.35 4.81,-0.29 0.67,-0.29 5.36,-5.12 0.17,-0.26 -0.65,-0.7 0.55,-0.55 0.57,0.52 -0.24,0.18 0.19,0.16 4.48,-4.6 10.59,-3.07 1.49,-1.33 0.46,0 1.57,-1.56 -5,-8.06 -2.83,-2.08 -0.06,-0.23 0.58,-0.21 -0.74,-0.96 -1,0.18 0.27,-26.71 10.57,-17.2 0.98,-0.6 6.25,-0.78 0.46,-0.08 0.16,-0.33 z"
     title="Flevoland"
     id="NL-FL"
     class="province-area"
     data-province="Flevoland"
     onclick="filterByProvince('Flevoland')"
     style="cursor: pointer;" />
  <path
     d="m 349.81853,192.76483 0.1,0.34 -0.33,0.03 -1.41,-0.55 0.22,-0.24 0.92,0 0.5,0.42 z m -6.47,-1.17 -0.7,-0.31 0.17,-0.13 0.52,0.18 0,0.26 z m -19.24,-31.03 -0.22,-0.26 0.16,-0.52 0.27,0.31 -0.21,0.47 z m -1.38,-10.49 -0.3,-0.87 0.13,-0.18 0.3,0.89 -0.13,0.16 z m -4.49,-21.71 0.41,0.76 0.59,0.24 0.71,-0.18 0.84,0.87 0.35,1.55 1.03,2 -3.05,-0.21 -0.33,-0.95 -1.04,-1.5 -0.35,-2.34 0.09,-0.21 0.75,-0.03 z m -5.56,0.16 0.21,0.76 -0.14,0.34 -0.55,-0.18 -0.65,0.39 -0.44,-0.13 -4.1,1.18 -12.99,11.45 -0.08,0.68 -0.74,0.6 -0.36,-0.26 -0.55,0.45 0.73,0.29 0.57,-0.45 0.11,0.13 -0.6,0.5 -0.98,-0.29 -5.62,4.88 0,0 -0.65,-0.87 0,0 5.51,-4.83 -0.09,-0.58 0.73,-0.39 -0.59,0.5 0.1,0.34 14.79,-13.05 0.67,-0.37 4.02,-1.1 0.1,-0.18 0.51,0.31 0.6,-0.16 0.14,-0.24 0.34,0.28 z m -41.49,-61.500004 4.19,0.79 0.22,0.13 0.19,1.19 -0.73,0.45 -0.49,0.69 -0.71,-0.32 0.3,0.55 -0.66,-0.26 -1.25,-0.05 -2.36,0.66 -1.22,1.24 -1.95,1.35 -2.63,1.21 -5.84,2.06 -2.83,1.4 -0.28,0.63 1.03,2.48 -0.3,0.37 -0.9,0.16 -0.27,0.34 -0.08,1.4 0.43,0.18 -0.3,0.98 -3.86,1.58 -2.15,2.32 -0.97,0.47 -2.14,-0.18 -1.34,0.24 -2.9,1.58 -0.79,0.05 -0.52,-0.42 -0.78,-1.48 0.02,-0.76 8.96,-5.67 1.36,-1.21 3.35,-3.93 2.41,-1.95 9.3,-6.34 2.15,-0.61 3.15,-1.32 1.19,0 z m 11.13,4.6 -0.51,0.74 -0.66,0.11 -0.84,1.08 -0.36,0.13 -0.71,-0.34 -0.89,0.16 0.02,-0.53 0.57,-0.05 0.33,-0.4 -0.41,-0.74 -0.68,-0.21 1.5,-1.48 0.16,-0.4 1.46,-1.06 0.92,-1.19 0.54,-0.34 0.95,-0.05 0.47,0.95 -0.11,0.79 -0.87,1.72 -0.88,1.11 z m 7.59,-27.23 -0.1,-0.21 0.36,-0.42 -0.26,0.63 z m 158.46,-4.5 -3.69,5.38 0.13,3.36 0.81,2.38 0.54,0.85 1.14,0.95 5.22,1.43 0.68,0.37 0.59,0.9 0.44,1.67 0.7,0.85 1.11,-0.13 1.85,-1.3 2.63,0.63 2.9,1.27 -0.84,7.32 0.06,0.24 1.49,0.34 0.41,0.63 -0.93,1.08 -1.38,0.5 -0.49,0.79 -0.08,0.92 -0.47,0.55 -0.19,1.11 -0.24,0.19 -1.23,-0.37 -1.17,0.69 -0.28,3.04 0.54,1.56 -0.08,0.92 -0.44,0 -0.38,0.4 -0.41,-0.53 -0.3,0.03 -0.41,0.84 -0.68,0.61 0.08,0.74 -0.27,0.55 -0.96,0.37 0.46,0.66 -0.1,0.4 -0.71,0.58 0.22,0.74 -0.06,1.29 -2.74,0.45 0.44,1.66 1.3,1.03 0.25,1.27 0.68,0.92 -0.25,1.18 -0.51,0.58 -0.24,0.98 -0.74,1.24 -1.03,0.84 -0.57,0.9 -0.95,0.11 -0.47,0.32 -0.22,1.4 -1.04,1 -0.25,0.84 -2.03,3.740004 -0.44,2.77 -0.25,6.66 2.83,3.53 1.99,1.76 5.21,0.79 4.37,-0.18 2.31,1.24 1.16,1.13 0.93,1.47 3.8,1.52 0,0 -1.28,3.52 9.43,3.57 -0.68,8.93 10.35,16.08 -5.52,10.45 -9.37,6.7 -4.97,-5.1 -6.5,-0.63 -1,0.08 -1.16,0.73 -0.73,1.41 -2.01,1.6 -4.21,5.86 -6.65,4.26 -6.66,5.15 0,0 -1.95,1.65 -1.92,1.23 -0.85,0.08 -0.79,0.44 -0.6,0.63 -0.71,0.13 -2.06,-0.24 -1.79,0.73 0.52,2.61 -0.32,0.57 -2.39,1.46 -1.34,0.55 -0.71,-1.44 -1.8,0.24 -1.31,0.44 -0.49,0.42 -0.52,0.03 -0.68,-0.13 -0.81,-0.73 -0.6,-0.13 -0.74,-2.01 -0.92,-1.36 -0.49,-2.01 -2.14,0.47 -0.7,0.47 -0.19,0.39 0.17,0.99 -1.47,-0.6 -0.76,0.31 -1.65,0.21 -0.06,0.55 -0.65,0.31 0.24,0.44 -0.19,0.29 -0.03,1.31 -1.42,0.94 -0.81,1.23 -1.38,0.86 -0.6,0.94 -3.31,1.57 -0.76,-0.08 -1.46,-0.78 -0.74,0.03 -0.57,-0.34 -1.49,0.05 -0.85,-0.44 -0.62,0.57 -0.38,0 -0.35,-1.07 -1.93,-1.1 -0.24,-0.39 -3.78,2.64 0,0 -0.59,0.34 -0.98,-3.79 -5.73,-5.8 -3.17,-0.97 0.98,2.95 -1.08,0.44 -1.25,-1.23 -1.58,-0.31 0,0 0.11,-1.12 -0.4,0.44 -0.3,0 -0.27,-0.34 -0.49,0.47 -0.38,-0.39 0.06,-0.78 -0.38,-0.31 -2.07,-0.31 -1.92,0.1 0.32,-0.91 -0.21,-0.08 -0.35,1.05 -0.54,0.1 -0.03,0.55 -0.51,-0.42 -1.17,0.13 -0.09,-0.34 -0.63,-0.5 0.38,-0.31 -0.08,-1.78 -1.77,-1.31 -1.03,0.26 -3.2,2.2 -2.21,-0.31 -2.83,0.65 -0.38,0.71 -0.33,1.7 -0.35,0.37 -1.88,1.1 -2.26,0.47 -0.78,-0.1 -3.51,-1.36 -6.55,-3.03 -4.02,-1.2 -1.04,-0.08 -0.49,0.24 -0.11,0.6 -1.52,0.13 -2.26,0.76 -1.41,-0.5 -2.94,-1.7 -2.42,-2.61 -2.04,-1.49 -0.81,-0.94 0.25,-0.5 -0.11,-0.26 -0.74,-0.13 -1.09,-1.8 0.74,-0.65 0.47,-0.94 1.57,-1.81 2.25,-1.02 0.65,-0.65 1.63,-0.45 0.87,-1.23 0.16,-2.67 -0.32,-0.55 -0.52,-3.59 -0.87,-1.05 0.84,-0.73 0.54,0.16 0.41,-0.29 -0.08,-0.24 -0.58,0.05 0.06,-0.24 0.62,-0.05 0.24,0.31 0.22,-0.24 -0.02,-1.83 0.14,-0.18 0.32,0.34 -0.02,-0.29 -0.49,-0.73 -0.06,-0.65 -0.51,0.18 -0.25,-0.16 1.17,-0.29 0.16,-1.21 -0.85,-3.17 -0.33,-0.37 -0.3,-1.13 0.08,-0.55 -0.32,-0.18 -0.22,-1.39 0.06,-2.57 -0.41,-0.47 1.38,-2.33 -0.33,-0.52 0.38,-2.18 -0.4,0.13 -1,-0.52 0.19,-1.18 -0.44,-0.26 0.16,-0.29 0.57,0 0.11,-1.1 0.21,0.37 0.22,-0.05 -0.49,-1.44 0.28,-2.49 -0.47,1.76 -0.08,2.05 -0.6,0.42 -0.41,-0.45 -0.06,-0.89 -0.6,-1.26 -0.44,-0.71 -1.11,-1 -0.25,-1.55 0.22,-0.21 1,0 0.19,0.68 0.63,0.03 0,-0.68 0.67,-0.05 0.49,0.79 0.73,-0.1 -0.74,-1.76 -0.57,-0.66 -0.46,-1.02 -0.3,-1.18 0.22,-0.89 -0.22,-1.05 -1.44,-3.13 -0.27,-0.13 -0.59,0.13 -3.97,3.73 -1.11,0.53 -0.27,0.5 -0.47,-0.05 -0.44,-1.47 0.21,-0.24 0.33,0.21 0.92,-0.29 0.62,-0.42 4.42,-4.28 0.3,-0.42 0.44,-2.13 -0.33,-0.58 0.09,-0.32 2.56,-1.55 1.35,-1.76 0.9,-3.24 0.44,-5.9 0.49,-2.21 -0.05,-1.11 -0.85,-0.47 -0.21,-0.58 0.57,-0.58 0.19,-0.55 1.14,-0.63 0.19,-0.66 -0.24,-0.16 1.27,-3.870004 0.74,-1.37 0.63,-1.9 1.61,-2.58 2.37,-2.11 3.12,-3.53 1.3,-0.53 1.87,-1.45 1.9,-1.08 0.36,-0.45 1.71,-0.95 1.55,-1.9 2.86,-2.64 0.96,-2.69 4.4,-4.44 4.46,-2.3 1.96,-0.42 5.95,-2.25 1.47,-0.29 1.42,-0.71 1.06,-0.05 1.71,-1.24 9.89,-5.79 3.66,-1.43 1.49,-0.87 0.67,-0.13 0.43,-0.45 2.31,-0.61 1.82,-1.27 3.42,-1.9 2.41,-0.79 0.9,-0.98 1.69,-0.48 0.71,-0.45 -1.71,-2.46 0.11,-0.24 0.44,0.61 0.35,-0.37 0.3,0.66 -0.22,0.34 0.9,1.27 1.28,0.21 0.98,-0.56 2.29,0.32 4.56,-1.35 1.88,-0.85 1.93,-0.26 0.24,-0.5 0.43,0.45 2.36,-0.42 4.21,-1.35 4.26,-0.34 4.1,-0.74 2.55,0.69 0.28,-0.69 0.32,0.69 0.67,-1.03 0.32,0.48 1.46,0.05 5.17,0.93 6.28,-2.97 1.06,-0.08 1.25,1.05 z m -105.26,-9.44 -1.84,0.16 -0.17,0.32 0.27,0.32 4.22,-0.58 0.63,0.08 0.36,0.72 -0.47,1.83 -2.44,1.4 -0.74,0.21 -1.11,0.24 -0.3,-0.13 0.14,-0.21 -0.17,-0.13 -0.27,0.21 -0.36,-0.11 -1.85,1.43 -2.77,1.43 -1.47,-0.21 -0.84,-0.77 -0.11,0.66 0.41,0.72 -0.02,0.87 -1.54,-0.37 -1.27,-0.93 -0.87,-0.16 -0.11,0.34 0.19,0.21 1.95,1.38 2.45,0.93 -0.3,0.37 -0.47,-0.34 -0.43,0.13 -0.35,0.4 0.3,0.26 -0.44,0.29 -1.49,0.34 -6.54,-0.21 -2.09,0.13 -2.47,0.64 -1.3,0.58 -2.98,3.04 -1.85,1.24 -1.08,0.42 -0.79,0.05 -1.42,1.03 -1.87,-0.69 -0.38,0.74 -1.01,0.5 -0.79,0 -0.46,0.64 -0.14,0.63 -1.42,-0.16 -1.47,-0.56 -1.58,0.56 -1.38,-0.42 -2.47,2.17 -0.11,-0.26 -0.63,-0.29 -2.61,0.32 -0.66,0.9 0.08,1.27 -0.22,0.19 0.24,0.45 -0.55,0.08 -0.6,-0.48 -0.65,0 -0.25,0.4 -0.78,0.42 -0.9,1.22 -0.82,0.4 -0.7,0.87 -1.87,-0.45 -2.44,-1.56 -0.22,-0.37 -0.44,-2.2 0,-1.08 0.89,-1.11 2.52,-2.22 1.57,-2.33 0.62,-1.56 0.19,0 -0.17,0.79 0.27,-0.03 0.17,-1.01 0.68,-0.79 -0.08,-0.19 -0.61,0.07 0.46,-0.32 16.84,-3.15 3.04,-0.74 0.43,0.37 0.82,-0.11 15.4,-5.01 0.74,-0.74 3.09,-0.87 9.56,-3.84 3.12,-0.58 1.66,0.03 0.78,0.16 0.27,0.34 -0.03,0.58 -0.3,0.37 -3.03,0.42 z m 84.71,-3.36 0.27,2.12 -0.4,-0.69 -0.47,0.61 -1.19,0.58 -0.51,0.66 -0.87,-0.42 -0.33,-1.48 0.92,-1.35 1.23,0.11 1.23,-0.29 0.12,0.15 z m -53.55,-0.06 8.47,-0.34 10.68,-1.22 2.26,0.4 11.24,-0.58 5.87,0.24 1.08,0.19 0.67,0.66 -0.32,0.64 -0.59,0.32 -1.6,0.34 -3.72,-0.13 -1.38,0.21 -3.35,-0.29 -2.22,1.03 -0.74,0.61 -2.52,0.64 -0.49,-0.05 -1.31,0.64 -4.38,0.95 -0.25,0.27 -4.38,1.22 -2.93,-0.16 -1.55,0.27 -0.16,-0.13 -0.09,0.93 -0.32,0.34 -0.35,-0.19 0.28,-0.21 0.05,-1.3 -3.13,-0.19 -2.94,-0.74 -1.6,0.11 -0.58,0.4 -0.51,1.22 -2.21,1.7 -2.39,0.72 -1.33,0.72 -1.99,0.11 -0.03,0.87 -0.46,0.37 -0.92,-0.27 -2.29,-1.54 -2.23,-1.03 -1.17,-1.33 -1.42,-2.28 -0.05,-1.59 0.68,-3.34 0.68,-1.14 0.76,-0.61 0.95,-0.34 1.52,-0.03 3.37,1.35 5.55,1.3 3.79,0.26 z m 67.63,-13.05 1.42,0.27 1.55,1.46 2.15,0.37 2.36,0.11 11.58,-1.59 6.44,-0.61 5.78,-0.24 0.29,0.45 -0.25,0.66 -2.52,1.3 -1.5,0.64 -1.66,0.29 -3.58,1.72 -1.93,0.35 -1.06,1.33 -3.96,1.86 -1.04,0.24 -3.13,0.08 -3.64,0.82 0.81,0.98 -0.06,0.27 -0.78,-0.48 -0.35,-0.64 -4.23,0 0.02,1.03 -0.33,0.03 -0.16,-1.01 -1.08,0.21 -0.3,0.69 -0.41,0.19 0.41,0.56 -1.35,-0.19 -0.43,0.34 0.43,0.61 -0.3,0.24 -0.06,0.45 0.51,0.72 -0.95,0.19 -1.42,-0.53 -0.84,0.08 -1.12,1.51 -0.52,0.08 -0.63,-0.27 -0.05,-0.21 0.4,-1.14 0.27,-2.2 0.52,-1.8 1.14,-2.23 1.42,-2.07 3.09,-2.76 0.79,-0.32 -0.24,-0.37 -5.95,-1.38 -1.17,2.97 -0.7,0.05 -0.33,-0.21 0.11,-0.96 1.09,-2.52 1.95,0 3.5,0.58 z"
     title="Friesland"
     id="NL-FR"
     class="province-area"
     data-province="Friesland"
     onclick="filterByProvince('Friesland')"
     style="cursor: pointer;" />
  <path
     d="m 396.49853,273.54483 2.15,-0.8 2.46,2.18 2.1,2.62 1.11,1.89 1.65,3.5 0.5,1.61 1.2,-0.55 0.62,0.57 2.01,-1.5 0.93,-0.23 1.37,1.97 6.89,-7.13 1.71,-0.6 0.67,-0.54 0.44,-0.78 0.98,0.54 0.62,0.08 3.04,2.39 1.01,2.46 0.81,1.22 1.26,1.03 2.39,1.07 1.35,1.63 0.43,1.27 0.19,2.82 -0.16,2.44 0.61,0.8 1.25,0.93 2.35,3.47 0.9,2.59 0.09,0.96 -0.88,3.41 -0.7,1.4 -0.05,2.43 -0.34,0.72 -0.42,0.47 -2.89,1.11 -3.14,0.6 -0.63,0.87 -0.03,0.93 0.29,0.6 0.36,0.31 1.26,0.28 0.5,0.42 0.22,0.54 -0.87,0.72 -1.6,0.49 -0.4,0.68 0.21,2.61 -0.22,2.53 -0.26,1.83 -0.63,0.78 -0.02,0.51 1.57,0.21 0.54,1.19 0.09,2.81 1.06,0.34 1.65,0.02 0.33,0.6 0.45,1.44 0.82,1.16 0.13,2.5 1.51,1.86 0.45,1.96 0.88,0.78 -0.91,1.31 0,1.01 1.8,0.41 0.89,0.64 1.96,-0.18 0.08,0.52 -0.27,0.9 -1.11,0.72 -0.33,0.85 0.43,1.65 1.07,0.78 1.35,0.33 0.42,0.75 -0.04,0.82 0.34,0.31 0.29,-0.31 0.03,-0.46 -0.57,-0.67 -0.3,-0.85 0.62,0.26 0.12,-0.24 -0.33,-0.25 0.37,-0.67 0.72,0.77 0.15,-1.52 0.22,-0.9 0.22,-0.11 0.71,0.08 0.65,-0.28 1.03,0.31 1.74,-0.08 2.31,1.73 2.44,0.33 1.09,0.41 1.09,-0.02 0.43,0.33 2.09,-0.18 1.53,0.44 0.08,-0.75 1.04,0.36 0.37,-0.51 1.83,-0.49 0.13,0.41 0.48,0.1 0.11,0.44 0.49,0.44 3.27,0.03 1.27,-0.36 1.39,-0.06 0.09,-2.19 1.05,-0.69 0.63,-0.11 0.32,-0.69 2.99,-0.18 1.76,-0.75 0.9,0.44 2.04,-0.13 2.58,0.31 -0.05,1.29 1.11,1.57 0.65,1.86 3.19,3.34 1.3,2.63 0.94,0.36 1.04,0.05 0.32,0.31 0.07,1.42 0.87,1.96 0.53,0.69 1.53,0.75 0.52,0.51 0.54,0.18 3.02,-1.08 6.29,1.03 5.69,-1.16 0.11,-0.26 0.48,0.29 0.05,0.41 0.98,0.41 0.31,0.62 0.7,0.49 -0.51,1.05 0.11,0.42 1.33,1.23 1.33,-1 0.67,-0.23 0.27,-0.83 0.38,-0.31 0.84,0.26 0.77,1.08 0.78,-1.36 0.66,0.05 3.26,1.72 0.44,0.41 0.29,0.85 -0.03,0.62 -0.51,0.75 0.44,0.23 -0.03,1.41 0.21,0.72 -0.21,1.65 -1.68,2.7 2.33,1.08 3.45,0.64 2.71,1.26 7.13,-0.05 0,0 -0.68,5.32 -0.55,0.87 -0.14,-0.36 -0.4,-0.15 -0.92,0.87 0.14,0.67 0.75,0.72 0.03,0.72 -1.96,2.44 -6.73,1.13 0.35,0.67 -0.09,0.77 -1,2.08 -0.54,0.23 -0.06,1 0.24,0.28 -0.02,3 4.32,0 6.15,2.95 1.54,1.36 0.52,1.06 1.08,0.43 5.38,4.41 0.01,0.95 0.29,0.33 2.86,0.44 0.51,1.64 -0.16,1.79 0.52,2.05 -0.3,1.11 -0.46,0.81 -2.1,0.08 -0.78,0.74 -1.66,0.59 -0.44,3.28 0.03,2.18 -1.66,1.69 0.36,0.41 -2.51,3.07 -2.9,1.2 -0.03,0.9 -0.32,0.33 -2.34,0.82 -0.76,1.4 -1.49,0.72 -2.62,-2.07 -0.51,-0.56 -0.11,-1 -0.39,0.2 -0.32,-0.13 -0.56,-1.38 -0.79,-0.02 -0.76,-0.46 -0.77,0.23 -6.3,2.99 -1.01,1.05 -0.56,0.05 -0.79,-0.28 -7.32,2.45 -1.9,1.31 -1.17,1.12 -0.46,0.03 -0.7,-0.95 -1.2,0.49 -1.17,1.25 -1.57,1.02 -1.8,0.75 -1.49,1.04 -0.46,0.44 -0.03,0.74 -0.67,0.95 -3.21,0.86 -1.36,0.8 -0.85,-0.31 -1.6,-2.15 -0.7,-0.59 -0.85,0.7 -1.95,0.97 -0.5,-0.41 -0.29,-1.43 -1.71,-0.57 -0.41,-0.61 -2.61,-0.23 -0.81,-0.74 -0.35,0.15 0.13,0.67 -0.62,1.74 0.11,0.35 2.43,1.95 1.17,0.3 0.08,0.41 -1.21,1.69 -0.01,0.97 0.71,1.48 -0.08,0.18 -0.6,-0.16 0.52,1.77 -0.14,0.41 -0.51,0.17 -2.66,-1.76 -2.46,-0.07 -1,-0.46 0.22,-0.69 -0.6,-1.51 -1.14,-1.02 -4.72,-0.62 -2.92,0.28 -0.81,-3.65 -0.41,-0.26 0.19,-0.76 -1.7,-0.82 -0.79,-0.1 -0.55,-0.54 -1.2,-0.18 -0.7,0.28 -0.69,0.92 -1.27,0.39 -2.57,-0.05 -0.69,-0.23 -2.9,0.35 -0.76,-0.18 -1.96,-1.15 -2.21,-2.27 -0.11,-1.02 1.21,-0.23 -0.39,-0.46 0.05,-0.54 -3.39,-2.58 -0.21,0.48 -1.88,-1.18 -3.61,0.62 -1.07,0.82 -1.17,-0.92 -0.57,1.12 -0.51,-0.3 -0.32,0.3 0.07,0.67 -0.79,0.64 2.45,0.05 1.68,1.2 1.1,0.51 0.87,2.43 0.1,1.41 3.08,2.48 -0.06,1.53 0.35,3.52 -3.39,-1.22 -2.37,-0.51 -2.72,0.1 -2.04,-0.46 -1.3,-0.64 -2.49,-2.22 -1.8,-1.13 -0.87,1.61 -1.03,0.44 0.37,0.84 -0.15,0.56 -1.88,1.05 -1.33,1.23 -0.52,-0.54 -1.87,0.69 -0.81,1.61 -1.86,0.94 -2.3,0.26 -1.48,-0.56 -1.21,-0.1 -1.31,-0.82 -2.56,3.17 2.1,1.63 -0.51,0.66 -0.23,-0.18 -0.22,0.23 -0.37,-0.28 -0.19,0.16 -0.25,-0.23 -0.29,0.33 0.1,0.51 2.69,1.45 0.58,1.03 1.63,1.27 0.07,0.36 -0.57,0.36 0.36,0.38 -0.6,1.17 0.51,1.05 0.99,-0.03 0.72,0.49 0.47,-0.16 0.17,0.26 -1.04,1.05 -0.17,1.35 1.09,1.25 -0.08,0.74 -4.83,3.59 -0.54,0.16 -0.33,0.43 -0.01,1.27 0,0 -0.6,0 -0.16,0.49 -0.35,0.18 -1.82,0.12 -0.65,-0.68 -0.03,-0.46 -0.67,-0.59 -1.12,-0.56 -0.68,0 -0.52,-2.86 -2.99,-3.82 -1,-0.18 -3.28,0.43 -0.06,0.59 0.86,3.14 -0.89,0.94 0,0 -2.37,-0.43 -7.14,0.79 -3.83,0.99 -2.31,-0.02 -1.09,-0.23 -1.3,-0.64 -0.93,-0.79 -0.83,-1.33 0.18,-0.15 -0.43,-0.74 -1.2,-1.22 -0.71,-0.41 -3.04,-0.51 -0.76,-0.74 -1.13,-1.94 -1.2,-1.15 -2.96,-0.51 -1.69,-1.07 -1.09,-1.61 -0.94,-2.78 -1.04,-1.15 -0.81,-0.23 -1.98,0.05 -0.9,-0.36 -2.65,-1.73 -2.01,-0.49 -1.92,0.39 -2.8,0.2 -0.71,0.61 -1.17,1.94 -1.02,0.31 -3.29,-0.82 -2.43,-2.42 -0.98,-0.51 -0.59,0 -1.54,0.66 -0.57,1.1 -0.23,1.45 -0.68,0.97 -0.87,0.62 -1.98,0.48 -1.03,0.15 -2.2,-0.2 -1.58,-0.66 -1.46,-2.07 -0.5,-0.33 -1.3,0.02 -0.49,0.41 -0.79,1.43 -1.87,2.4 -2.75,4.67 -0.98,3.26 -0.15,3.35 -0.61,1.07 -0.8,0.58 -5,2.3 -3.18,2.19 -0.74,0.05 -2.12,-0.76 -1.76,-0.16 -1.12,0.39 -1.22,1.02 -1.01,0.33 -1.16,-0.44 -1.64,-1.47 -1.14,-0.49 -0.9,-0.1 -3.72,0.81 -3.14,-0.76 -2.05,0.08 -5.59,1.42 -0.06,-1.86 1.83,-1.53 0.7,-1.04 -0.74,-0.64 -0.29,-0.66 0.07,-1.02 0.47,-1.35 -0.11,-0.74 -3.61,-1.76 -1.6,-1.66 -0.79,-0.41 -0.96,-0.15 -0.92,0.4 -1.54,1.64 -1.12,0.15 -0.57,-0.23 -1.39,-1.53 -0.7,-1.48 -0.79,-0.54 0.02,-0.71 -0.37,-0.38 -4.24,-1.94 -1.22,-1.07 -0.85,-2.07 -0.93,-0.67 0,0 2.37,0.05 1.03,-4.98 -3.4,-0.46 -0.95,-1.58 0.34,-1.41 -0.58,-1.86 0.41,-0.43 1.8,1.58 4.01,-0.1 1.53,0.61 0.52,-0.59 1.79,-0.71 0.59,-0.56 -1.09,-0.67 -0.4,-0.87 0.25,-0.87 1.3,-0.64 1.92,-0.02 1.1,-0.62 1.05,-1.56 0.17,-1.25 0.45,-0.36 0.94,0.29 1.03,-0.26 1.7,0.41 0.36,-0.69 0.29,-2.18 2.19,-4.06 0.75,0.35 -0.1,-1.61 2.03,-2.94 -0.13,-0.64 0.46,-0.1 4.57,-8.71 0,0 2.17,1.41 2.03,0.44 0.85,-0.21 1.13,-1 1.39,-2.69 0.68,-0.84 1.2,-0.31 1.25,0.74 1.85,1.92 1.76,0.95 2.01,0.54 2.56,0.33 2.45,1.64 1.35,0.08 1.93,-0.98 1.57,-2.02 1.25,-0.87 1.34,-0.21 2.3,0.49 1.51,-0.1 4.97,-1.9 2.08,-1.76 1.04,-0.57 4.32,0.85 2.79,-0.31 0.91,0.23 2.16,1.31 1.04,0.95 5.11,1.89 1.14,1.82 1.14,0.9 1.23,0.53 4.1,1.05 2.68,1.8 1.59,-1.41 0.91,0.51 -0.07,-1.31 0.94,-0.23 0.01,-1.53 -0.69,-1.67 -0.03,-0.69 0.41,-0.64 0.17,-1.08 -1.6,-1.89 -0.35,-2.1 -0.68,-1.06 -0.99,-0.2 -1.27,-1.18 -0.65,-0.69 -0.14,-1.64 -0.27,-0.44 -0.49,-0.54 -0.38,0.41 -1.55,-1.69 0.87,-0.02 0.21,-4.49 -3.01,-1.13 0.21,-1.77 -1.21,-0.52 0.56,-1.51 0.39,-3.78 -0.17,-0.35 0.46,-1.9 -0.26,-2.01 -0.44,-0.02 -0.52,-0.62 -0.13,-1.85 -0.6,-0.41 0.3,-0.72 -0.27,-1.47 -1.07,0.16 0.08,0.49 -0.34,0.07 -0.41,-0.48 -1.41,0.36 0.11,0.66 0.48,0.16 0.01,0.36 0.4,0.33 -0.44,1.03 0.85,0.23 -0.08,0.67 -0.11,0.51 -1.28,-0.38 -0.51,0.9 1.05,0.43 -1.52,1.62 -1.32,-0.28 -1.4,0.1 -0.41,1.39 -1.86,0.02 -1.34,0.47 -2.72,-1.62 -0.1,-0.49 -0.63,-0.15 -0.3,-0.34 1.71,-2.18 2.28,-1.44 -0.21,-2.67 1.38,-1.34 0.08,-0.49 -1.11,-0.72 3.27,0.34 0,-0.36 -0.66,-0.36 0.03,-0.88 -0.77,-0.25 -0.73,-0.9 0.36,0.07 0.22,-1.44 1.73,-0.25 0.77,-1.49 -2.13,-1.06 -0.11,-0.38 0.3,-1.5 -1.63,-0.05 -1.28,-0.56 0.22,-1.73 -0.45,-0.15 0.1,-0.54 -1.03,-0.44 -0.08,-0.39 -6.04,-0.82 -2.52,-0.9 0.13,-0.93 -0.26,-1.54 -0.52,-0.52 0.68,-0.54 1.19,0.36 0.65,-0.54 0.41,-1.98 -0.05,-1.52 -6.47,-5.28 1.82,-7.83 0,0 2.34,-0.9 17.58,-5.03 0.59,-0.83 1.06,-2.89 5.24,-16.19 1.85,-2.87 0.39,-0.38 2.3,-0.5 0.54,0.08 0.72,0.91 1.08,-0.88 3.92,-1.86 0.57,0.18 0.76,0.8 4.32,-3.7 1.47,0.03 1.49,-0.44 1.33,-1.3 1.74,-0.69 1.14,-0.83 0.38,-0.65 0.81,-0.64 -0.27,-0.5 0.09,-0.36 0.34,-0.08 0.6,0.55 0.41,0.02 2.47,-1.99 0.19,-0.36 0.57,-0.16 3.37,-3.1 1.25,-0.75 3.08,-3.03 0.33,-1.01 1.75,-2.54 -0.91,-1.32 0.05,-0.29 2.22,-4.22 0.44,-0.21 1.11,0.37 0.3,-0.31 -0.02,-0.5 1,-2.74 0.41,-2.49 0.98,-1.43 z"
     title="Gelderland"
     id="NL-GE"
     class="province-area"
     data-province="Gelderland"
     onclick="filterByProvince('Gelderland')"
     style="cursor: pointer;" />
  <path
     d="m 543.13853,27.644826 0.65,0.42 0.74,-0.08 2.03,-1.88 0.52,-0.19 2.75,1.11 0.33,0.93 -0.06,0.74 -0.33,0.56 -2.75,-0.56 -0.11,0.5 2.47,0.61 -0.17,0.72 -1.28,-0.24 -0.16,0.42 2.09,0.5 1.08,-0.13 1.19,0.32 0.11,-0.53 -1.28,-0.24 -0.25,-0.29 0.67,-2.54 3.1,0.98 3.5,3.34 -0.08,1.25 -1.25,3.52 -0.17,3.71 0.89,0.9 1.41,2.41 -0.43,0.69 0.57,0.24 0.21,0.48 -0.21,2.78 0.9,2.7 -0.05,1.27 0.89,3.94 0.33,0.56 1,0 2.88,2.56 0.67,0.87 0.79,0.11 0,0.45 -0.59,0.13 -0.35,1.27 1.65,0.53 0.43,0.61 0.54,-0.08 1.93,0.71 0.52,0.4 0.87,-0.03 0.84,0.26 2.52,1.22 0.84,0.19 1.09,1 1.12,0.66 2.59,1 2.07,-0.08 1.01,0.34 0.38,0.42 4.68,-0.11 0.66,-0.95 1.8,-0.34 0.59,-0.66 0.43,0 0.03,0.69 -0.43,0.13 -0.96,1.29 -0.93,0.71 -0.33,2.35 0.28,1.87 -1.27,3.51 0.08,1 0.57,0.29 0.08,0.74 0.46,0.53 1.14,0.55 0.4,0.47 0.63,0.08 0.29,0.55 2.04,0.08 0.74,-0.26 0.02,0.42 0.19,0.05 2.48,0.11 1.61,1.19 1.87,0.5 1.09,-0.42 1.47,1.11 1.87,0.34 0.43,0.37 2.86,0.71 0.25,0.24 0.3,-0.26 -0.22,-0.61 0.47,-1.16 0.54,3.72 -0.06,1.19 0.66,2 0.21,4.72 -0.24,0.79 -1,1.16 -0.25,0.66 2.91,2.130004 0.05,0.61 -2.47,1.11 -1.31,0.05 -1.69,3.21 -0.05,0.66 -0.41,0.82 -0.06,2.53 -1,1.84 -0.55,0.37 0.63,4.39 2.85,2.1 -0.33,8.75 2.06,17.36 0.81,2.07 -1.28,1.6 -3.92,13.71 -0.24,1.55 -12.14,20.13 -2.63,3.37 -0.35,0.76 0.79,2.95 0,0 -3.18,0.16 0.14,-1.49 0.4,-1.23 -0.17,-0.1 -0.65,0.37 -0.43,-0.13 -0.62,-0.89 -0.41,-0.16 -2.34,-3.42 -0.59,0.05 -0.49,-1.86 -3.77,-0.39 4.49,-10.91 -3.34,-0.89 -1.34,-1.39 -0.19,0.05 -8.2,-12.39 -4.51,-6.21 -7.53,-7.58 -9.02,-10.29 -2.5,-2.34 -3.13,-3.6 -6.8,-6.99 -0.79,-1.13 -1.25,-0.84 -6.57,-0.34 -2.72,0.74 -6.54,2.97 -0.03,-1.81 -0.68,-0.34 -0.36,-1.24 -0.7,-0.55 -1.06,-2.92 -0.71,-0.26 -0.79,-1.05 -2.04,-1.79 -1.31,0 -0.49,-1.92 0,-1 -0.7,-1.18 -0.38,-0.05 -2.01,0.87 -1.14,-3.19 -2.34,-4.080004 -0.6,-0.03 0.06,-0.53 -1.06,-2.06 -1.11,-0.05 -4.29,-1.87 -1.33,0.34 -1.42,-0.03 -2.67,0.87 -2.67,0.53 -0.09,0.92 -1.39,1.34 -1.12,0.29 -0.17,0.32 -2.18,1.480004 -1.55,0.66 -0.27,0.53 -0.22,2.03 -0.71,0.74 -0.62,0.21 -1.08,1.76 -0.98,0.97 -0.27,1.79 -2.42,6.42 -0.36,3.37 -1.17,0.37 -2.01,5.28 -4.34,-1.6 0,0 -3.8,-1.52 -0.93,-1.47 -1.16,-1.13 -2.31,-1.24 -4.37,0.18 -5.21,-0.79 -1.99,-1.76 -2.83,-3.53 0.25,-6.66 0.44,-2.77 2.03,-3.740004 0.25,-0.84 1.04,-1 0.22,-1.4 0.47,-0.32 0.95,-0.11 0.57,-0.9 1.03,-0.84 0.74,-1.24 0.24,-0.98 0.51,-0.58 0.22,-1.19 -0.68,-0.92 -0.25,-1.27 -1.3,-1.03 -0.44,-1.66 2.74,-0.45 0.06,-1.29 -0.22,-0.74 0.71,-0.58 0.1,-0.4 -0.46,-0.66 0.96,-0.37 0.27,-0.55 -0.08,-0.74 0.68,-0.61 0.41,-0.84 0.3,-0.03 0.41,0.53 0.38,-0.4 0.44,0 0.08,-0.92 -0.54,-1.56 0.28,-3.04 1.17,-0.69 1.23,0.37 0.24,-0.19 0.19,-1.11 0.47,-0.55 0.08,-0.92 0.49,-0.79 1.38,-0.5 0.93,-1.08 -0.41,-0.63 -1.49,-0.34 -0.06,-0.24 0.84,-7.32 -2.9,-1.27 -2.63,-0.63 -1.85,1.3 -1.11,0.13 -0.7,-0.85 -0.44,-1.67 -0.59,-0.9 -0.68,-0.37 -5.22,-1.43 -1.14,-0.95 -0.54,-0.85 -0.81,-2.38 -0.13,-3.36 3.69,-5.38 0,0 0.57,-0.32 0.82,-0.08 0.27,0.26 -0.3,0.34 0.08,0.4 0.63,0.03 6.01,-1.77 1.54,-0.11 1.33,0.4 5.19,2.91 0.79,0.53 1.33,1.99 0.24,0 2.29,-1.43 1.8,-1.62 4.81,-2.2 4.48,-1.72 6.65,-1.11 19.67,-2.25 4.75,-1.38 2.8,-1.11 2.41,-1.33 4.46,-1.78 7.48,-2.44 7.12,-0.88 1.72,0 4,1.3 1.82,1.14 z m -60.67,-16.76 0.74,0.13 -0.08,0.66 -2.15,-0.29 -1.69,0.11 -0.22,-0.42 0.28,-0.45 0.89,-0.08 2.23,0.34 z m 28.25,-1.5400004 0.93,0 0.17,0.19 -0.08,0.29 -0.54,0.2400004 0.13,0.53 -0.17,0.19 -2.18,-0.8000004 -0.36,-0.56 0.14,-0.42 1.06,-0.13 0.9,0.47 z m 4.7,-4.52 0.08,0.32 -0.19,0.21 -1.44,-0.48 -0.79,0.19 -0.09,0.56 0.93,0.8 -0.05,0.58 -3.24,-1.54 -0.65,-0.13 -1.91,0.37 -0.38,-0.5 0.06,-0.42 0.93,-1.12 1.01,-0.29 3.42,0.37 2.31,1.08 z m -19.48,-0.64 1.44,0.11 1.12,0.48 2.71,2.26 -0.03,0.37 -0.54,0.08 -2.04,-0.66 -0.63,0.11 -0.82,-1.01 -0.19,0.03 -0.33,0.45 0.3,1.06 -0.3,0.56 -1.58,0.03 -0.79,-0.31 -0.85,0.58 0.6,0.69 -0.11,0.58 -0.78,0.5300004 -1.39,-0.4000004 -0.71,-0.58 -0.35,-2.1 -1.87,-1.33 -0.65,-0.98 -0.1,-1.94 0.87,-2.52 0.6,0.08 0.68,2.31 5.74,1.52 z"
     title="Groningen"
     id="NL-GR"
     class="province-area"
     data-province="Groningen"
     onclick="filterByProvince('Groningen')"
     style="cursor: pointer;" />
  <path
     d="m 396.81853,469.56483 0.89,-0.94 -0.86,-3.14 0.06,-0.59 3.28,-0.43 1,0.18 2.99,3.82 0.52,2.86 0.68,0 1.12,0.56 0.67,0.59 0.03,0.46 0.65,0.68 1.82,-0.12 0.35,-0.18 0.16,-0.49 0.6,0 0,0 0.28,1.43 6.03,0.15 1.77,1.3 3.39,1.46 0.92,0.94 0.5,1.2 0.32,0.23 0.35,-0.31 0.76,0.59 0.08,0.4 -0.29,0.74 -1.25,-0.15 -0.36,0.15 -0.79,0.49 -0.19,0.73 0.28,1.69 0.62,0.73 0.11,0.79 0.05,0.89 -0.76,0.92 0.38,1.55 -0.11,1.05 0.38,0.94 1.26,0.81 2.17,0.61 3.72,1.48 0.22,0.46 0.95,-0.33 0.36,0.28 0,0.43 1.38,0 3.26,0.81 -0.03,1.56 -0.49,0.79 -0.35,0.17 -0.92,3.69 -0.28,0.05 -0.92,2.82 -0.6,-0.28 0.01,1.86 -0.44,2.16 2.45,1.73 2.3,1.98 0.99,1.9 1.71,1.88 2.57,2.26 0.98,1.2 1.5,3.75 1.25,2.47 1.6,1.06 1.79,1.6 2.26,3.96 -0.03,5.29 0.79,1.78 0.82,3.17 -0.74,5.37 0.05,0.98 -0.64,0.06 -0.19,0.3 -0.06,4.58 -1.19,6.96 3.14,-0.15 -0.02,0.45 -1.85,3.04 1.87,6.45 -5.62,5.18 -0.06,0.35 0.45,1.14 -3.83,0.83 -0.04,0.88 -0.87,0.99 -0.51,1.09 -0.06,1.16 -0.73,1.16 -0.08,0.96 -1.74,2.65 -2.2,2.8 -0.89,2.09 -0.11,0.84 -6.01,6.63 -2.1,1.29 2.24,4.78 -0.2,0.38 -1.78,-0.1 -0.82,0.4 -0.05,0.36 0.45,2.74 0.55,6.48 1.41,2.74 1.01,0.33 1.68,0.07 0.46,-0.45 0.6,-0.1 1.04,-0.68 1.51,-1.59 6.77,-3.27 1.01,0.58 1.62,1.46 -6.51,3.02 -0.19,0.3 5.45,3.4 0.12,0.4 -1.94,1.34 -0.08,1.05 -0.62,-0.02 -0.43,0.25 -1.29,-0.13 -2.57,0.96 -0.5,-0.25 -0.72,0.4 -0.46,0.68 -2.21,1.13 -2.41,0.43 -0.61,1.71 -0.37,0.2 0.1,0.78 -0.37,0.07 -0.45,-0.55 -0.18,0.96 -0.54,0.22 -0.5,0.63 -1.82,0.58 -0.65,0.45 -0.21,1.28 -1.96,2.27 -1.83,1.4 -1.76,0.53 -0.7,-0.43 -0.24,0.61 -0.71,0.1 -0.63,0.95 -1.87,1.44 -0.95,1.9 -1.47,0.53 0.26,0.81 -0.84,1.33 -0.87,0.75 0.08,0.65 -0.37,0.68 0.22,0.55 -0.28,0.51 0.03,1.68 -1.01,0.65 -0.76,0.17 0.3,1.41 -0.6,0.2 -0.45,-0.45 -1.28,-0.03 -1.2,0.43 -0.25,-1.33 -1.54,-2.16 -1.03,-3.36 -0.84,-0.98 -3.52,3.26 -4.18,0.58 0.28,1.56 1.89,2.31 -0.26,1.25 -0.54,0.05 -0.09,0.45 1.01,2.56 0.94,1.18 1.67,0.78 -0.04,1.48 1.47,0.65 -0.38,1.76 0.16,1.8 -1.63,1.81 0.74,1.45 1.14,0.07 2.55,-1.02 2.05,-1.63 3.12,-0.7 0.24,0.05 0.3,0.67 1.2,0.83 0.38,0.68 0.97,-0.23 0.36,-0.38 0.97,-0.37 6.86,-0.23 0.21,0.48 -1.79,4.64 -0.35,0.57 -1.22,0.98 1.82,1.13 -0.06,1.12 0.52,3.49 3.58,1.02 0.6,0.48 0.85,-0.3 0.69,0.65 -0.18,1.23 2.06,0.22 0.71,-0.5 0.46,0.05 1.39,0.45 0.86,0.95 0.41,-0.77 0.52,-0.25 -0.22,1 -0.97,0.65 -0.2,0.77 -0.65,0.63 -1.08,4.1 0.27,1.4 1.17,1.68 0.76,1.85 -0.41,0.58 -0.25,1.25 -0.41,0.2 -0.15,0.47 -0.68,0.78 -0.47,3.37 -0.75,-0.1 -1.83,-1.2 -0.32,-1.05 -4.41,2.23 -1.06,0.37 -0.35,-0.07 -0.11,3.47 0.54,0.82 0.44,0.2 -0.02,0.48 0.65,1.5 -0.55,0.47 -0.29,-0.02 0.27,0.77 -1.47,1.43 -0.85,1.37 -0.37,0.22 -0.76,0.2 -0.6,-0.55 -1.07,-0.5 -0.65,-0.72 -0.64,-0.1 -0.76,0.58 -0.8,1.24 -0.13,1.5 2.03,0.6 1.23,0.93 0.65,1.44 4.4,2.7 0.03,0.4 -1.06,2.07 -0.54,0.45 0.68,1.62 -0.74,-0.03 -2.37,0.55 -3.17,-0.1 -0.57,-0.22 -0.13,-0.95 -0.66,-0.75 -1.69,-0.4 -4.58,1.47 -1.29,1.1 -1.18,0.38 -0.09,-1 -0.35,-0.1 -1.36,0.15 -0.7,0.85 -1.93,-1.4 0.02,-1.42 -0.6,-1.67 -3.77,1.94 -1.66,1.72 -0.28,-0.07 -0.68,-2.42 -2.09,1.35 -1.55,0 -1.02,0.54 -1.1,0.23 -2.58,-3.64 -1.16,0.65 -0.22,-0.08 -1.34,-3.54 -1.59,0.27 -3.23,3.72 -0.85,1.57 -1.8,0 -1.33,-0.92 -0.84,1.05 -1.76,0.3 -0.9,0.84 -1.04,-0.17 -0.54,-0.45 -0.78,-0.02 0.13,-0.95 2.01,-2.75 0.76,-2.37 -0.07,-0.65 -1.37,-2.82 0.03,-0.52 1.04,-1.48 -0.03,-0.47 -0.9,-1.42 -2.12,-0.18 -0.25,-1 -0.9,0 -0.4,-0.42 -0.9,0.1 -1.28,-0.6 -0.21,-0.33 0.21,-0.35 -0.13,-0.47 -0.63,-0.73 -0.38,0.15 0.3,-1.32 -1.11,-1.4 0.27,-0.4 -0.51,-0.25 -0.03,-0.8 -0.36,-0.52 0.14,-0.8 0.28,-0.3 -0.28,-0.9 0.38,-0.65 -0.16,-1.18 0.14,-0.27 -0.3,-0.43 1.14,-0.97 -0.6,-0.75 0.41,-0.55 0.78,-0.13 2.8,-1.77 1.33,0 0.57,-1.68 1.42,-1.28 0.52,-0.77 0.35,-2.88 0.49,-0.73 1.2,-0.25 1.65,0.95 0.82,-0.42 0.49,-0.93 0,-1.85 0.46,-1.38 1.9,-2.4 0.89,-2.8 1.72,-0.86 -0.04,-1.05 -0.43,-0.9 -0.52,-0.48 -1.11,-0.2 -1.27,1.11 -1.2,0.3 -1.08,-0.58 -0.14,-1.28 2.09,-2.48 0.55,-1.4 1.71,-0.96 1.52,-2.55 0.93,-0.83 0.37,-0.68 0.16,-0.62 -0.15,-2.41 1.46,-2.71 0.1,-0.63 -0.64,-1.1 -2.04,-0.85 -0.19,-0.73 1.06,-1.73 1.06,-2.56 0.13,-2.47 0.24,-0.4 0.88,0 1.9,1.01 0.95,-0.2 0.4,-0.51 0.04,-0.67 -0.57,-2.16 0.38,-0.66 0.83,-0.65 0.11,-0.45 -0.4,-0.96 -1.01,-1.25 -0.06,-0.76 0.9,-0.88 1.23,-0.32 2.33,0.93 1.06,-0.93 0.19,-0.43 0.22,-1.43 -0.65,-0.96 -0.63,-0.27 -1.73,-0.03 -0.77,-0.45 -0.22,-0.98 0.25,-0.91 2.25,-2.76 0.57,-0.28 2.07,-0.25 0.73,-2.29 1.55,-1.08 -2.95,-2.29 0.21,-0.88 -0.67,-0.56 -0.09,-0.8 -0.73,-0.55 -0.57,-0.91 -1.29,1.21 -0.31,0.98 -0.38,0 -0.85,-0.83 -0.3,-0.03 -0.62,0.89 -0.74,0.42 -0.71,0.05 -1.35,1.14 -0.85,0.22 -0.38,-0.93 0.16,-0.55 0.47,-0.51 0,-0.75 -0.47,-0.1 -0.05,-0.58 -0.73,0.15 -0.17,-0.75 0.01,-0.43 1.03,-0.3 0.13,-0.26 -0.78,-0.17 0.4,-1.36 -1.47,-1.51 -1.98,-0.38 -1.38,-0.83 -0.63,0.5 -0.14,0.38 -0.59,-0.3 -0.66,0.4 -0.67,-0.25 -0.22,0.3 -1.33,0.03 -1.23,0.95 -1.25,-0.45 -0.26,-0.3 -0.6,-0.08 -0.14,0.3 -0.4,-0.02 -0.53,-0.55 -1.95,0.57 -0.25,-0.47 -0.57,-0.28 -1.25,-0.1 -0.87,0.22 -1,-1.61 -0.05,-0.42 0.38,-0.28 -0.36,-0.88 -1.85,-0.96 -12.05,-4.91 0,0 4.62,-1.41 -0.03,0.55 4.02,-2.02 0.73,-4.33 0.24,-6.18 7.04,-10.02 32.14,-10.03 9.29,-7.96 -9.59,-16.35 -1.86,-10.57 -1.21,-3.09 -2.33,-16.06 8.4,1.65 2.66,2.11 5.21,-0.54 4.86,-1.57 5.55,-2.28 1.93,1.54 1.96,2.44 0.92,-0.89 0.3,-0.05 0.46,0.38 0.46,-0.43 0.41,-0.05 0.06,-0.28 -0.73,-0.84 -0.47,-1.06 -0.02,-4.27 -1.66,-2.44 -0.47,-1.17 -0.22,-1.72 0.09,-2.37 -0.5,-1.73 -3.98,-3.89 -3.48,-2.13 -0.46,-0.51 -0.25,-1.27 1.2,-2.42 0.03,-1.17 -1.01,-0.46 -1.72,0 -0.57,-0.58 -0.07,-0.87 1.25,-1.93 -1.1,-4.38 -0.34,-3.08 -0.61,-0.56 -2.28,-0.97 -4.38,-0.59 -0.95,-0.23 -1.7,-0.84 -1.1,-1.4 -0.34,-2.65 -0.73,-3.01 z"
     title="Limburg"
     id="NL-LI"
     class="province-area"
     data-province="Limburg"
     onclick="filterByProvince('Limburg')"
     style="cursor: pointer;" />
  <path
     d="m 260.16853,453.38483 0.93,0.66 0.85,2.07 1.22,1.07 4.24,1.94 0.36,0.38 -0.02,0.71 0.79,0.54 0.7,1.48 1.39,1.53 0.57,0.23 1.12,-0.15 1.54,-1.63 0.92,-0.41 0.97,0.15 0.79,0.41 1.6,1.66 3.61,1.76 0.11,0.74 -0.47,1.35 -0.06,1.02 0.29,0.66 0.74,0.64 -0.7,1.04 -1.84,1.53 0.06,1.86 5.59,-1.43 2.06,-0.08 3.13,0.76 3.72,-0.82 0.9,0.1 1.14,0.48 1.65,1.48 1.16,0.43 1.01,-0.33 1.22,-1.02 1.12,-0.38 1.76,0.15 2.12,0.76 0.74,-0.05 3.18,-2.19 5,-2.29 0.79,-0.59 0.62,-1.07 0.14,-3.34 0.98,-3.26 2.75,-4.67 1.87,-2.4 0.79,-1.43 0.49,-0.41 1.3,-0.03 0.51,0.33 1.46,2.07 1.58,0.66 2.2,0.2 1.03,-0.15 1.98,-0.49 0.87,-0.61 0.68,-0.97 0.24,-1.46 0.57,-1.1 1.54,-0.66 0.59,0 0.98,0.51 2.44,2.43 3.29,0.82 1.01,-0.31 1.17,-1.94 0.71,-0.61 2.8,-0.2 1.92,-0.38 2.01,0.48 2.66,1.74 0.9,0.36 1.98,-0.05 0.81,0.23 1.04,1.15 0.93,2.78 1.09,1.61 1.69,1.07 2.96,0.51 1.2,1.15 1.12,1.94 0.76,0.74 3.04,0.51 0.71,0.41 1.2,1.22 0.43,0.74 -0.17,0.15 0.82,1.33 0.93,0.79 1.3,0.64 1.09,0.23 2.31,0.03 3.83,-1 7.14,-0.79 2.37,0.43 0,0 2.03,1.91 0.73,3.01 0.33,2.65 1.11,1.4 1.69,0.84 0.95,0.23 4.38,0.59 2.28,0.97 0.62,0.56 0.33,3.08 1.11,4.38 -1.25,1.93 0.06,0.87 0.57,0.58 1.72,0 1.01,0.46 -0.03,1.17 -1.2,2.42 0.25,1.27 0.46,0.51 3.48,2.14 3.97,3.89 0.51,1.73 -0.09,2.36 0.22,1.73 0.48,1.17 1.66,2.44 0.02,4.27 0.47,1.07 0.73,0.84 -0.06,0.28 -0.41,0.05 -0.46,0.43 -0.46,-0.38 -0.3,0.05 -0.92,0.89 -1.96,-2.44 -1.93,-1.55 -5.55,2.29 -4.86,1.57 -5.21,0.53 -2.66,-2.11 -8.4,-1.65 2.33,16.06 1.22,3.09 1.85,10.57 9.59,16.35 -9.29,7.96 -32.14,10.03 -7.04,10.02 -0.24,6.18 -0.73,4.34 -4.02,2.02 0.03,-0.55 -4.62,1.41 0,0 -0.6,-0.53 -0.71,-4.92 0.22,-1.97 -0.21,-0.96 0.22,-0.28 -0.08,-0.68 0.22,-0.66 -0.24,-1.24 -1.85,-1.31 -2.77,-3 -1.17,-1.61 -0.58,-1.46 -4.05,-1.14 -0.95,-0.08 -0.08,0.33 -0.71,0.66 -0.43,1.29 -1.65,1.51 -3.85,0.73 -0.49,1.49 -0.89,0.1 -2.6,3.46 -5.47,-1.31 -5.84,-1.71 -0.22,0.2 0.03,0.73 -0.57,1.46 -0.81,0.68 -3.51,-0.05 -3.21,0.4 -4.78,-1.21 -3.78,1.29 -0.63,-0.28 -1.44,-1.39 2.36,-8.88 -0.22,-0.63 -6.19,-4.01 -4.13,1.36 -1.77,1.39 -4.46,-1.36 -0.41,-8.26 -1.16,-0.99 -0.68,-0.91 -0.52,-1.44 -0.63,-0.88 -6.54,-7.31 3.35,-6.78 1.8,-3.06 -4.15,-9.83 -4.45,-0.13 -0.78,-0.2 -1.12,-1.93 0.08,-1.67 -0.71,-0.3 -0.46,0.13 -1.79,1.47 -0.76,1.39 -0.98,0.86 -0.57,1.57 0.41,2.91 -0.84,1.24 0.1,1.17 -6.22,5.27 -0.98,0.99 -4.57,6 -0.06,-0.86 -0.47,0.03 -0.11,0.53 0.41,0.46 -1.01,0.46 -1.14,-0.33 1.6,-0.43 -0.36,-0.46 -0.6,0.18 -0.19,-0.48 -0.98,-0.71 -0.24,-1.09 -1.01,-0.96 -0.32,-0.78 -0.51,-0.03 -0.43,0.58 -0.35,-0.68 -0.93,-0.18 0.19,-0.61 -0.49,0.13 -0.11,0.35 -1.38,-0.35 -0.11,0.35 -1.14,0.96 0,0.61 -0.16,0.03 -1.11,-0.38 0.02,-0.71 -0.95,-0.08 -0.48,-0.33 -0.81,0.68 -1.17,-0.53 -7.47,1.49 -1.66,-0.71 -1.11,-0.81 -0.43,-1.09 0.03,-1.09 -0.28,-1.17 0.41,-0.78 0.52,-0.15 1.72,-0.15 0.41,0.81 0.81,0.33 1.61,0.18 1.9,0.71 0.85,0.58 1.12,0.23 1.22,0.63 0.02,0.48 1.28,-0.03 -0.03,-0.3 -0.47,-0.25 1,-0.86 -0.14,-0.13 -1.06,0.43 -1.38,-0.1 -0.13,-0.2 -0.7,-2.94 0.08,-1.09 -0.41,-1.95 0.02,-0.38 0.7,-0.53 0.82,-1.24 0.14,-0.76 0.28,0.48 0.55,0.18 0.87,-0.79 -1.57,-1.19 0.6,-2.2 0.25,-2.31 -0.59,-0.33 -2.56,-0.43 -0.29,-0.66 -0.17,-1.65 -0.4,-0.56 -2.86,-1.17 -1.22,0.13 -0.92,-0.2 -0.6,-0.91 -1.31,-0.15 -1.91,0.43 -0.38,0.63 -0.87,0.13 -0.59,0.79 0.02,0.66 -0.55,1.09 -2.55,1.34 -1.25,2.51 -0.87,0.61 -0.06,0.73 -1.93,0.46 -0.68,2.1 -0.95,1.75 -1.38,0.3 -2.72,1.57 0.38,4.43 -1.63,0.53 -1.17,-0.43 -1.9,0.99 -1.74,-0.89 -8.42,-1.57 -6.31,2.35 -0.85,-6.58 2.72,-5.95 -1.68,-2.46 -7.91,1.24 -1.3,-0.2 -0.89,0.15 -1.58,1.65 -3.42,0.61 -8.7,4.81 -0.57,0.1 -0.73,0.91 0.85,0.3 1.41,-0.03 0.7,1.11 -0.17,1.14 0.47,0.43 -0.28,0.56 -0.63,0 0.35,1.21 -0.57,0 -0.19,0.58 -1,1.11 1.35,3.31 6.2,8.17 -0.87,1.04 0.82,1.72 -1.44,-0.28 -4.37,2.2 -1.82,0.33 -0.89,-0.08 -2.61,-0.66 -2.94,-0.1 -0.87,-4.2 -0.35,-0.56 -9.19,0.28 0,0 -0.54,-1.59 -1,-0.13 -0.52,-1.14 0.32,-0.3 -0.06,-1.49 0.41,-0.48 -0.05,-1.32 -0.76,-3.64 0.62,-1.24 1.28,-1.16 -0.78,-1.27 -6,-14.21 -2.07,-4.36 -0.03,-1.95 1.03,-3.09 -0.11,-0.25 1.76,-4.72 0.19,-1.09 -0.1,-1.45 -0.17,-0.68 -1.23,-2.11 -5.22,-6.4 -0.63,-1.6 -0.11,-0.99 0.21,-2.29 1.14,-2.47 1.8,-1.78 4.35,-1.91 1.68,-3.15 0,0 4.29,0.51 3.8,-0.89 2.17,-0.97 3.12,-0.66 3.29,-1.53 1.39,-0.81 1.39,-1.45 1.08,-1.78 0.38,-1.65 1.98,-1.96 0.46,-1.02 0.89,-0.03 0.44,-1.15 1.04,-0.66 2.17,-2.04 11.88,3.97 3.48,0.36 11.87,-3.26 2.5,-2.01 9.97,-2.85 4.79,-3.39 3.5,-3.11 2.01,-2.22 0.71,-1.12 1.53,-4.62 2.45,-2.91 2.37,-1.28 2.2,-0.71 2.14,-0.13 4.04,0.61 1.74,-0.38 0.93,-0.38 2.45,-1.76 2.86,-2.96 3.73,-1.86 1.77,-0.41 2.61,0 4.6,1.02 5.38,0.83 z m -11.83,94.07 0.02,0.48 0.79,-0.05 -0.28,0.2 0.16,0.28 0.6,-0.05 -0.66,1.01 -0.44,0.13 0.09,0.68 -0.33,0.15 -0.27,-0.89 0.21,-0.28 -0.08,-0.48 -0.51,0.43 -0.14,-0.28 0.25,-0.28 -0.11,-0.38 -0.87,0.53 0.59,0.71 -0.35,0.56 0.19,0.25 -0.11,0.73 -0.32,-0.05 -0.59,0.51 1.84,0.38 0.41,0.96 0.93,-0.23 0.41,0.46 0.55,-0.78 0,-0.66 -0.38,0.02 0.35,-0.53 0.29,0.15 0.35,-0.3 -0.33,-0.1 0.14,-0.35 -0.63,-0.13 0.02,0.33 -0.3,0.05 -0.13,-0.35 -0.19,0.18 -0.19,-0.81 0.97,0.1 -0.06,-0.68 -0.28,-0.15 -0.33,0.18 0.06,-0.46 0.28,-0.18 0.27,0.23 0.6,-0.71 0.35,-0.1 0.22,0.53 0.13,-0.35 0.68,-0.2 -0.09,-0.38 0.27,-0.23 -0.35,-0.58 -0.17,0.46 -0.57,0.28 -2.01,0.25 -0.95,-0.21 z m 2.66,1.52 0.06,0.28 1.06,-0.13 -0.71,-0.58 -0.08,0.3 -0.33,0.13 z m -7.92,5.41 0.14,-0.2 -0.17,-0.23 -0.4,0.53 0.43,-0.1 z m -4.18,2.58 0.02,-0.3 -0.3,0.05 0.03,0.28 0.25,-0.03 z m 11.03,1.98 -0.16,-1.29 -0.76,0.38 -0.84,0.08 0.59,0.58 -0.66,0.56 1.83,-0.31 z"
     title="Noord-Brabant"
     id="NL-NB"
     class="province-area"
     data-province="Noord-Brabant"
     onclick="filterByProvince('Noord-Brabant')"
     style="cursor: pointer;" />
  <path
     d="m 276.87853,318.98483 -0.97,-0.7 -0.13,-0.34 1.01,0.52 0.25,0.36 -0.16,0.16 z m -12.33,-1.58 -0.17,-0.13 0.22,-0.36 0.57,0.03 -0.62,0.46 z m 6.25,-3.75 -0.22,-0.05 -0.02,-0.31 0.28,0.03 -0.04,0.33 z m -8.7,-1.83 -0.24,0.05 -0.02,-0.31 0.43,-0.13 -0.17,0.39 z m 7.69,-68.2 -0.17,-0.05 0.1,-0.52 0.07,0.57 z m 37.85,-15.12 8.62,3.83 7.09,7.5 0,0 -0.36,0.26 0,0 -7.01,-7.42 -8.23,-3.59 -2.07,0.21 -0.71,-0.21 0.27,-0.36 2.4,-0.22 z m -94.39,-72.61 -0.6,0.31 -2.8,-0.24 -1.5,0.13 -3.34,0.81 -1.69,0.92 0.02,0.37 0.79,0.45 -0.55,0.55 -1.39,-0.1 -0.71,-0.55 -0.16,-0.79 0.17,-0.92 0.73,-0.76 1.57,-0.87 1.47,-1.31 1.09,-0.26 1.14,0 2.23,0.47 3.42,1.23 0.11,0.56 z m 55.41,8.52 -0.16,0.55 -0.41,-0.08 -1.57,1.26 -0.29,0.65 -0.09,1.83 1.47,-0.26 4.08,7.77 0.4,0.21 0.59,1.88 5.29,10.38 -1.52,18.28 1.22,0.08 0.67,1.17 0.87,3.63 2.34,2.14 0.54,0.83 1.55,1.54 1.17,0.39 1.77,0.03 1.41,-0.94 0.57,-0.5 1.95,-3.21 2.06,-0.05 2.41,0.31 0.68,0.39 1,0.18 0.55,0.65 1.15,0.55 0.89,0.03 0.4,-0.34 0.36,0.18 1.9,-0.57 0.43,0.5 -1.5,0.34 -0.05,0.21 2.15,-0.13 1.06,0.91 0.79,0.31 0.62,2.22 -0.46,0.6 0.35,0.73 -0.33,0.7 0.22,1.54 0.4,0.26 -0.11,1.09 2.04,1.56 0.96,0.08 0.1,0.26 -0.19,0.26 -1.01,-0.36 -0.35,0.34 0.13,1.04 -0.81,0.47 -0.36,0.57 -1.12,0.05 -0.14,0.16 0.3,0.26 -0.81,0.16 -0.05,0.26 0.79,0.65 -0.24,0.39 -0.25,-0.23 -0.44,0.03 -1.17,1.02 -2.1,0.34 -0.29,0.23 -0.43,-0.16 -1.11,0.26 -0.4,1.09 -0.11,2.08 -1.14,4.14 -0.79,1.17 -3.69,2.06 -1.01,0.99 -0.49,1.17 -1.33,0.03 -1.46,0.34 -1.14,0.65 -2.33,2.47 -2.33,0.23 -2.72,0.65 -0.52,-0.81 0.3,-1.09 -0.95,-1.43 -2.15,0.16 -1.79,-1.61 -0.84,-1.17 -2.2,0.65 -1.17,1.2 -0.41,-0.34 0.21,-0.34 -0.46,0.29 -0.9,-0.08 -0.13,0.62 0.24,0.34 -0.49,-0.16 0.14,-0.91 -0.73,-0.88 -0.93,0.03 -1.16,1.25 -1.12,0.18 -0.57,0.55 -1.06,0.52 -0.44,1.01 -0.08,1.61 0.57,3.2 -0.13,0.75 0.3,0.42 -0.14,0.55 0.29,0.68 -0.43,1.01 0.44,1.27 0.76,1.27 -0.08,0.52 0.81,2.31 -0.25,1.66 1.91,1.79 0.17,1.14 1.74,3.12 -0.11,1.53 0.73,0.78 0.95,2.02 0.14,1.17 0.68,1.19 0.7,0.03 -0.17,1.01 1.08,0.88 0.66,2.2 -1.58,2.72 -0.49,0.29 -0.27,0.52 -0.54,0.16 -0.57,-0.23 -0.47,0.62 -0.11,1.43 0.19,1.3 1.16,1.35 0.11,0.39 -0.21,0.73 -1.63,0.18 -1.09,-0.31 -1.91,0.96 -0.7,-0.41 0.55,1.32 0.59,0.23 -0.08,0.34 0.25,0.18 0.79,-1.06 0.66,-0.03 0.41,0.29 -0.81,1.66 -0.09,1.58 0.38,1.04 -0.27,1.06 0.27,0.34 0.96,0 0.68,0.31 1.03,-0.21 1.84,0.47 1.39,-0.08 0.25,-0.34 0.3,-3.26 0.35,-0.83 0.62,-0.67 0.36,-0.08 0.13,-0.34 -0.24,-1.35 0.24,-0.57 -1.46,-5.55 0.19,-0.26 0.3,0.03 1.52,5.24 1.23,1.14 0.13,0.52 1.87,0.05 1.08,-0.21 0.68,0.13 0.13,0.31 -1.58,0.6 -0.82,0.83 -1.35,0.18 -1.09,1.14 -1.17,0 -0.47,3.21 -1.08,1.66 -0.25,0.34 -0.44,0 -0.09,-0.34 0.22,-0.44 -0.21,-0.13 -0.46,0.67 -0.7,0.36 -0.4,1.04 -0.21,1.5 -0.57,0.72 -0.33,1.09 -1.54,-0.31 -0.54,0.21 -0.36,0.23 -0.85,1.55 -1.36,0.54 -0.84,0.93 -1.22,3.41 -0.73,0.26 -0.41,0.62 -0.81,0 -0.19,0.26 0.43,0.67 -0.27,0.7 0.08,0.41 -0.44,0.75 -0.36,0.13 -0.95,-0.59 -0.51,-0.8 -1.12,0.21 -1.71,0.98 -1.39,-1.55 -0.35,0.08 -0.9,-0.9 -0.71,0.83 0.47,1.24 1.14,0.16 1.41,1.16 -0.17,0.26 -0.66,0.08 0.14,0.52 -0.52,0.54 -0.02,-0.89 -0.46,-0.18 -0.47,0 -0.38,0.72 0.7,0.7 1.06,0.31 0.59,0.85 0.95,0.26 0.27,0.75 0.85,0.54 0.47,0.83 0.82,0.8 0.89,0.36 1.46,0.1 0.89,-0.88 1.3,-0.16 1.12,1.09 -0.14,0.93 -0.84,0.44 0,0.52 0.44,0.44 0.74,-0.08 -0.29,-0.59 0.13,-0.1 1.42,0.54 2.39,-0.49 1.63,0.28 1.28,-0.93 2.28,0.34 1.6,1.01 1.39,1.24 1.69,0.26 1.19,0.59 0.76,-0.21 0.51,0.41 0,0 1.16,1.45 1.08,0.62 11,-1.88 9.73,2.45 4.65,3.07 3.81,3.77 0,0 -4.73,3.38 -4.62,-0.83 -1.5,1.37 -0.93,-0.41 -2.53,5.21 -3.47,3.09 -0.1,5.88 -0.4,2.06 -1.25,2.94 -3.12,5.79 -2.79,0 -8.04,-0.59 -0.28,-1.13 1.79,-0.93 1.14,-1.03 0.84,-1.49 -1.99,-3.97 -1.9,-1.06 -0.49,0.95 -6.79,0.18 -2.03,-0.57 -3.21,-1.57 0.02,-1.47 -0.65,-0.72 3.31,-1.49 -2.18,-2.14 0.05,-0.9 -0.62,-1.96 -0.84,0.75 -0.52,-0.18 -0.25,-0.54 0.05,-1.11 -0.55,-0.57 -0.02,-0.95 -0.73,-1.52 1.12,0 0.51,-0.7 1.2,-0.49 1.22,-0.03 0.17,-1.14 1.28,-0.67 0.46,-0.1 0.22,0.21 0,0.57 0.52,0.26 -0.21,-1.21 -0.55,-0.77 -0.57,-0.05 -0.76,0.54 -0.35,-0.36 -1.23,1.47 -1.5,-1.26 -0.71,0.21 -0.44,1.19 -0.51,-0.44 -0.4,1.11 -0.59,0.15 -0.21,0.67 -0.7,0 -1.36,-3.2 -0.98,-0.41 -1.65,-0.05 -0.81,0.23 -1.27,0.9 -0.89,1.47 -0.47,0.26 -2.58,-0.41 -0.6,0.18 -1.27,-0.7 -1.2,0.52 0.21,2.24 -0.79,0.28 -0.52,0.46 -0.19,0.75 -0.82,0.21 -0.51,0.93 0.02,0.75 -0.68,0.57 -4.23,-0.21 -0.54,0.23 -2.01,0.1 -0.65,0.26 -1.22,1.01 -0.4,0.39 -0.76,1.6 -2.52,2.01 -2.98,1.37 -0.79,-0.15 -1.68,0.15 0,0 -1.65,-0.36 -1.55,0.67 -0.92,1.34 -1.38,1.08 -1.46,0.33 -1.93,1.24 -1.23,1.55 -0.92,-0.7 0.19,-0.46 -0.08,-0.93 -0.57,-1.26 0.22,-2.94 -3.09,-0.49 -1.5,0.62 -1.16,1.21 -0.21,-0.15 -0.4,0.26 -3.01,0.18 -5.13,2.99 -3.24,0.23 -2.25,-0.28 -2.36,-0.93 -1.68,0.57 -2.33,-0.54 -1.08,-0.88 -0.16,-1.31 0.09,-0.49 1.3,-1.62 1.25,-6.55 -0.29,-2.04 3.13,-3.17 1.47,-3.2 0.02,-0.65 1.04,-2.74 1.28,-1.86 -3.88,-1.65 -0.43,0.03 -2.14,0.59 -1,1.86 -10.74,-4.85 0,0 8.78,-22.26 1.79,-5.2 0.63,-2.72 0.22,-3.32 0.81,-1.11 -0.6,-1.71 1.25,-2.69 1.82,-5.08 1.93,-9.44 2.12,-13.14 1,-9.95 1.23,-8.12 0.06,-1.87 0.87,-5.88 1.49,-13.26 1.42,-6.7 0.92,-2.4 1.36,-2.64 2.67,-9.06 3.67,-14.66 0.82,-3.79 0.7,-14.14 0.54,-2.28 1.14,-2.2 0.87,-1.07 0.55,-0.24 2.29,-0.42 0.89,0.26 1.23,-0.6 2.56,0.13 -0.13,0.58 0.57,-0.31 0.43,0.26 -0.11,0.29 -0.36,-0.21 -0.32,0.58 0.17,0.73 0.4,0.45 0.33,0.03 0.11,0.63 0.17,0 1.16,-0.31 -0.13,-0.76 0.68,-0.52 -0.21,-0.45 -0.48,0.34 -0.28,-0.76 1.54,-0.31 0.46,1.05 -0.06,1 -1.54,3.3 -0.44,2.17 0.25,0.24 0.06,0.6 0.41,0 0.11,0.76 1.76,3.95 0.44,0.6 10.35,5.94 5.14,-1.36 1.79,-1.18 3.18,-1.33 -0.16,-0.47 0.57,-0.05 2.01,-2.54 0.43,-0.94 0.25,-1.39 1.5,-1.34 2.03,-0.5 1.04,0.03 2.36,-1.1 1.84,0.52 1.33,-0.26 1.14,-0.55 0.41,0.39 0.28,-0.1 0.63,0.65 1.79,-1.34 -0.21,-0.31 0.24,-0.31 18.09,-15.67 0,0 0.65,0.87 0,0 -17.69,15.47 z m -27.61,-57.19 0.73,-0.24 0.55,0.5 1.22,1.68 1.82,3.53 -0.14,0.92 -0.44,0.05 -0.22,0.71 -0.32,-0.87 -0.41,8.21 0.32,2.42 -0.03,1.84 -0.62,1.89 -0.7,0.26 -1.9,1.6 -0.21,0.89 -1.04,0.63 -0.14,2.71 -1.25,1.71 -0.44,1.34 -0.55,0.52 -0.24,-0.39 -0.89,0.73 0.1,0.47 -0.7,1.02 -0.68,0.39 -1.23,0.5 -2.23,0.1 -0.41,0.34 -4.26,5.54 0.02,0.47 0.7,0.42 -0.46,0.66 -1.27,0 -0.52,-0.6 -0.43,0.31 -1.06,-0.66 -0.84,0 -2.34,-1.1 -0.41,0.34 0.43,0.21 0.17,0.79 1.84,0.73 0.24,0.55 1.04,0.66 0.16,0.34 -0.46,0.03 -1.06,-0.5 0.14,0.21 -1.85,0.79 0.02,0.29 0.46,0.08 -0.05,0.21 -1.58,0.52 -1.31,-0.21 -0.97,0.55 0.38,0.13 -0.44,0.5 -0.59,-0.08 -1.3,-1.21 -1.39,-2.81 -0.55,-2.86 0.25,-4.88 1.01,-5.17 0.81,-2.73 1.5,-3.68 3.02,-5.68 4.68,-7.49 1.69,-2.26 5.14,-8.4 2.15,-2.63 1.91,-1.69 1.46,-0.550004 0.4,0 0.6,0.420004 1,1.71 0.68,0.45 0.81,1.76 -0.08,1.47 0.17,0.95 0.39,0.64 z"
     title="Noord-Holland"
     id="NL-NH"
     class="province-area"
     data-province="Noord-Holland"
     onclick="filterByProvince('Noord-Holland')"
     style="cursor: pointer;" />
  <path
     d="m 437.14853,186.44483 1.21,1.57 0.35,1.02 0.79,1.04 5.61,6.53 1.13,0.63 3,4.13 1.03,1.04 -5.16,5.71 -0.19,1.26 -3.07,1.54 -3.64,0.88 -0.34,0.24 -0.72,1.25 3.2,8.24 1.79,3.91 0.81,2.81 0.98,1.3 0.54,0.34 0.2,-0.13 0.52,0.49 0.76,1.57 1.22,-0.5 0.38,0.44 2.03,0.24 0.85,-1.17 0.85,-0.03 1.26,-0.47 0.17,0.68 1.42,0.81 0.45,-0.16 0.17,0.36 1.2,0.6 0,0 0.87,-0.08 0,0 0.84,1.41 0.93,0.7 1.13,0.08 0.54,0.73 0.8,0.52 0.43,-0.08 0.7,-0.88 0.58,0.08 0.97,1.32 0.46,0.26 0.53,-0.07 0.57,-0.84 1.21,-0.08 1.96,-0.93 0.95,-0.05 0.54,0.93 -0.43,0.52 0.05,1.17 1.17,1.05 1.23,0.44 0.4,0.52 1.44,0.86 0.09,0.54 0.32,0.34 0.49,-0.05 0.7,0.52 -0.16,0.34 1,1.25 0.26,1.27 0.68,0.96 -0.15,1.07 0.47,0.8 0.08,0.84 0.58,0.78 0.4,0 0.14,0.72 0.22,0.06 1.43,-0.76 0.39,-0.67 1.51,0.05 0.5,-0.91 1.43,0.73 0.46,-0.37 0.11,-0.6 0.95,-0.7 0.44,-0.8 0.17,0.59 0.43,0.42 -0.05,1.01 0.53,0.68 0.95,0.6 0.93,0.15 1.74,-0.52 0.51,-0.54 0.61,-1.93 0.7,0.37 -0.03,0.65 0.66,0.26 0.18,0.41 1.2,0.13 0.33,-0.28 1.01,0.05 0.95,0.42 1,0 0.43,0.8 0.71,0.05 0.27,0.65 0.36,0.03 0.08,0.55 0.37,0 0.23,-0.45 -0.44,-4.36 -0.49,-1.46 -0.35,-3.02 0.11,-0.49 4.73,-3.9 1.3,-0.73 10.1,-2.27 9.63,4.58 5.4,1.88 -0.81,1.84 0.33,0.11 0.23,0.52 -1.02,1.12 0.32,0.54 -0.57,1.61 1.82,0.11 0,0 0.29,0.05 0.66,1.07 0.43,0.23 0.82,1.59 -0.43,3.04 -0.55,1.87 -0.1,2.05 7.5,6.62 -2.16,0.81 -0.91,0.05 -1.07,-0.44 -0.87,0.05 -1.54,-0.39 -0.8,2.68 -0.81,0.65 -0.06,0.39 -5.51,-1.12 3.94,8.23 -1.12,8.94 2.54,1.95 0.97,0.57 0.95,0.18 4.18,3.21 1.31,0.54 2.61,0.78 9.34,-0.34 1.8,0.42 0.96,-0.1 -0.01,2.43 1.63,-0.34 6.99,2.02 5.37,2 1.07,-0.39 2.23,-2.18 0.59,-0.9 1.74,-4.02 1.76,-1.24 0.79,1.01 0.09,0.67 1.3,3.11 1.3,5.41 1.77,1.61 2.28,5.17 -0.05,0.47 0.9,-0.05 1.62,0.64 0.65,-0.38 0.46,0.2 0.01,0.8 0.81,1.25 1.55,4.7 -0.11,5.51 -2.66,3.72 -0.28,1.76 -1.13,1.67 0.11,1.27 -0.38,1.26 -1.15,2.3 -0.51,0.47 -1.27,2.84 -0.11,0.77 0.05,1.16 0.35,1.11 -0.03,0.65 -0.21,0.15 0.08,1.16 0.9,0.96 1.63,3.73 3.17,3.54 -0.7,1.62 -3.43,2.22 -2.64,0.18 -0.48,0.38 -0.41,-0.41 -1.98,-0.54 -1.39,0.31 -0.4,-0.16 -1.09,0.55 -0.12,0.56 -0.76,0.65 0.11,1.67 -0.73,1.91 -0.86,1.13 -1.4,3.01 -1.62,2.48 -0.31,0.23 -2.73,0.54 -3.83,0.56 -0.31,0.49 -0.14,1.21 -3.55,3.3 -1.5,6.71 -2.66,2.57 -5.68,0.59 -9.34,0 0,0 -7.13,0.05 -2.71,-1.26 -3.45,-0.64 -2.33,-1.08 1.68,-2.7 0.21,-1.65 -0.21,-0.72 0.03,-1.41 -0.44,-0.23 0.51,-0.75 0.03,-0.62 -0.29,-0.85 -0.44,-0.41 -3.26,-1.72 -0.66,-0.05 -0.78,1.36 -0.77,-1.08 -0.84,-0.26 -0.38,0.31 -0.27,0.83 -0.67,0.23 -1.33,1 -1.33,-1.23 -0.11,-0.42 0.51,-1.05 -0.7,-0.49 -0.31,-0.62 -0.98,-0.41 -0.05,-0.41 -0.48,-0.29 -0.11,0.26 -5.69,1.16 -6.29,-1.03 -3.02,1.08 -0.54,-0.18 -0.52,-0.51 -1.53,-0.75 -0.53,-0.69 -0.87,-1.96 -0.07,-1.42 -0.32,-0.31 -1.04,-0.05 -0.94,-0.36 -1.3,-2.63 -3.19,-3.34 -0.65,-1.86 -1.11,-1.57 0.05,-1.29 -2.58,-0.31 -2.04,0.13 -0.9,-0.44 -1.76,0.75 -2.99,0.18 -0.32,0.69 -0.63,0.11 -1.05,0.69 -0.09,2.19 -1.39,0.06 -1.27,0.36 -3.27,-0.03 -0.49,-0.44 -0.11,-0.44 -0.48,-0.1 -0.13,-0.41 -1.83,0.49 -0.37,0.51 -1.04,-0.36 -0.08,0.75 -1.53,-0.44 -2.09,0.18 -0.43,-0.33 -1.09,0.02 -1.09,-0.41 -2.44,-0.33 -2.31,-1.73 -1.74,0.08 -1.03,-0.31 -0.65,0.28 -0.71,-0.08 -0.22,0.11 -0.22,0.9 -0.15,1.52 -0.72,-0.77 -0.37,0.67 0.33,0.25 -0.12,0.24 -0.62,-0.26 0.3,0.85 0.57,0.67 -0.03,0.46 -0.29,0.31 -0.34,-0.31 0.04,-0.82 -0.42,-0.75 -1.35,-0.33 -1.07,-0.78 -0.43,-1.65 0.33,-0.85 1.11,-0.72 0.27,-0.9 -0.08,-0.52 -1.96,0.18 -0.89,-0.64 -1.8,-0.41 0,-1.01 0.91,-1.31 -0.88,-0.78 -0.45,-1.96 -1.51,-1.86 -0.13,-2.5 -0.82,-1.16 -0.45,-1.44 -0.33,-0.6 -1.65,-0.02 -1.06,-0.34 -0.09,-2.81 -0.54,-1.19 -1.57,-0.21 0.02,-0.51 0.63,-0.78 0.26,-1.83 0.22,-2.53 -0.21,-2.61 0.4,-0.68 1.6,-0.49 0.87,-0.72 -0.22,-0.54 -0.5,-0.42 -1.26,-0.28 -0.36,-0.31 -0.29,-0.6 0.03,-0.93 0.63,-0.87 3.14,-0.6 2.89,-1.11 0.42,-0.47 0.34,-0.72 0.05,-2.43 0.7,-1.4 0.88,-3.41 -0.09,-0.96 -0.9,-2.59 -2.35,-3.47 -1.25,-0.93 -0.61,-0.8 0.16,-2.44 -0.19,-2.82 -0.43,-1.27 -1.35,-1.63 -2.39,-1.07 -1.26,-1.03 -0.81,-1.22 -1.01,-2.46 -3.04,-2.39 -0.62,-0.08 -0.98,-0.54 -0.44,0.78 -0.67,0.54 -1.71,0.6 -6.89,7.13 -1.37,-1.97 -0.93,0.23 -2.01,1.5 -0.62,-0.57 -1.2,0.55 -0.5,-1.61 -1.65,-3.5 -1.11,-1.89 -2.1,-2.62 -2.46,-2.18 -2.15,0.8 0,0 -1.25,-7.13 -0.49,-1.48 -6.74,-7.2 -1.45,-0.26 -3.74,0.06 0.06,-6.86 9.39,0.02 0.43,-0.7 0.82,-0.34 9.32,-2.05 1.26,0.49 0.8,0.86 2.34,-0.29 3.64,-2.05 0.23,-0.57 5.24,-1.15 3.56,-2.36 0.83,-0.96 -0.04,-0.4 -0.39,-0.65 -1.89,-1.87 -2.57,-0.7 -2.52,-2.21 -1.54,-0.52 -1.09,-0.08 -2.1,-0.83 -0.02,0.36 -0.68,-0.08 -0.38,-0.44 -0.06,-0.89 1.79,-2.03 1.47,-1.01 0.9,-1.07 0.51,-0.08 0.41,-0.68 -0.03,-0.91 -0.68,-1.51 -0.53,-0.41 -0.31,0.02 0,-0.91 -0.54,-0.94 -1.11,-0.57 -1.6,-5.53 -1.12,-2.89 -0.57,-0.89 -3.05,-2.89 -0.57,-0.03 -0.95,-0.6 -1.62,-1.38 -0.93,-1.31 -3.1,-2.14 -1.39,-0.67 -1.87,-0.34 -0.33,-0.24 -2.9,0 -0.03,-0.49 -2.14,-1.88 -1.41,-2.51 0,0 3.79,-2.64 0.23,0.4 1.93,1.09 0.35,1.07 0.38,0 0.62,-0.57 0.85,0.44 1.49,-0.05 0.57,0.34 0.74,-0.03 1.46,0.79 0.76,0.07 3.31,-1.56 0.6,-0.94 1.37,-0.86 0.81,-1.23 1.43,-0.94 0.03,-1.31 0.19,-0.29 -0.24,-0.44 0.65,-0.31 0.06,-0.55 1.65,-0.21 0.76,-0.31 1.47,0.6 -0.18,-1 0.2,-0.39 0.69,-0.47 2.14,-0.47 0.49,2.01 0.92,1.36 0.74,2.01 0.6,0.13 0.81,0.74 0.68,0.13 0.52,-0.03 0.49,-0.42 1.31,-0.44 1.81,-0.24 0.71,1.44 1.34,-0.55 2.39,-1.46 0.32,-0.58 -0.52,-2.61 1.79,-0.73 2.05,0.23 0.72,-0.13 0.6,-0.62 0.79,-0.45 0.85,-0.08 1.92,-1.22 z"
     title="Overijssel"
     id="NL-OV"
     class="province-area"
     data-province="Overijssel"
     onclick="filterByProvince('Overijssel')"
     style="cursor: pointer;" />
  <path
     d="m 227.45853,348.19483 1.68,-0.16 0.79,0.16 2.97,-1.37 2.52,-2.01 0.76,-1.6 0.39,-0.39 1.22,-1 0.65,-0.26 2.01,-0.1 0.54,-0.23 4.22,0.2 0.68,-0.57 -0.01,-0.74 0.5,-0.93 0.83,-0.21 0.19,-0.75 0.52,-0.46 0.79,-0.28 -0.21,-2.25 1.21,-0.51 1.26,0.69 0.6,-0.18 2.58,0.41 0.48,-0.25 0.88,-1.47 1.27,-0.91 0.81,-0.23 1.64,0.05 0.98,0.42 1.36,3.19 0.7,0 0.21,-0.67 0.58,-0.15 0.4,-1.11 0.5,0.44 0.45,-1.19 0.71,-0.2 1.5,1.26 1.24,-1.47 0.34,0.36 0.76,-0.54 0.57,0.05 0.56,0.77 0.2,1.22 -0.52,-0.26 0,-0.57 -0.22,-0.21 -0.46,0.11 -1.28,0.67 -0.18,1.13 -1.21,0.03 -1.21,0.49 -0.5,0.7 -1.13,0 0.73,1.52 0.02,0.95 0.55,0.57 -0.05,1.11 0.26,0.54 0.52,0.18 0.84,-0.75 0.61,1.96 -0.04,0.9 2.18,2.14 -3.31,1.5 0.65,0.72 -0.01,1.47 3.21,1.57 2.02,0.57 6.79,-0.18 0.49,-0.96 1.9,1.06 2,3.97 -0.84,1.49 -1.14,1.03 -1.79,0.93 0.28,1.13 8.04,0.59 2.79,0 3.12,-5.79 1.25,-2.94 0.39,-2.06 0.1,-5.88 3.46,-3.09 2.53,-5.21 0.94,0.41 1.5,-1.36 4.62,0.82 4.73,-3.38 0,0 8.04,7.95 3.07,2.63 0,0 -1.82,7.83 6.47,5.28 0.05,1.52 -0.41,1.98 -0.65,0.54 -1.19,-0.36 -0.68,0.54 0.52,0.52 0.26,1.54 -0.13,0.93 2.52,0.9 6.04,0.82 0.08,0.39 1.03,0.44 -0.1,0.54 0.45,0.15 -0.22,1.73 1.28,0.56 1.63,0.05 -0.3,1.5 0.11,0.38 2.13,1.06 -0.77,1.49 -1.73,0.25 -0.22,1.44 -0.36,-0.07 0.73,0.9 0.77,0.25 -0.03,0.88 0.66,0.36 0,0.36 -3.27,-0.34 1.11,0.72 -0.08,0.49 -1.38,1.34 0.21,2.67 -2.28,1.44 -1.71,2.18 0.3,0.34 0.63,0.15 0.1,0.49 2.72,1.62 1.34,-0.47 1.86,-0.02 0.41,-1.39 1.4,-0.1 1.32,0.28 1.52,-1.62 -1.05,-0.43 0.51,-0.9 1.28,0.38 0.11,-0.51 0.08,-0.67 -0.85,-0.23 0.44,-1.03 -0.4,-0.33 -0.01,-0.36 -0.48,-0.16 -0.11,-0.66 1.41,-0.36 0.41,0.48 0.34,-0.07 -0.08,-0.49 1.07,-0.16 0.27,1.47 -0.3,0.72 0.6,0.41 0.13,1.85 0.52,0.62 0.44,0.02 0.26,2.01 -0.46,1.9 0.17,0.35 -0.39,3.78 -0.56,1.51 1.21,0.52 -0.21,1.77 3.01,1.13 -0.21,4.49 -0.87,0.02 1.55,1.69 0.38,-0.41 0.49,0.54 0.27,0.44 0.14,1.64 0.65,0.69 1.27,1.18 0.99,0.2 0.68,1.06 0.35,2.1 1.6,1.89 -0.17,1.08 -0.41,0.64 0.03,0.69 0.69,1.67 -0.01,1.53 -0.94,0.23 0.07,1.31 -0.91,-0.51 -1.59,1.41 -2.68,-1.8 -4.1,-1.05 -1.23,-0.53 -1.14,-0.9 -1.14,-1.82 -5.11,-1.89 -1.04,-0.95 -2.16,-1.31 -0.91,-0.23 -2.79,0.31 -4.32,-0.85 -1.04,0.57 -2.08,1.76 -4.97,1.9 -1.51,0.1 -2.3,-0.49 -1.34,0.21 -1.25,0.87 -1.57,2.02 -1.93,0.98 -1.35,-0.08 -2.45,-1.64 -2.56,-0.33 -2.01,-0.54 -1.76,-0.95 -1.85,-1.92 -1.25,-0.74 -1.2,0.31 -0.68,0.84 -1.39,2.69 -1.13,1 -0.85,0.21 -2.03,-0.44 -2.17,-1.41 0,0 -1.02,-0.67 -2.82,-0.48 -1.14,-0.67 -0.79,-1.66 -0.35,-2.64 -0.41,-0.77 -2.06,-1.21 -1.58,-0.59 -1.2,-0.38 -1.81,-0.1 -1.67,0.48 -3.03,1.49 -0.55,0.82 -2.8,2.2 -1.03,1.13 -0.41,1.23 -0.82,1.13 -1.6,0.18 -2.44,-1.92 -1.2,-0.23 -0.63,0.12 -1.44,0.85 -2.06,2.92 -0.9,0.62 -1.21,-0.08 -2.39,-0.95 -0.88,0 -1.08,1.13 -1.06,2.53 -1.2,1.51 -3.09,0.8 -1.47,0.13 -1.64,0.56 -1.29,-5.05 -1.1,-0.89 -0.4,-1.39 -1.19,-0.74 -1.86,-2.13 -1.65,-2.33 0.62,-0.28 -1.01,-1.38 -1.21,-0.41 -1.4,-1.87 6.34,-1.57 0.14,-0.33 -1.29,-2.49 -1.02,0.54 -2.62,-0.1 -0.97,0.69 -1.77,0.18 -0.44,-1.44 0,-0.92 1.39,-1 -0.27,-1.93 1.14,-0.84 2.04,-3.18 2.61,-1.98 3.31,-1.21 0.8,-1.64 -4.92,0.05 -1.56,0.39 0.06,-1.37 -0.89,-1.07 -0.28,-1.26 -0.27,-3.91 0.09,-2.33 -5.41,-3.89 0.26,-1.05 1.94,-0.87 0.32,-2.06 0.9,-1.31 1.27,-0.54 1.48,-0.29 0.92,-0.48 0.37,1.51 0.88,0.7 3.09,0.41 1.14,-0.18 0.08,-0.28 0.71,-0.34 -0.59,-4.04 3.25,-1.26 0.04,-0.36 -5.3,-3.68 -2.39,-0.85 -4.52,-4.99 -0.32,-0.8 -1.07,0.05 -0.26,-1.36 0.03,-2.53 -1.12,-1.85 z"
     title="Utrecht"
     id="NL-UT"
     class="province-area"
     data-province="Utrecht"
     onclick="filterByProvince('Utrecht')"
     style="cursor: pointer;" />
  <path
     d="m 123.11853,569.76483 0.43,0.03 0.03,-0.38 0.16,0.1 0.73,1.57 -0.28,0.2 -1.55,0.15 -1.95,-0.86 -0.49,-0.56 1.19,-0.78 1.42,0.2 0.31,0.33 z m -93.219998,-9.96 2.94,0.94 -0.21,0.61 0.19,0.13 0.4,-0.18 0.16,0.2 0.92,0.03 1.57,1.85 0.95,0.33 1.65,0.05 0.9,0.25 0.25,0.48 0.95,0.25 0.21,0.48 3.94,1.14 7.17,1.14 0.78,0.91 0.11,0.46 0.36,0.15 0.11,0.46 2.55,1.67 1.22,1.72 1.52,0.15 1.23,-0.4 3.88,0.78 0.16,0.5 -0.63,0.51 -0.09,0.93 1.66,0.88 0.6,0.03 0.06,-0.28 -0.3,-2.73 0.13,-0.35 3.05,0.08 0.57,0.71 1.16,0.63 1.52,0.23 -0.46,0.5 -0.03,0.46 1.16,2.25 0.33,-0.18 -0.44,-1.44 0.54,-0.23 -0.38,-1.24 0.47,0.05 -0.14,0.35 0.27,0.83 0.47,-0.25 0.35,-0.93 0.35,0.03 -0.24,0.35 0.3,0.35 1.22,0.18 1.22,0.76 4.04,-0.1 1.06,-1.34 0.35,-0.96 2.36,-0.71 0.68,-0.88 2.83,-1.95 1.71,-0.73 2.6,-0.56 0.09,-0.23 1.19,-0.38 0.52,0.08 0.33,-0.3 0.78,0.61 0.21,-1.04 -0.17,-0.4 0.54,-1.06 0.11,-1.54 0.87,-0.94 -0.37,-0.86 -0.16,-2.23 1.65,-2.33 2.579998,0.23 0.38,0.53 3.94,0.61 -0.32,0.53 0.38,0.38 0.41,-0.18 0.62,1.04 0.55,0.2 0.65,2.33 -0.27,0.18 0.19,0.63 0.65,0 1.2,2.58 0.93,1.14 4.49,0.28 2.07,0.35 3.7,3.23 2.77,3.29 1.63,0.93 -1.74,-2.27 -0.84,-1.84 1.71,-0.66 1,-0.05 0.49,0.35 0.49,1.01 0.9,0 0.7,0.5 0.85,1.21 -0.08,0.48 0.3,0.05 0.41,-0.63 -0.7,-0.61 -0.33,-0.76 2.48,0.13 -0.38,-0.4 -2.18,-0.4 -0.38,-0.38 3.58,-0.18 1.22,0.28 -0.66,-0.66 -3.05,-0.02 -1.38,-0.43 -1.31,-2.25 0.08,-1.16 1.04,-0.33 0.65,0.23 0.98,-0.83 0.59,-0.13 0.43,3.08 2.28,1.34 1.12,0.2 -1.8,-0.94 -0.97,-0.86 -0.3,-0.71 0.03,-1.29 0.3,-0.28 0.43,0.33 0.17,1.06 0.17,-2.17 0.63,-0.71 1.33,0 1.08,0.46 0.46,-0.03 1.12,0.86 0.65,2.15 0.97,1.62 1.69,1.87 -2.26,3.44 -8.09,10.45 -10.74,8.12 -2.91,1.89 -0.63,0.63 -2.04,1.06 -0.54,0.96 -2.91,0.68 -0.44,-0.2 -0.51,-0.86 -0.65,0.53 -1.19,0.48 -0.57,-0.96 -1.04,0.03 -1.99,1.11 -0.74,0.83 -0.76,0.3 -0.779998,0.73 -0.3,-0.38 -1.41,2.34 -2.26,0.4 -0.06,0.73 -0.65,1.21 -1.73,0.13 -0.79,0.25 -0.02,0.33 -1.06,0.33 -0.47,-1.11 -0.76,-0.86 -0.48,0.81 -0.92,0.05 -0.49,0.83 0.21,1.11 -0.47,0.08 -0.59,0.81 -1.72,0.78 -0.89,-0.33 -0.32,0.4 -0.84,0.43 -0.32,-0.78 -0.92,-1.06 1.84,-1.41 0.46,-0.91 -0.93,-1.56 -1.38,0.71 -3.21,2.29 -1.11,-0.68 -0.4,0.3 -0.35,-0.15 -0.74,0.4 -0.92,-0.38 -1.11,0.86 -1.08,0.25 -2.03,-0.91 -0.81,-0.13 -0.17,0.2 0.22,0.83 -0.14,0.13 -0.79,-0.66 -0.32,-0.68 -0.9,-0.23 -0.24,-0.48 -0.17,-2.85 0.16,-4.26 0.97,-2.67 -0.22,-0.35 -1.19,-0.3 -1.46,-1.31 -0.71,-0.3 -0.27,0.58 -0.68,0.35 -0.79,-0.53 -0.87,-1.69 -0.62,-0.38 -0.62,0.33 -3.92,-0.93 -1.01,0.4 -3.5,-1.01 -0.38,-0.23 -0.55,-1.08 -1.68,-0.03 -0.41,-0.68 -2.93,-1.72 -2.01,0 -0.73,0.5 -2.26,-1.34 -0.73,0.08 -0.46,-0.78 -4.38,-2.32 -1.57,1.87 0.76,1.36 -0.6,0.43 0.27,0.68 -0.28,0.48 -0.49,-0.48 -0.52,0.13 -0.71,-0.61 -0.05,-0.35 -1.36,-0.68 -0.52,0.2 -0.21,0.66 -0.49,0.35 -1.79,-0.23 -0.81,1.72 -0.87,0.13 -1.19,-1.19 -1.55,0.3 1.92,10.37 -7.18,0.86 -4.75,0.33 -0.95,-0.1 -2.26,-0.86 -0.63,0.05 -0.44,-2.34 -0.27,-0.35 -1.1400003,-1.08 -1.14,0.73 -0.65,-1.34 -1.68,-1.06 -0.92,-1.82 -1.39,-0.35 -0.57,-0.71 0.95,-0.78 -0.03,-1.44 -0.28,-0.45 -1.39,-0.96 -0.62,-1.57 1.42,-0.76 -2.66999999,-3.16 -0.04,-0.45 3.98999999,-4.52 -0.29,-2.27 -1.36,-1.77 -0.13,-0.78 0.22,-1.87 -1.31,-2.53 0.79,-1.14 1.36,-0.96 0.02,0.4 0.28,-0.03 0.09,-0.51 2.86,-1.04 3.6700003,-1.85 1.31,-0.2 0.19,0.78 0.71,0.23 0.14,-0.51 1.96,-0.61 0.76,-0.61 2.33,-0.33 2.31,-0.76 0.92,-0.43 0.13,-0.43 0.87,-0.05 1.58,-1.39 1.77,-0.18 0.71,0.3 2.64,0.25 1,0.35 0.12,0.7 z m 25.09,-28.4 0.17,0.2 -0.59,-0.15 -0.3,-0.36 0.46,0 0.26,0.31 z m -1.86,-2.48 -0.3,-0.1 0.35,-0.1 -0.05,0.2 z m -0.34,-1.09 -0.13,0.15 -0.13,-0.25 0.17,-0.48 0.09,0.58 z m 4.39,-0.03 -0.08,0.23 -0.17,-0.1 -0.13,-0.38 0.51,-0.96 -0.13,1.21 z m 0.63,-1.14 0,0.36 -0.22,-0.79 0.36,-0.41 0.16,0.28 -0.3,0.56 z m -5.11,-0.68 -0.22,0 0.41,-0.25 0.35,-0.76 0.14,0.66 -0.68,0.35 z m 11.36,-2.59 0.76,0.08 0.28,-0.2 0.78,0.53 -1.22,0.28 -2.55,-0.05 0.02,-0.63 0.25,-0.33 0.55,-0.05 1.13,0.37 z m 17.83,-0.61 -0.36,-0.03 0,-0.18 0.49,-0.51 0.25,0.36 -0.38,0.36 z m -15.49,0.02 -1.01,-0.56 0.08,-0.13 0.43,-0.1 0.73,0.3 -0.23,0.49 z m -1.37,-0.71 0.17,0.84 -1.73,-0.18 -0.43,-0.43 1.44,-0.43 0.41,0 0.14,0.2 z m -13.37,-0.23 0.68,0.3 0.62,0.61 0.32,0.71 0.06,0.96 -0.44,-0.13 -0.41,1.27 -0.3,-0.23 -0.29,-1.42 -0.66,-1.47 0.03,-0.76 0.39,0.16 z m -1.52,-0.76 -0.13,0.15 -0.38,-0.91 0.55,0.08 -0.04,0.68 z m -0.81,-1.72 0.32,0.05 0.1,0.48 -0.41,-0.25 -0.59,0.08 0.06,-0.3 0.52,-0.06 z m 78.579998,-11.59 -0.55,-0.15 0.35,-0.13 0.2,0.28 z m -52.079998,-38.36 1.31,1.28 4.53,1.43 1.61,-0.31 3.21,-4.08 2.44,-1.45 3.04,-0.79 2.93,0.41 2.25,2.04 6.039998,1.35 0.44,0.66 0.63,2.73 2.61,3.7 0.24,4.94 0.51,2.01 1.39,2.44 1.14,0.46 6.96,0.56 2.99,1.07 2.98,-0.08 2.33,0.25 7.25,5.5 5.16,3.56 2.96,0.97 0,0 -1.68,3.15 -4.35,1.91 -1.8,1.78 -1.14,2.47 -0.21,2.29 0.11,0.99 0.63,1.6 5.22,6.4 1.23,2.11 0.17,0.68 0.1,1.45 -0.19,1.09 -1.76,4.72 0.11,0.25 -1.03,3.09 0.03,1.95 2.07,4.36 6,14.21 0.78,1.27 -1.28,1.16 -0.62,1.24 0.76,3.64 0.05,1.32 -0.41,0.48 0.06,1.49 -0.32,0.3 0.52,1.14 1,0.13 0.54,1.59 0,0 -5.7,0.25 0.32,-0.56 0.08,-1.37 -1.95,-3.24 -2.88,-1.32 -1.04,0.2 -0.35,-0.99 -0.68,-0.63 -1.42,0.15 -1.28,0.83 -0.89,0.33 -0.73,0 -2.44,1.49 -1.04,0 -1.8,-0.35 -1.28,-0.76 -3.81,-0.68 -3.8,-1.42 -0.4,-0.1 -0.21,0.18 -0.95,-1.09 -1.73,-0.51 -1.65,-1.67 0.03,-0.38 -0.81,-1.14 0.55,-0.86 -2.55,-0.79 -0.16,-1.09 -0.25,-0.1 -0.29,0.45 -2.33,-1.11 -0.78,-0.86 -0.87,-0.03 -0.27,-0.48 -0.57,-0.28 -0.24,-0.56 -1.659998,-1.14 -0.9,-1.52 -0.9,-0.56 -2.06,1.44 -1.84,0.15 -2.6,1.8 -1.25,-0.61 -0.22,0.13 0.17,1.29 -0.71,0.15 0.66,1.57 0.03,0.89 -0.9,1.67 -0.38,1.67 -0.38,0.44 -0.06,0.73 -0.41,0.41 -1.8,5.06 -1.11,0.53 -3.53,-1.06 -1.35,0.71 -0.79,0.83 -1.19,-0.08 -0.76,0.66 -1.28,0.18 -0.78,0.41 -2.69,0.18 -0.13,0.3 -0.68,-0.23 -1.68,-2.05 -1.57,-1.09 -0.19,-0.4 -2.29,-1.49 0.27,-1.09 -1.95,-0.13 -1.71,-1.11 -1.49,0.83 -1.53,0 -0.47,-0.23 -0.92,-0.76 -0.84,-2.94 -0.79,0.08 -0.73,-1.57 -1.66,-1.65 -2.42,-1.95 -1.12,-0.61 -4.86,-0.2 -0.89,0.84 -0.08,0.76 -0.95,0.56 -0.43,0.18 -1.01,-0.15 -0.73,0.28 -0.81,-0.2 -1.2,0.3 -1.17,-0.94 -0.08,-1.95 -0.55,0.08 -0.1,2.1 -0.79,-0.23 0,-0.83 -0.33,0.68 -0.19,-0.08 0.09,-0.73 -0.24,-0.08 -0.21,0.63 -0.05,0.2 1.68,0.81 0,0.2 -1.39,-0.33 -0.93,0.2 -0.05,0.43 -0.35,-0.23 -0.76,0.41 -0.82,-0.41 -0.4,-0.94 -1.39,-1.34 -0.93,0.08 -0.27,-0.46 -2.26,-1.57 -1.47,-1.39 -0.74,-0.96 -2.26,-4.31 -1.52,-2.18 -1.61,-1.55 -0.98,-0.25 -4.26,-3.12 -1.66,-2.23 -0.78,-0.43 -0.28,-0.81 -0.62,-0.36 0.22,-2.05 0.71,-1.95 3.4,-1.98 3.4,-2.72 2.53,-1.63 3.91,-2.34 1.27,-0.43 2.09,-1.6 4.3,-2.21 1.47,-0.28 1.87,0.43 1.41,-0.1 1.72,0.36 1.8,1.22 0.68,-0.03 4.87,-1.85 2.15,-0.48 0.74,-0.46 0.6,-3.1 0.09,-1.91 0.27,-0.15 -0.16,-0.58 -0.38,-0.08 -0.32,-0.38 1.14,-0.2 0.6,-0.94 3.18,-3.28 -0.24,-0.48 0.78,-0.2 0.96,-2.11 -0.51,-0.64 0.16,-0.2 0.62,-0.03 0.03,-2.88 -2.34,-0.74 -1.82,-1.5 -1.71,-2.65 -0.51,-1.55 -0.24,-1.55 0.06,-1.73 1.22,-2.85 1.31,-2.34 0.9,-0.99 0.93,-0.41 3.16,-1.04 1.71,-0.1 4.97,-2.04 4.08,-0.03 4.18,0.84 0.68,-3.16 0.68,-0.97 1.23,-0.67 z m -5.53,16.36 0.54,0.13 0,0.25 -0.81,-0.23 -0.17,-0.76 -0.73,0.13 -0.71,0.51 -0.57,1.32 0.24,0.43 -4.68,3.18 -0.93,0.56 -4.57,1.6 -0.05,2.82 0.79,0.1 -0.3,1.07 -0.87,0.03 -1.31,3.18 0.32,0.08 0.52,-0.61 0.06,0.36 -1.44,1.58 1.46,0.76 -0.22,0.15 -1.36,-0.61 -0.51,0.46 0.25,1.09 -0.36,0.66 -0.14,-0.25 0.17,-0.51 -0.92,-0.76 -1.46,1.27 -0.03,0.2 0.27,0.13 -0.36,0.2 -0.11,0.74 -0.25,0.13 0.03,0.36 -0.33,0.53 -0.43,3.76 0.33,-0.1 -0.1,0.58 0.84,-0.61 0.03,0.51 1.57,-0.33 1.79,1.22 0.47,0 0.38,0.69 1.84,0.03 1.46,-0.91 1.14,0.18 0.7,-0.61 1.88,-0.05 0.43,-0.53 1.9,0.41 1.01,-0.96 2.96,-0.28 0.63,-0.58 1.25,-0.03 1.68,0.58 1.84,-0.61 0.74,0 0.62,0.79 3.05,0.56 1.69,1.8 2.61,4.55 0.52,-0.46 0.09,0.48 -0.59,0.23 0.11,0.36 0.3,0 0.22,0.91 0.65,1.19 0.36,0.1 -0.19,0.79 -1.04,0.66 -2.71,0.76 -1.77,2.39 -1.27,0.41 -0.59,-0.25 -1.16,-1.22 -0.24,-0.71 -1.49,-1.01 -2.75,0.63 -1.87,1.52 -2.61,-0.61 -0.14,0.15 -2.12,-1.24 -1.61,-0.2 -0.25,0.25 -0.22,-0.18 -4.23,2.46 -0.97,1.17 -2.31,1.57 -1.08,1.85 -0.49,0.3 -0.79,-1.78 0.44,-1.52 0.46,0.23 0.54,1.67 0.16,-0.05 -0.11,-0.63 -0.38,-0.53 -0.03,-0.58 -0.46,-0.33 -0.57,-1.95 -1.52,-2.13 1.9,-2.49 -0.16,-0.1 -0.38,0.46 -1.22,1.78 -0.65,0.15 -1.14,-0.71 -1.06,-1.22 -1.55,-0.76 -0.22,-0.51 -0.54,0.23 -0.7,-0.43 -1.25,-3.17 -0.11,-0.74 0.27,-0.13 0.13,-0.46 -1.22,0.3 -1.82,0.96 0.28,2.36 0.32,0.58 1.38,1.32 -0.08,0.51 0.9,0.89 0.11,0.46 1.35,0.58 1.82,1.47 0.57,0.15 1.41,2.94 0.95,2.82 2.12,3.12 0.62,0.53 0,0.58 0.25,-0.46 0.54,0.99 -0.35,-0.91 0.51,0.3 -0.11,-0.28 2.14,-0.43 -0.46,-0.2 -1.41,0.15 -0.46,-0.61 1.47,-0.63 0.87,-0.91 1.23,-0.25 0.08,-0.18 -0.51,-0.38 -0.11,-0.48 1.01,-1.88 0.19,-1.17 1.77,-1.14 0.76,0.05 -0.43,1.02 0.49,-0.03 0.19,-0.71 3.8,-0.08 3.23,0.43 1.28,-0.43 0.36,-0.61 0.41,-0.18 1.49,-0.23 0.25,-0.33 1.9,-0.08 0.84,0.15 1.16,0.66 0.33,0.51 -0.05,0.38 0.55,0.48 1.88,0.38 0.49,-0.23 -0.14,-0.71 0.59,-0.36 0.3,0.03 0.29,0.81 2.5,-0.69 1.41,0.48 0.36,-0.36 0.44,0.3 0.25,-0.61 0.87,-0.03 0.79,-0.51 0.97,0.43 1.28,-0.05 0.46,0.63 0.17,1.27 0.35,0.74 1.39,2 2.45,-1.07 1.84,0.33 3.529998,1.27 1.57,0.79 0.32,-0.1 -0.1,1.14 0.25,0.91 0.49,0 -0.17,-2.03 1.14,0.71 0.82,0.1 0.66,1.34 0.52,0.08 0.11,0.3 1.93,1.34 0.87,0.91 1.17,-0.36 0.54,0.84 -0.32,1.06 0.36,1.17 0.33,0.2 0.38,0.76 0,0.41 -0.47,0.81 0.14,0.15 -0.27,0.33 0.35,0.35 0.33,1.06 0.41,0.2 1.11,1.6 0.24,-0.08 0.19,0.3 -0.19,0.13 1.3,2.03 0.82,0.03 1.42,3.09 1.5,0.35 3.72,2.35 0.08,-0.18 0.33,0.08 0.59,0.91 0.9,0.13 2.42,-0.41 0.81,-0.76 2.56,-1.34 0.76,-0.05 0.35,-0.46 3.05,0.53 0.47,0.25 0.3,0.48 0.78,0.23 1.74,-0.13 -0.48,-4.89 0.36,-1.22 -0.92,-6.92 -6.8,-3.07 -0.57,-0.96 -0.06,-0.61 0.89,-1.83 -1.22,-1.01 -0.3,-0.74 -1.82,-0.13 -0.57,-0.28 -0.44,0.56 -0.73,0.18 -0.25,-0.03 -0.98,-1.09 -1.33,0.51 -3.83,-0.15 -0.17,-0.23 -1.39,0.08 -0.13,-0.46 -2.72,-0.2 -0.46,-0.53 0.28,-0.43 -0.44,-0.13 0.11,-0.2 -0.24,-0.25 -0.6,0.05 -0.81,-2.16 0.24,-0.41 -1,-0.89 -0.38,0.15 -0.27,-0.3 -0.09,-1.19 -2.64,-0.48 -1.04,-0.58 0.43,-1.19 -1.01,-1.5 -1.68,-0.71 -0.63,-0.81 -0.98,-0.56 -2.169998,-0.33 -0.87,-1.17 0.06,-1.32 1.009998,-1.55 1.91,-0.2 -0.02,-0.2 1.06,-0.41 0.51,0.23 1.01,-0.66 0.66,0.25 2.47,-1.83 1.23,-0.08 1.14,-1.22 0.87,-0.23 0.4,0.15 0.16,-0.36 2.06,-0.64 1.25,0.41 0.84,-0.13 1.96,0.41 0.49,0.53 0.49,1.35 0.41,-0.2 0.32,0.15 1,1.02 -0.21,-0.71 1.71,0.03 2.75,-0.56 0.54,0.43 1.31,-0.1 0.19,0.18 0.27,-0.74 1.84,-0.28 0.08,-0.56 -0.73,0 -0.02,-0.2 1.04,-0.58 -0.06,-0.92 -0.74,-0.05 -0.74,0.48 -0.49,-0.28 -0.81,0.53 -4.68,-0.13 -1.53,-3.08 -1.33,-1.07 -0.55,-0.03 -0.6,-0.48 -0.13,-2.64 0.22,-0.38 0.7,0.28 0,-0.81 2.37,-2.09 1.61,0.05 2.88,0.84 1.12,0.56 0.81,0.71 2.21,0.97 2.71,1.65 -0.11,-1.32 -0.68,-1.2 -1.69,-0.99 -0.13,0.31 -0.47,0.13 -2.53,-1.58 -0.22,-0.33 0.47,-0.89 -0.09,-0.18 -0.35,-0.03 -0.73,1.02 -2.12,-0.74 0.14,-0.31 -0.32,-0.25 0.06,-0.18 0.43,0.28 2.86,-0.2 0.06,-0.51 -0.54,-0.08 0.03,-0.25 -0.33,-0.2 -1.69,0.18 -0.82,0.48 -0.1,-0.15 0.73,-0.43 1.55,-0.15 0.19,-0.41 0.21,0 0.03,0.31 0.47,0.05 0.11,-0.41 0.36,-0.23 -0.71,-1.88 -0.47,-0.36 -0.33,-0.64 -0.97,0.61 -5.55,0.84 -2.17,1.5 0.19,0.51 1.52,1.55 -0.27,0.76 -0.74,0 -0.36,0.79 0.43,0.2 -0.02,0.3 -0.25,0.31 -0.33,-0.03 -0.06,0.74 -2.17,1.35 -0.33,0.84 -1.54,1.63 -1.88,0.92 -1.49,-0.66 -1.6,0.84 -0.28,0.48 -2.14,0.79 -2.29,1.25 -2.6,0.05 -0.889998,0.76 -2.66,0.17 -1.17,-0.64 -1.99,-2.08 -0.44,0 -0.98,-2.01 -0.38,-0.36 -0.25,0.03 -0.81,1.27 -0.97,0.31 0.02,-0.31 -0.84,-0.08 -0.57,0.23 -3.04,-0.94 -0.19,-0.36 3.59,-3.18 1.17,-0.46 -1.31,0.33 -3.56,3.2 -0.81,0.25 0.08,-2.42 -0.78,-1.42 0.17,-0.36 -0.41,-1.58 -0.6,-0.38 -0.79,-1.32 0.08,-1.12 -2.77,-2.62 -0.43,-0.2 -1.28,0.41 -3.91,-2.01 0.21,-0.69 -0.09,-0.84 -0.82,-1.22 -0.71,-0.38 -1,-0.15 -1.01,0.13 0.07,0.59 z"
     title="Zeeland"
     id="NL-ZE"
     class="province-area"
     data-province="Zeeland"
     onclick="filterByProvince('Zeeland')"
     style="cursor: pointer;" />
  <path
     d="m 156.05853,478.56483 1.06,0.92 0.3,-0.15 0.46,0.13 0.17,0.48 1.11,0.59 0.05,0.38 -2.9,0.13 -1.08,-0.28 -1.09,-1.2 1.53,-0.97 0.39,-0.03 z m -11.84,-7.95 1.27,0.03 4.04,1 5.25,2.37 2.52,0.82 0.87,0.46 0.08,0.82 -3.66,1.43 -2.6,-0.1 -1.93,-0.48 -2.48,-1.45 -4.98,-3.42 -0.35,-0.43 0.14,-0.74 0.65,-0.38 1.18,0.07 z m 35.53,-147.73 10.74,4.85 1,-1.86 2.14,-0.59 0.43,-0.03 3.88,1.65 -1.28,1.86 -1.04,2.74 -0.02,0.65 -1.47,3.2 -3.13,3.17 0.29,2.04 -1.25,6.55 -1.3,1.62 -0.09,0.49 0.16,1.31 1.08,0.88 2.33,0.54 1.68,-0.57 2.36,0.93 2.25,0.28 3.24,-0.23 5.13,-2.99 3.01,-0.18 0.4,-0.26 0.21,0.15 1.16,-1.21 1.5,-0.62 3.09,0.49 -0.22,2.94 0.57,1.26 0.08,0.93 -0.19,0.46 0.92,0.7 1.23,-1.55 1.93,-1.24 1.46,-0.33 1.38,-1.08 0.92,-1.34 1.55,-0.67 1.65,0.36 0,0 0.06,1.7 1.12,1.85 -0.03,2.52 0.25,1.37 1.08,-0.05 0.32,0.8 4.53,4.99 2.39,0.85 5.3,3.68 -0.05,0.36 -3.24,1.26 0.59,4.04 -0.71,0.33 -0.08,0.28 -1.14,0.18 -3.09,-0.41 -0.89,-0.69 -0.36,-1.52 -0.92,0.49 -1.49,0.28 -1.27,0.54 -0.9,1.31 -0.32,2.06 -1.95,0.87 -0.25,1.05 5.41,3.88 -0.09,2.34 0.27,3.9 0.28,1.26 0.89,1.08 -0.06,1.36 1.57,-0.38 4.92,-0.05 -0.81,1.64 -3.31,1.21 -2.61,1.98 -2.04,3.18 -1.14,0.85 0.27,1.92 -1.39,1 0,0.92 0.44,1.44 1.77,-0.18 0.97,-0.69 2.63,0.1 1.01,-0.54 1.3,2.49 -0.14,0.33 -6.35,1.56 1.41,1.87 1.2,0.41 1.01,1.38 -0.62,0.28 1.65,2.33 1.87,2.13 1.19,0.74 0.4,1.38 1.11,0.9 1.28,5.04 1.65,-0.56 1.47,-0.13 3.09,-0.79 1.2,-1.51 1.06,-2.54 1.08,-1.13 0.89,0 2.39,0.95 1.2,0.08 0.9,-0.62 2.06,-2.92 1.44,-0.85 0.63,-0.13 1.2,0.23 2.44,1.92 1.6,-0.18 0.82,-1.13 0.41,-1.23 1.03,-1.13 2.8,-2.2 0.55,-0.82 3.02,-1.49 1.68,-0.49 1.8,0.1 1.2,0.38 1.58,0.59 2.06,1.2 0.41,0.77 0.35,2.64 0.79,1.67 1.14,0.67 2.82,0.49 1.03,0.67 0,0 -4.57,8.71 -0.46,0.1 0.13,0.64 -2.03,2.94 0.1,1.61 -0.74,-0.36 -2.2,4.07 -0.28,2.17 -0.36,0.69 -1.69,-0.41 -1.03,0.26 -0.95,-0.28 -0.44,0.36 -0.17,1.25 -1.04,1.56 -1.11,0.61 -1.91,0.03 -1.3,0.64 -0.25,0.87 0.4,0.87 1.09,0.67 -0.59,0.56 -1.79,0.72 -0.52,0.59 -1.53,-0.61 -4,0.1 -1.8,-1.58 -0.41,0.43 0.59,1.87 -0.35,1.41 0.95,1.58 3.4,0.46 -1.03,4.98 -2.37,-0.05 0,0 -5.35,-0.79 -4.6,-1.02 -2.61,0 -1.77,0.41 -3.73,1.86 -2.86,2.96 -2.45,1.76 -0.93,0.38 -1.74,0.38 -4.04,-0.61 -2.14,0.13 -2.2,0.71 -2.37,1.28 -2.45,2.91 -1.53,4.62 -0.71,1.12 -2.01,2.22 -3.5,3.11 -4.79,3.39 -9.97,2.85 -2.5,2.01 -11.87,3.26 -3.48,-0.36 -11.88,-3.97 -2.17,2.04 -1.04,0.66 -0.44,1.15 -0.89,0.03 -0.46,1.02 -1.98,1.96 -0.38,1.65 -1.08,1.78 -1.39,1.45 -1.39,0.81 -3.29,1.53 -3.12,0.66 -2.17,0.97 -3.8,0.89 -4.29,-0.51 0,0 -2.96,-0.97 -5.16,-3.56 -7.25,-5.5 -2.33,-0.25 -2.98,0.08 -2.99,-1.07 -6.96,-0.56 -1.14,-0.46 -1.39,-2.44 -0.51,-2.01 -0.24,-4.94 -2.61,-3.7 -0.63,-2.73 -0.44,-0.66 -6.039998,-1.35 -2.25,-2.04 -2.93,-0.41 -3.04,0.79 -2.44,1.45 -3.21,4.08 -1.61,0.31 -4.53,-1.43 -1.31,-1.28 0,0 2.07,-1.07 0.82,-0.79 1.44,-3.75 0.43,-1.25 -0.11,-0.61 -1.61,-3.93 -0.05,-1.58 1.22,-1.89 1.41,-1.1 1.49,-0.31 2.26,-0.87 1.82,-0.05 1.36,-0.36 4.62,-2.17 4.75,-1.81 1.79,-0.46 3.259998,0.05 1.58,0.74 0.68,0.64 -1.42,-0.28 -0.22,1.12 2.06,1.25 1.01,1.2 0.78,0.33 0.22,-0.23 -0.54,-0.64 0.02,-0.46 0.7,0.18 0.51,-0.38 0.28,0.21 1.58,-1.84 -0.25,-0.28 0.16,-0.28 1.22,-0.97 1.2,-0.54 0.08,-0.89 -0.71,-1.69 -4.7,-6.98 -0.4,-0.95 0.25,-1.94 0.76,-1.1 1.82,-3.89 0.52,-0.38 -0.11,-0.79 -1.2,-1.05 -0.89,-0.38 -0.59,0.97 0.03,1.1 -0.41,-0.41 -0.17,0 -0.06,0.46 -0.21,-0.08 -0.4,-0.69 -1.03,-0.33 -0.7,0.56 -0.32,-0.13 -0.84,0.51 -1.06,0.1 -0.55,-0.26 -0.3,-0.54 0.17,-1.38 2.26,-7.99 0.05,-2.1 -0.22,-0.18 -0.57,0.28 0,-1.38 0.97,-2.25 0.68,-0.51 1.12,0.18 1.12,-1.67 0.43,-0.15 1.47,0.67 0.28,-0.21 1.17,-0.03 1.08,0.69 1.98,0.79 0.95,0.79 3.34,-2.95 2.28,-1.54 1.34,-1.15 0.73,-1 0.98,-0.69 1.76,-2.97 2.01,-2.77 12.2,-14.14 3.42,-4.37 0.03,-0.39 0.38,-0.1 0.68,0.57 0.74,-1.1 -0.21,-0.13 -0.62,0.77 -0.33,-0.28 -0.05,-0.46 3.26,-3.34 1.09,-0.8 2.58,-2.8 7.04,-9.03 4.75,-6.98 6.11,-10.64 4.43,-8.25 7.54,-16.57 z m -69.37,126.67 -1.55,1.89 0.27,0.26 -0.3,0.89 0.1,0.54 -0.52,-0.1 0.17,0.43 -0.25,0.28 0.22,0.2 -0.1,0.25 0.25,0.08 0.74,-0.77 1.11,0.59 1.49,1.35 5.76,2.58 1.96,1.46 4.62,2.3 3.01,2.02 4.38,1.45 -0.11,0.2 0.27,0.2 0.4,-0.1 3.45,3.77 2.12,1.84 1.87,1.27 0.38,0.82 2.72,3.36 0.76,0.69 3.48,2.19 1.49,0.31 2.58,1.83 2.77,1.07 2.09,0.38 5.79,0.31 1.11,-0.13 0.47,-0.43 0.33,-0.56 0.02,-0.89 0.44,-0.03 1,-3.34 -1.22,-0.69 -0.05,-0.33 -0.33,0.18 -6.22,-3.64 -5.51,-2.55 0,-0.23 -0.41,-0.1 -0.02,0.23 -6.61,-1.99 -3.81,-1.43 -1.17,-0.89 -1.74,-2.45 -0.19,-0.48 0.24,-0.25 0.02,-1.61 -2.41,-2.68 -2.26,-1.25 -1.42,-0.1 -0.79,0.33 -0.6,-0.26 -3.21,-3.91 -0.63,-0.33 -0.43,-0.56 -1.27,0.18 -0.98,-0.18 -0.33,0.1 -0.24,0.46 -0.4,0.05 -1.58,-0.1 -0.68,-0.51 0.11,-0.84 -0.52,-0.13 -0.32,1.05 -0.6,-0.77 -3.77,-1.33 -1.19,-1.12 -1.19,-1.87 -2.26,1.07 -0.49,0.64 -0.31,-0.17 z"
     title="Zuid-Holland"
     id="NL-ZH"
     class="province-area"
     data-province="Zuid-Holland"
     onclick="filterByProvince('Zuid-Holland')"
     style="cursor: pointer;" />
</svg>


                <div class="flex flex-col gap-1.5">
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" onclick="setQuery('')">All properties</span>
                    <!-- Price filters -->
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="under200k" onclick="toggleFilter('under200k')">Under â‚¬200k</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="price200to400" onclick="toggleFilter('price200to400')">â‚¬200k-400k</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="priceOnRequest" onclick="toggleFilter('priceOnRequest')">Price on request</span>

                    <!-- Size & features -->
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="size80" onclick="toggleFilter('size80')">Size > 80mÂ²</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="bedrooms3plus" onclick="toggleFilter('bedrooms3plus')">3+ bedrooms</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="largePlot" onclick="toggleFilter('largePlot')">Large plot</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="energyABC" onclick="toggleFilter('energyABC')">Energy A-C</span>

                    <!-- Timing -->
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="pastDay" onclick="toggleFilter('pastDay')">Past day</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="pastWeek" onclick="toggleFilter('pastWeek')">Past week</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="past2Months" onclick="toggleFilter('past2Months')">Past 2 months</span>

                    <!-- Personal ratings -->
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="liked" onclick="toggleFilter('liked')">Saved only</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="disliked" onclick="toggleFilter('disliked')">Blacklisted only</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="hideDisliked" onclick="toggleFilter('hideDisliked')">Hide blacklisted</span>
                    <span class="bg-gray-100 px-2.5 py-1.5 rounded text-xs cursor-pointer border border-gray-300 transition-all duration-200 hover:bg-gray-200 select-none" data-filter="rated" onclick="toggleFilter('rated')">Rated only</span>
                </div>
            </div>

            <div class="bg-white p-3 sm:p-4 rounded-lg mb-3 sm:mb-4 shadow-sm">
                <h3 class="mb-3 text-sm sm:text-base font-medium text-gray-800 border-b border-gray-200 pb-2">Actions</h3>
                <button onclick="showBulkBlacklistModal()" class="w-full p-2.5 mb-2 bg-red-600 text-white border-none rounded cursor-pointer text-sm hover:bg-red-700">Bulk Blacklist Results</button>
                <div id="dataSourceInfo" class="text-xs text-gray-600 mt-2 break-all leading-tight">Loading dataset...</div>
                <div class="text-xs text-gray-400 mt-0.5">Dataset cached in browser for faster loads</div>
            </div>
        </div>

        <div class="flex-1 min-w-0">

        
            <div class="bg-white rounded-lg shadow-sm">
                <div class="px-3 sm:px-4 md:px-5 py-3 sm:py-4 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-0">
                    <span id="resultsCount" class="font-medium text-sm sm:text-base">0 results</span>
                    <div class="flex items-center gap-2 text-xs sm:text-sm text-gray-600">
                        <span>Schema: </span><span id="schemaDisplay" style="color: #007bff; font-weight: 500;">funda</span>
                        <span style="margin: 0 8px;">|</span>
                        <span>Sort by:</span>
                        <select id="sortSelect" class="px-2 py-1.5 border border-gray-300 rounded text-sm bg-white cursor-pointer hover:border-blue-500">
                            <option value="">Default</option>
                            <option value="price-asc">Price: Low to High</option>
                            <option value="price-desc">Price: High to Low</option>
                            <option value="date-asc">Date: Oldest First</option>
                            <option value="date-desc">Date: Newest First</option>
                        </select>
                    </div>
                </div>
            <div id="resultsList">
                <div class="text-center py-10 text-gray-600">Load a JSONL file to start exploring</div>
            </div>
            </div>
        </div>
        </div>
    </div>

    <!-- Bulk Blacklist Modal -->
    <div id="bulkBlacklistModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 overflow-y-auto">
        <div class="bg-white my-4 sm:my-20 mx-auto p-4 sm:p-5 rounded-lg w-11/12 max-w-lg">
            <h3 class="mb-3 sm:mb-4 text-base sm:text-lg font-semibold text-red-600">âš ï¸ Bulk Blacklist Properties</h3>
            <p class="mb-3 sm:mb-4 leading-relaxed text-sm sm:text-base">This will blacklist <strong id="bulkCount">0</strong> properties from your current search results.</p>
            <p class="mb-4 sm:mb-5 text-gray-600 text-xs sm:text-sm">Properties that are already liked will remain liked. Only neutral properties will be blacklisted.</p>
            <div class="flex gap-2 sm:gap-2.5 justify-end">
                <button onclick="hideBulkBlacklistModal()" class="px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm">Cancel</button>
                <button onclick="executeBulkBlacklist()" class="px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm">Blacklist All</button>
            </div>
        </div>
    </div>

    <!-- Analysis Configuration Modal -->
    <div id="analysisConfigModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 overflow-y-auto">
        <div class="bg-white my-4 sm:my-20 mx-auto p-4 sm:p-5 rounded-lg w-11/12 max-w-2xl">
            <h3 class="mb-3 sm:mb-4 text-base sm:text-lg font-semibold text-blue-600">ðŸ”‘ Analysis Configuration</h3>
            <p class="mb-3 sm:mb-4 text-xs sm:text-sm text-gray-600">Configure GitHub token to trigger house analysis workflows. Token is stored locally in your browser.</p>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">GitHub Personal Access Token</label>
                    <input type="password" id="githubTokenInput" placeholder="ghp_..." class="w-full px-3 py-2 border border-gray-300 rounded">
                    <p class="mt-1 text-xs text-gray-500">Required permissions: <code>repo</code>, <code>workflow</code></p>
                    <p class="mt-1 text-xs text-gray-500">Used to trigger GitHub Actions workflows for analysis</p>
                    <p class="mt-1 text-xs text-blue-600"><a href="https://github.com/settings/tokens" target="_blank" class="hover:underline">â†’ Create token</a></p>
                </div>
            </div>

            <div class="flex gap-2.5 justify-end mt-5">
                <button onclick="hideAnalysisConfigModal()" class="px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700">Cancel</button>
                <button onclick="saveAnalysisConfig()" class="px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save Token</button>
            </div>
        </div>
    </div>

    <!-- Analysis Results Modal -->
    <div id="analysisModal" class="hidden fixed inset-0 z-50 bg-black bg-opacity-50 overflow-y-auto">
        <div class="bg-white my-4 sm:my-8 mx-auto p-4 sm:p-6 rounded-lg w-11/12 max-w-4xl">
            <div class="flex justify-between items-start mb-3 sm:mb-4">
                <h3 class="text-lg sm:text-xl font-semibold text-gray-900">ðŸ  Analysis Results</h3>
                <button onclick="hideAnalysisModal()" class="text-gray-500 hover:text-gray-700 text-2xl leading-none">&times;</button>
            </div>

            <div id="analysisContent" class="space-y-4">
                <!-- Content loaded dynamically -->
            </div>
        </div>
    </div>

    <script>
        let properties = [];
        let currentResults = [];
        let isLoading = false;
        let currentSchema = 'funda';
        let activeFilters = new Set();
        let propertyRatings = new Map(); // 0=neutral, 1=saved, 2=blacklisted

        // House Analysis Configuration
        let analysisConfig = {
            github: {
                owner: 'Saltbeef',
                repo: 'frontend',
                token: localStorage.getItem('github_token') || ''
            }
        };

        // Cache for scores index with ETAG support
        let scoresCache = {
            etag: null,
            data: null,
            lastFetch: 0
        };

        let analysisStatuses = new Map(); // houseId -> {status, score, updated_at}
        let analysisPolling = new Map(); // houseId -> interval

        // Performance: Property indexes for fast filtering
        let propertyIndexes = {
            province: new Map(),
            city: new Map(),
            priceRanges: new Map(),
            livingAreaRanges: new Map()
        };

        // Performance: Pre-compiled schema functions
        let compiledSchemaFunctions = {};
        let currentDataSource = null; // track current data source
        let currentDataUrl = null; // track current data URL for sharing
        let currentDataLoaded = null; // track when data was loaded

        // Performance: Build indexes for fast filtering
        function buildPropertyIndexes() {
            console.log('Building property indexes...');
            const start = performance.now();

            // Clear existing indexes
            propertyIndexes.province.clear();
            propertyIndexes.city.clear();
            propertyIndexes.priceRanges.clear();
            propertyIndexes.livingAreaRanges.clear();

            properties.forEach((property, index) => {
                const province = property.AddressDetails?.Province;
                const city = property.AddressDetails?.City;
                const price = Number(String(property.FastView?.Price || "0").replace(/[^0-9]/g, "") || 0);
                const livingArea = Number(String(property.FastView?.LivingArea || "0").replace(/[^0-9]/g, "") || 0);

                // Index by province
                if (province) {
                    if (!propertyIndexes.province.has(province)) {
                        propertyIndexes.province.set(province, []);
                    }
                    propertyIndexes.province.get(province).push(index);
                }

                // Index by city
                if (city) {
                    if (!propertyIndexes.city.has(city)) {
                        propertyIndexes.city.set(city, []);
                    }
                    propertyIndexes.city.get(city).push(index);
                }

                // Index by price ranges (0-200k, 200k-400k, 400k-600k, 600k+)
                let priceRange = '600k+';
                if (price < 200000) priceRange = '0-200k';
                else if (price < 400000) priceRange = '200k-400k';
                else if (price < 600000) priceRange = '400k-600k';

                if (!propertyIndexes.priceRanges.has(priceRange)) {
                    propertyIndexes.priceRanges.set(priceRange, []);
                }
                propertyIndexes.priceRanges.get(priceRange).push(index);

                // Index by living area ranges
                let areaRange = '200m2+';
                if (livingArea < 50) areaRange = '0-50m2';
                else if (livingArea < 100) areaRange = '50-100m2';
                else if (livingArea < 200) areaRange = '100-200m2';

                if (!propertyIndexes.livingAreaRanges.has(areaRange)) {
                    propertyIndexes.livingAreaRanges.set(areaRange, []);
                }
                propertyIndexes.livingAreaRanges.get(areaRange).push(index);
            });

            const end = performance.now();
            console.log(`Built indexes for ${properties.length} properties in ${(end - start).toFixed(2)}ms`);
            console.log('Province index:', Object.fromEntries(Array.from(propertyIndexes.province.entries()).map(([k,v]) => [k, v.length])));
        }

        // Populate city dropdown from loaded properties
        function populateCityDropdown() {
            console.log('Populating city dropdown...');
            const start = performance.now();

            const citySet = new Set();
            properties.forEach(property => {
                const city = property.AddressDetails?.City;
                if (city && city.trim()) {
                    citySet.add(city.trim());
                }
            });

            const sortedCities = Array.from(citySet).sort();
            const citySelect = document.getElementById('cityFilter');

            // Clear existing options except "All cities"
            citySelect.innerHTML = '<option value="">All cities</option>';

            // Add sorted cities
            sortedCities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                citySelect.appendChild(option);
            });

            const end = performance.now();
            console.log(`Populated ${sortedCities.length} cities in ${(end - start).toFixed(2)}ms`);
        }

        // Performance: Pre-compile schema mapping functions
        function compileSchemaFunctions() {
            console.log('Compiling schema functions...');
            const start = performance.now();

            const schema = SCHEMA_MAPPINGS[currentSchema];
            compiledSchemaFunctions = {};

            for (const [key, expression] of Object.entries(schema)) {
                try {
                    // Create a function that takes 'item' as parameter and returns the evaluated expression
                    compiledSchemaFunctions[key] = new Function('item', `return ${expression}`);
                } catch (error) {
                    console.error(`Failed to compile schema function for ${key}:`, error);
                    // Fallback to eval-based approach
                    compiledSchemaFunctions[key] = (item) => eval(expression);
                }
            }

            const end = performance.now();
            console.log(`Compiled ${Object.keys(compiledSchemaFunctions).length} schema functions in ${(end - start).toFixed(2)}ms`);
        }
        let saveRatingsTimeout = null; // debounce timer for saving ratings

        // Schema mapping with clean type casting (no null checks needed)
        const SCHEMA_MAPPINGS = {
            'funda': {
                '$price': 'Number(item.Price?.NumericSellingPrice || 0)',
                '$priceDisplay': '(item.Price?.SellingPrice || "")',
                '$priceText': '(item.Price?.SellingPrice || "")',
                '$address': '(item.AddressDetails?.Title || "")',
                '$city': '(item.AddressDetails?.City || "")',
                '$province': '(item.AddressDetails?.Province || "")',
                '$livingArea': 'Number(String(item.FastView?.LivingArea || "0").replace(/[^0-9]/g, "") || 0)',
                '$plotArea': 'Number(String(item.FastView?.PlotArea || "0").replace(/[^0-9]/g, "") || 0)',
                '$bedrooms': 'Number(item.FastView?.NumberOfBedrooms || 0)',
                '$energyLabel': '(item.FastView?.EnergyLabel || "")',
                '$description': '(item.ListingDescription?.Description || "")',
                '$daysAgo': 'Math.floor((Date.now() - new Date(item.sitemapData?.lastmod || 0)) / (1000*60*60*24))',
                '$originalUrl': '(item.sitemapData?.originalUrl || "")',
                '$id': 'Number(item.Identifiers?.TinyId || 0)'
            }
        };

        // Load property ratings from localStorage
        function loadPropertyRatings() {
            const ratings = localStorage.getItem('funda-property-ratings');
            if (ratings) {
                const ratingsObj = JSON.parse(ratings);
                propertyRatings = new Map(Object.entries(ratingsObj).map(([k, v]) => [Number(k), v]));
            }
        }

        // Load saved URL from localStorage
        // Hardcoded dataset URL
        const DATASET_URL = 'https://raw.githubusercontent.com/Saltbeef/frontend/main/data/apify_dataset.json.gz';

        // IndexedDB cache management for large JSONL data
        let dbCache = null;

        async function initCache() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open('JsonlCache', 1);

                request.onerror = () => reject(request.error);
                request.onsuccess = () => {
                    dbCache = request.result;
                    resolve(dbCache);
                };

                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    if (!db.objectStoreNames.contains('cache')) {
                        const store = db.createObjectStore('cache', { keyPath: 'url' });
                        store.createIndex('timestamp', 'timestamp', { unique: false });
                    }
                };
            });
        }

        async function getCachedData(url) {
            try {
                if (!dbCache) await initCache();

                const transaction = dbCache.transaction(['cache'], 'readonly');
                const store = transaction.objectStore('cache');
                const request = store.get(url);

                return new Promise((resolve, reject) => {
                    request.onerror = () => reject(request.error);
                    request.onsuccess = () => {
                        const result = request.result;
                        if (result) {
                            const age = Date.now() - result.timestamp;
                            if (age < 15 * 60 * 1000) { // 15 minutes
                                console.log('Using cached data from IndexedDB');
                                resolve(result.data);
                                return;
                            } else {
                                // Remove expired entry
                                console.log('Cache expired, removing from IndexedDB');
                                const deleteTransaction = dbCache.transaction(['cache'], 'readwrite');
                                deleteTransaction.objectStore('cache').delete(url);
                            }
                        }
                        resolve(null);
                    };
                });
            } catch (error) {
                console.warn('Failed to get cached data:', error);
                return null;
            }
        }

        async function setCachedData(url, data) {
            try {
                if (!dbCache) await initCache();

                const cacheEntry = {
                    url: url,
                    data: data,
                    timestamp: Date.now()
                };

                const transaction = dbCache.transaction(['cache'], 'readwrite');
                const store = transaction.objectStore('cache');
                const request = store.put(cacheEntry);

                return new Promise((resolve, reject) => {
                    request.onerror = () => {
                        console.warn('Failed to cache data in IndexedDB:', request.error);
                        resolve(); // Don't fail the whole operation
                    };
                    request.onsuccess = () => {
                        console.log('Cached data in IndexedDB for:', url, 'size:', data.length, 'chars');
                        resolve();
                    };
                });
            } catch (error) {
                console.warn('Cache storage failed:', error);
            }
        }

        // Clear expired cache entries
        async function clearExpiredCache() {
            try {
                if (!dbCache) await initCache();

                const transaction = dbCache.transaction(['cache'], 'readwrite');
                const store = transaction.objectStore('cache');
                const index = store.index('timestamp');
                const cutoff = Date.now() - (15 * 60 * 1000);

                const request = index.openCursor(IDBKeyRange.upperBound(cutoff));
                request.onsuccess = (event) => {
                    const cursor = event.target.result;
                    if (cursor) {
                        console.log('Removing expired cache entry:', cursor.value.url);
                        cursor.delete();
                        cursor.continue();
                    }
                };
            } catch (error) {
                console.warn('Failed to clear expired cache:', error);
            }
        }

        // Update data source info display
        function updateDataSourceInfo(source) {
            const info = document.getElementById('dataSourceInfo');
            if (source) {
                if (source.startsWith('http')) {
                    info.textContent = `Data source: ${source}`;
                } else {
                    info.textContent = `Data source: ${source}`;
                }
                info.style.color = '#28a745';
            } else {
                info.textContent = 'No data loaded';
                info.style.color = '#666';
            }
        }

        // Load JSONL from URL
        async function loadFromUrl(url) {

            // Check IndexedDB cache first
            const cachedData = await getCachedData(url);
            if (cachedData) {
                currentDataSource = url;
                currentDataUrl = url;
                currentDataLoaded = Date.now();
                updateDataSourceInfo('Dataset (cached)');
                await parseJSONL(cachedData);
                return;
            }

            isLoading = true;
            showProgress(true);

            try {
                const isGzipped = url.endsWith('.gz');

                const response = await fetch(url, {
                    mode: 'cors',
                    headers: {
                        'Accept': isGzipped ? 'application/gzip, */*' : 'application/json, text/plain, */*'
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                let text;
                if (isGzipped) {
                    // Download as binary and decompress with pako
                    console.log('Downloading compressed dataset...');
                    const compressed = await response.arrayBuffer();
                    console.log(`Downloaded ${(compressed.byteLength / 1024 / 1024).toFixed(2)}MB compressed`);

                    // Decompress using pako
                    const decompressed = pako.inflate(new Uint8Array(compressed), { to: 'string' });
                    console.log(`Decompressed to ${(decompressed.length / 1024 / 1024).toFixed(2)}MB`);
                    text = decompressed;
                } else {
                    text = await response.text();
                }

                // Cache the data in IndexedDB
                await setCachedData(url, text);

                currentDataSource = url;
                currentDataUrl = url;
                currentDataLoaded = Date.now();
                updateDataSourceInfo('Dataset loaded');

                await parseJSONL(text);
            } catch (error) {
                showError(`Failed to load from URL: ${error.message}`);
                console.error('URL load error:', error);
            } finally {
                isLoading = false;
                showProgress(false);
            }
        }

        // Save property ratings to localStorage with debounce
        function savePropertyRatings() {
            // Clear existing timeout
            if (saveRatingsTimeout) {
                clearTimeout(saveRatingsTimeout);
            }

            // Set new timeout to save after 1 second of inactivity
            saveRatingsTimeout = setTimeout(() => {
                const ratingsObj = Object.fromEntries(propertyRatings);
                localStorage.setItem('funda-property-ratings', JSON.stringify(ratingsObj));
                console.log('Saved property ratings to localStorage');
            }, 1000);
        }

        // Save current query to localStorage
        function saveCurrentQuery() {
            const query = document.getElementById('queryInput').value;
            localStorage.setItem('funda-current-query', query);
        }

        // Load saved query from localStorage
        function loadSavedQuery() {
            const savedQuery = localStorage.getItem('funda-current-query');
            if (savedQuery) {
                document.getElementById('queryInput').value = savedQuery;
                console.log('Restored saved query:', savedQuery);
                return savedQuery;
            }
            return null;
        }

        // Parse query box for quick filter values
        function parseQueryForQuickFilters(query) {
            const filters = {
                priceMin: '',
                priceMax: '',
                city: '',
                textSearch: ''
            };

            if (!query) return filters;

            // Parse both original and expanded query to catch all patterns
            const expandedQuery = expandVariables(query);
            const queriesToCheck = [query, expandedQuery];

            // Check both queries for patterns
            for (const checkQuery of queriesToCheck) {
                // Price patterns - handle various formats
                const priceMinMatch = checkQuery.match(/\$price\s*>=?\s*(\d+)/);
                const priceMaxMatch = checkQuery.match(/\$price\s*<=?\s*(\d+)/);
                const priceRangeMatch = checkQuery.match(/(\d+)\s*<=?\s*\$price\s*<=?\s*(\d+)/);

                if (priceRangeMatch && !filters.priceMin && !filters.priceMax) {
                    filters.priceMin = priceRangeMatch[1];
                    filters.priceMax = priceRangeMatch[2];
                } else {
                    if (priceMinMatch && !filters.priceMin) filters.priceMin = priceMinMatch[1];
                    if (priceMaxMatch && !filters.priceMax) filters.priceMax = priceMaxMatch[1];
                }

                // City pattern
                const cityMatch = checkQuery.match(/\$city\s*===?\s*["']([^"']+)["']/);
                if (cityMatch && !filters.city) filters.city = cityMatch[1];

                // Description search pattern
                const descMatch = checkQuery.match(/\$description\.toLowerCase\(\)\.includes\(["']([^"']+)["']\)/);
                if (descMatch && !filters.textSearch) filters.textSearch = descMatch[1];
            }

            return filters;
        }

        // Parse query box for sort syntax (+price, -price, +date, -date)
        function parseQueryForSort(query) {
            if (!query) return '';

            // Look for sort syntax: +price, -price, +date, -date
            const sortMatch = query.match(/([+-])(price|date)(?:\s|$)/);
            if (sortMatch) {
                const direction = sortMatch[1]; // + or -
                const field = sortMatch[2]; // price or date

                if (field === 'price') {
                    return direction === '+' ? 'price-asc' : 'price-desc';
                } else if (field === 'date') {
                    return direction === '+' ? 'date-asc' : 'date-desc';
                }
            }
            return '';
        }

        // Remove sort syntax from query string
        function removeSortFromQuery(query) {
            if (!query) return '';
            return query.replace(/([+-])(price|date)(?:\s|$)/g, '').trim().replace(/\s+/g, ' ');
        }

        // Sync quick filter inputs and sort dropdown with query box content
        function syncQuickFiltersWithQuery() {
            const query = document.getElementById('queryInput').value.trim();
            const parsed = parseQueryForQuickFilters(query);
            const sortValue = parseQueryForSort(query);

            // Update quick filter inputs without triggering events
            // Round price values to nearest 500 to match step constraints
            const priceMinValue = parsed.priceMin ? Math.round(Number(parsed.priceMin) / 500) * 500 : '';
            const priceMaxValue = parsed.priceMax ? Math.round(Number(parsed.priceMax) / 500) * 500 : '';

            document.getElementById('priceMin').value = priceMinValue;
            document.getElementById('priceMax').value = priceMaxValue;
            document.getElementById('cityFilter').value = parsed.city;
            document.getElementById('textSearch').value = parsed.textSearch;

            // Check if sort dropdown value has changed
            const sortSelect = document.getElementById('sortSelect');
            const currentSortValue = sortSelect.value;
            const sortChanged = currentSortValue !== sortValue;

            // Update sort dropdown
            sortSelect.value = sortValue;

            // If sort changed and we have results, re-execute query to apply new sorting
            if (sortChanged && currentResults && currentResults.length > 0) {
                console.log('Sort value changed from', currentSortValue, 'to', sortValue, '- re-executing query');
                executeQuery();
            }
        }

        // Build query from quick filter inputs and preserve manual parts
        function syncQueryWithQuickFilters() {
            const query = document.getElementById('queryInput').value.trim();

            // Remove existing quick filter parts and sort syntax from query
            let cleanQuery = removeSortFromQuery(query)
                .replace(/\$price\s*[<>=]+\s*\d+/g, '')
                .replace(/\d+\s*[<>=]+\s*\$price\s*[<>=]+\s*\d+/g, '')
                .replace(/\$city\s*===?\s*["'][^"']*["']/g, '')
                .replace(/\$description\.toLowerCase\(\)\.includes\(["'][^"']*["']\)/g, '')
                .replace(/&&\s*&&/g, '&&')
                .replace(/^\s*&&\s*|\s*&&\s*$/g, '')
                .trim();

            // Build new quick filter parts
            const conditions = [];
            const priceMin = document.getElementById('priceMin').value;
            const priceMax = document.getElementById('priceMax').value;
            const city = document.getElementById('cityFilter').value;
            const text = document.getElementById('textSearch').value;

            if (priceMin) conditions.push(`$price >= ${priceMin}`);
            if (priceMax) conditions.push(`$price <= ${priceMax}`);
            if (city) conditions.push(`$city === "${city}"`);
            if (text) conditions.push(`$description.toLowerCase().includes("${text.toLowerCase()}")`);

            // Get sort syntax from dropdown
            const sortValue = document.getElementById('sortSelect').value;
            let sortSyntax = '';
            if (sortValue) {
                if (sortValue === 'price-asc') sortSyntax = '+price';
                else if (sortValue === 'price-desc') sortSyntax = '-price';
                else if (sortValue === 'date-asc') sortSyntax = '+date';
                else if (sortValue === 'date-desc') sortSyntax = '-date';
            }

            // Combine cleaned query with new conditions and sort
            const allParts = [cleanQuery, ...conditions].filter(part => part);
            let newQuery = allParts.join(' && ');

            // Add sort syntax at the end if present
            if (sortSyntax) {
                newQuery = newQuery ? `${newQuery} ${sortSyntax}` : sortSyntax;
            }

            document.getElementById('queryInput').value = newQuery;
        }

        // Cycle through property rating states: 0 (neutral) -> 1 (saved) -> 2 (blacklisted) -> 0
        function cyclePropertyRating(propertyId) {
            propertyId = Number(propertyId);
            const currentRating = propertyRatings.get(propertyId) || 0;
            const nextRating = (currentRating + 1) % 3;

            if (nextRating === 0) {
                propertyRatings.delete(propertyId);
            } else {
                propertyRatings.set(propertyId, nextRating);
            }

            savePropertyRatings();
            // Update only this specific property card instead of re-rendering everything
            updatePropertyCard(propertyId);
        }

        // Get property rating (0=neutral, 1=saved, 2=blacklisted)
        function getPropertyRating(propertyId) {
            return propertyRatings.get(Number(propertyId)) || 0;
        }

        // Show bulk blacklist confirmation modal
        function showBulkBlacklistModal() {
            if (!currentResults || currentResults.length === 0) {
                showError('No search results to blacklist');
                return;
            }

            // Count how many properties would be affected (exclude already liked ones)
            const neutralProperties = currentResults.filter(property => {
                const propertyId = Number(property.Identifiers?.TinyId || 0);
                const rating = getPropertyRating(propertyId);
                return rating !== 1; // Not saved (neutral or already blacklisted)
            });

            document.getElementById('bulkCount').textContent = neutralProperties.length;
            document.getElementById('bulkBlacklistModal').classList.remove('hidden');
        }

        // Hide bulk blacklist modal
        function hideBulkBlacklistModal() {
            document.getElementById('bulkBlacklistModal').classList.add('hidden');
        }

        // Execute bulk blacklist
        function executeBulkBlacklist() {
            if (!currentResults || currentResults.length === 0) {
                hideBulkBlacklistModal();
                return;
            }

            let blacklistedCount = 0;
            currentResults.forEach(property => {
                const propertyId = Number(property.Identifiers?.TinyId || 0);
                const currentRating = getPropertyRating(propertyId);

                // Only blacklist if not already liked
                if (currentRating !== 1) {
                    propertyRatings.set(propertyId, 2); // Set to disliked
                    blacklistedCount++;
                }
            });

            savePropertyRatings();
            hideBulkBlacklistModal();

            // Refresh the display to show all the red cards
            refreshCurrentResults();

            console.log(`Bulk blacklisted ${blacklistedCount} properties`);
        }

        // ========================================
        // HOUSE ANALYSIS FUNCTIONS
        // ========================================

        // Show/hide analysis configuration modal
        function showAnalysisConfigModal() {
            document.getElementById('githubTokenInput').value = analysisConfig.github.token;
            document.getElementById('analysisConfigModal').classList.remove('hidden');
        }

        function hideAnalysisConfigModal() {
            document.getElementById('analysisConfigModal').classList.add('hidden');
        }

        function saveAnalysisConfig() {
            analysisConfig.github.token = document.getElementById('githubTokenInput').value;
            localStorage.setItem('github_token', analysisConfig.github.token);

            hideAnalysisConfigModal();
            showSuccess('Configuration saved successfully!');
        }

        // Trigger house analysis
        async function triggerAnalysis(houseId) {
            if (!analysisConfig.github.token) {
                showError('Please configure GitHub token first');
                showAnalysisConfigModal();
                return;
            }

            try {
                updateAnalysisBadge(houseId, 'pending');

                const response = await fetch(
                    `https://api.github.com/repos/${analysisConfig.github.owner}/${analysisConfig.github.repo}/actions/workflows/analyze_house.yml/dispatches`,
                    {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${analysisConfig.github.token}`,
                            'Content-Type': 'application/json',
                            'Accept': 'application/vnd.github+json'
                        },
                        body: JSON.stringify({
                            ref: 'main',
                            inputs: {
                                house_id: String(houseId),
                                rules_version: 'latest',
                                llm_provider: 'claude'
                            }
                        })
                    }
                );

                if (response.ok || response.status === 204) {
                    showSuccess(`Analysis started for house ${houseId}`);
                    analysisStatuses.set(houseId, {status: 'pending', updated_at: new Date().toISOString()});
                    startPolling(houseId);
                } else {
                    const error = await response.text();
                    throw new Error(`GitHub API error: ${response.status} ${error}`);
                }
            } catch (error) {
                console.error('Failed to trigger analysis:', error);
                showError('Failed to trigger analysis: ' + error.message);
                updateAnalysisBadge(houseId, 'error');
            }
        }

        // Get analysis status
        async function getAnalysisStatus(houseId) {
            // Always use GitHub for analysis status
            return await getAnalysisFromGitHub(houseId);
        }

        // Load scores index with ETAG support
        async function loadScoresIndex() {
            const now = Date.now();

            // Only fetch if cache is older than 60 seconds
            if (scoresCache.data && (now - scoresCache.lastFetch) < 60000) {
                return scoresCache.data;
            }

            try {
                const headers = {};
                if (scoresCache.etag) {
                    headers['If-None-Match'] = scoresCache.etag;
                }

                const response = await fetch(
                    `https://raw.githubusercontent.com/${analysisConfig.github.owner}/${analysisConfig.github.repo}/main/data/analysis_scores.json`,
                    { headers }
                );

                if (response.status === 304) {
                    // Not modified, use cache
                    scoresCache.lastFetch = now;
                    return scoresCache.data;
                }

                if (response.ok) {
                    const data = await response.json();
                    scoresCache.etag = response.headers.get('ETag');
                    scoresCache.data = data;
                    scoresCache.lastFetch = now;
                    console.log(`Loaded scores index: ${Object.keys(data.houses || {}).length} analyzed houses`);
                    return data;
                }
            } catch (error) {
                console.error('Failed to load scores index:', error.message);
            }

            return scoresCache.data || { houses: {} };
        }

        // Get analysis from GitHub repository
        async function getAnalysisFromGitHub(houseId) {
            try {
                // Load scores index
                const scoresData = await loadScoresIndex();

                if (scoresData.houses && scoresData.houses[houseId]) {
                    const houseScore = scoresData.houses[houseId];
                    return {
                        status: 'completed',
                        score: houseScore.score,
                        updated_at: houseScore.analyzed_at,
                        rules_version: houseScore.rules_version
                    };
                }

                return null;
            } catch (error) {
                console.error(`Failed to get analysis for ${houseId}:`, error.message);
                return null;
            }
        }

        // Get full analysis
        async function getFullAnalysis(houseId) {
            try {
                const latestResponse = await fetch(
                    `https://raw.githubusercontent.com/${analysisConfig.github.owner}/${analysisConfig.github.repo}/main/houses/${houseId}/latest_analysis.json`
                );

                if (!latestResponse.ok) return null;

                const latest = await latestResponse.json();
                const analysisFile = latest.analysis_file;

                const analysisResponse = await fetch(
                    `https://raw.githubusercontent.com/${analysisConfig.github.owner}/${analysisConfig.github.repo}/main/houses/${houseId}/${analysisFile}`
                );

                if (analysisResponse.ok) {
                    return await analysisResponse.json();
                }
            } catch (error) {
                console.error('Failed to get full analysis:', error);
            }

            return null;
        }

        // Show analysis modal
        async function showAnalysisDetails(houseId) {
            document.getElementById('analysisModal').classList.remove('hidden');
            document.getElementById('analysisContent').innerHTML = '<div class="text-center py-8"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div><p class="mt-2 text-gray-600">Loading analysis...</p></div>';

            const analysis = await getFullAnalysis(houseId);

            if (!analysis) {
                document.getElementById('analysisContent').innerHTML = '<div class="text-center py-8 text-red-600">Analysis not found. Please trigger an analysis first.</div>';
                return;
            }

            // Build report URLs
            const reportUrl = `https://raw.githubusercontent.com/${analysisConfig.github.owner}/${analysisConfig.github.repo}/main/houses/${houseId}/reports/latest.html`;
            const reportGitHubUrl = `https://github.com/${analysisConfig.github.owner}/${analysisConfig.github.repo}/blob/main/houses/${houseId}/reports/latest.html`;

            // Build red flags sections (for v2.0.0 BNB analysis)
            let redFlagsHtml = '';
            const financialCategory = analysis.category_scores?.financial;

            // Check if this is v2.0.0+ with red flag data
            if (analysis.category_scores) {
                const allRedFlags = [];
                Object.entries(analysis.category_scores).forEach(([key, cat]) => {
                    if (cat.red_flags && cat.red_flags.length > 0) {
                        allRedFlags.push(...cat.red_flags);
                    }
                });

                if (allRedFlags.length > 0) {
                    redFlagsHtml = `
                        <div class="mt-4 p-4 bg-red-50 rounded border border-red-200">
                            <h4 class="font-semibold text-red-900 mb-2">ðŸš¨ Red Flags Gedetecteerd</h4>
                            <ul class="list-disc list-inside space-y-1 text-sm text-red-700">
                                ${allRedFlags.map(f => `<li>${f}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
            }

            // Build financial breakdown (for v2.0.0 BNB analysis)
            let financialBreakdownHtml = '';
            if (financialCategory?.calculations) {
                const calc = financialCategory.calculations;
                financialBreakdownHtml = `
                    <div class="mt-4 p-4 bg-green-50 rounded border border-green-200">
                        <h4 class="font-semibold text-gray-900 mb-3">ðŸ’° FinanciÃ«le Berekening</h4>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            ${calc.purchase_price ? `
                                <div class="text-gray-600">Aankoopprijs:</div>
                                <div class="font-semibold text-right">â‚¬${calc.purchase_price.toLocaleString()}</div>
                            ` : ''}
                            ${calc.total_investment ? `
                                <div class="text-gray-600">Totale investering:</div>
                                <div class="font-semibold text-right">â‚¬${calc.total_investment.toLocaleString()}</div>
                            ` : ''}
                            ${calc.estimated_annual_revenue ? `
                                <div class="text-gray-600">Geschatte jaaromzet:</div>
                                <div class="font-semibold text-right text-green-700">â‚¬${calc.estimated_annual_revenue.toLocaleString()}</div>
                            ` : ''}
                            ${calc.estimated_annual_costs ? `
                                <div class="text-gray-600">Geschatte jaarkosten:</div>
                                <div class="font-semibold text-right text-red-700">â‚¬${calc.estimated_annual_costs.toLocaleString()}</div>
                            ` : ''}
                            ${calc.net_annual_income ? `
                                <div class="text-gray-600">Netto jaarinkomen:</div>
                                <div class="font-semibold text-right text-blue-700">â‚¬${calc.net_annual_income.toLocaleString()}</div>
                            ` : ''}
                            ${calc.cash_on_cash_return ? `
                                <div class="text-gray-600 font-bold">Cash-on-Cash Return:</div>
                                <div class="font-bold text-right text-lg ${calc.cash_on_cash_return >= 15 ? 'text-green-600' : calc.cash_on_cash_return >= 10 ? 'text-blue-600' : 'text-orange-600'}">${calc.cash_on_cash_return.toFixed(1)}%</div>
                            ` : ''}
                            ${calc.breakeven_years ? `
                                <div class="text-gray-600">Break-even periode:</div>
                                <div class="font-semibold text-right">${calc.breakeven_years.toFixed(1)} jaar</div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }

            // Build action plan (for v2.0.0 BNB analysis)
            let actionPlanHtml = '';
            if (analysis.action_plan && analysis.action_plan.length > 0) {
                actionPlanHtml = `
                    <div class="mt-4 p-4 bg-purple-50 rounded border border-purple-200">
                        <h4 class="font-semibold text-gray-900 mb-2">ðŸŽ¯ Actieplan</h4>
                        <ul class="list-decimal list-inside space-y-1 text-sm text-gray-700">
                            ${analysis.action_plan.map(a => `<li>${a}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }

            // Build scale-up potential (for v2.0.0 BNB analysis)
            let scaleUpHtml = '';
            if (analysis.scale_up_potential) {
                scaleUpHtml = `
                    <div class="mt-4 p-4 bg-indigo-50 rounded border border-indigo-200">
                        <h4 class="font-semibold text-gray-900 mb-2">ðŸ“ˆ Scale-up Potentieel</h4>
                        <p class="text-sm text-gray-700 leading-relaxed">${analysis.scale_up_potential}</p>
                    </div>
                `;
            }

            document.getElementById('analysisContent').innerHTML = `
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="text-4xl font-bold text-gray-900">${analysis.overall_score.toFixed(2)}/10</div>
                            <div class="text-sm text-gray-600 mt-1">Overall Score</div>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-semibold ${analysis.investment_recommendation.includes('KOPEN') ? 'text-green-600' : analysis.investment_recommendation.includes('AFWIJZEN') ? 'text-red-600' : 'text-yellow-600'}">
                                ${analysis.investment_recommendation.split('-')[0].trim()}
                            </div>
                            <div class="text-xs text-gray-500 mt-1">Version ${analysis.rules_version}</div>
                        </div>
                    </div>
                </div>

                ${redFlagsHtml}

                <div class="grid grid-cols-2 gap-3 mt-4">
                    ${Object.entries(analysis.category_scores).map(([key, cat]) => `
                        <div class="bg-gray-50 p-4 rounded border border-gray-200">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium text-gray-700">${cat.name || key}</span>
                                <span class="text-lg font-bold text-blue-600">${cat.score.toFixed(1)}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${(cat.score / 10 * 100).toFixed(0)}%"></div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                ${financialBreakdownHtml}

                <div class="mt-4">
                    <h4 class="font-semibold text-gray-900 mb-2">ðŸ’ª Sterke Punten</h4>
                    <ul class="list-disc list-inside space-y-1 text-sm text-gray-700">
                        ${analysis.top_strengths.map(s => `<li>${s}</li>`).join('')}
                    </ul>
                </div>

                <div class="mt-4">
                    <h4 class="font-semibold text-gray-900 mb-2">âš ï¸ Zorgen</h4>
                    <ul class="list-disc list-inside space-y-1 text-sm text-gray-700">
                        ${analysis.top_concerns.map(c => `<li>${c}</li>`).join('')}
                    </ul>
                </div>

                <div class="mt-4 p-4 bg-blue-50 rounded border border-blue-200">
                    <h4 class="font-semibold text-gray-900 mb-2">ðŸ“‹ Overall Assessment</h4>
                    <p class="text-sm text-gray-700 leading-relaxed">${analysis.overall_assessment}</p>
                </div>

                ${actionPlanHtml}
                ${scaleUpHtml}

                <div class="mt-4 flex gap-2 justify-end">
                    <a href="${reportGitHubUrl}" target="_blank" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                        ðŸ“„ View Full Report â†’
                    </a>
                </div>
            `;
        }

        function hideAnalysisModal() {
            document.getElementById('analysisModal').classList.add('hidden');
        }

        // Update analysis badge
        function updateAnalysisBadge(houseId, status, score = null) {
            const badge = document.querySelector(`[data-analysis-house="${houseId}"]`);
            if (!badge) return;

            const badges = {
                'not_analyzed': { text: 'ðŸ¤– Analyze', class: 'bg-gray-100 text-gray-700 hover:bg-gray-200' },
                'pending': { text: 'â³ Pending', class: 'bg-yellow-100 text-yellow-700' },
                'processing': { text: 'âš™ï¸ Processing', class: 'bg-blue-100 text-blue-700' },
                'completed': { text: `âœ… ${score ? score.toFixed(1) : '?'}/10`, class: 'bg-green-100 text-green-700 hover:bg-green-200 cursor-pointer' },
                'failed': { text: 'âŒ Failed', class: 'bg-red-100 text-red-700' },
                'error': { text: 'âŒ Error', class: 'bg-red-100 text-red-700' }
            };

            const badgeInfo = badges[status] || badges['not_analyzed'];
            badge.textContent = badgeInfo.text;
            badge.className = `px-2 py-1 rounded text-xs font-medium ${badgeInfo.class}`;

            if (status === 'completed') {
                badge.onclick = (e) => {
                    e.stopPropagation();
                    showAnalysisDetails(houseId);
                };
            } else if (status === 'not_analyzed') {
                badge.onclick = (e) => {
                    e.stopPropagation();
                    triggerAnalysis(houseId);
                };
            } else {
                badge.onclick = null;
            }

            analysisStatuses.set(houseId, { status, score, updated_at: new Date().toISOString() });
        }

        // Start polling for analysis status
        function startPolling(houseId) {
            if (analysisPolling.has(houseId)) return;

            const interval = setInterval(async () => {
                const status = await getAnalysisStatus(houseId);

                if (status?.status === 'completed') {
                    clearInterval(interval);
                    analysisPolling.delete(houseId);
                    updateAnalysisBadge(houseId, 'completed', status.score);
                } else if (status?.status === 'processing') {
                    updateAnalysisBadge(houseId, 'processing');
                } else if (status?.status === 'failed') {
                    clearInterval(interval);
                    analysisPolling.delete(houseId);
                    updateAnalysisBadge(houseId, 'failed');
                }
            }, 5000); // Poll every 5 seconds

            analysisPolling.set(houseId, interval);
        }

        // Check analysis status for all visible properties
        async function checkAnalysisStatuses(visibleProperties = []) {
            if (visibleProperties.length === 0) return;

            // Load scores index once for all properties
            const scoresData = await loadScoresIndex();

            if (!scoresData || !scoresData.houses) return;

            const visibleHouseIds = visibleProperties.map(p => p.Identifiers?.TinyId).filter(Boolean);

            for (const houseId of visibleHouseIds) {
                // Skip if already polling
                if (analysisPolling.has(houseId)) continue;

                // Check if analysis exists in index
                if (scoresData.houses[houseId]) {
                    const houseScore = scoresData.houses[houseId];
                    updateAnalysisBadge(houseId, 'completed', houseScore.score);
                }
            }
        }

        // ========================================
        // END HOUSE ANALYSIS FUNCTIONS
        // ========================================

        // Filter by province from map click
        function filterByProvince(provinceName) {
            console.log('Toggling province filter:', provinceName);

            const currentQuery = document.getElementById('queryInput').value.trim();
            const provinceFilter = `$province === "${provinceName}"`;
            console.log('Current query:', currentQuery);
            console.log('Province filter:', provinceFilter);

            // Check if this province is already selected
            const isCurrentlySelected = currentQuery.includes(provinceFilter);

            if (isCurrentlySelected) {
                // Remove province filter
                console.log('Removing province filter for:', provinceName);

                // Clear province highlights
                document.querySelectorAll('.province-area').forEach(area => {
                    area.classList.remove('active');
                });

                // Remove province filter from query while preserving other filters
                let newQuery = currentQuery.replace(provinceFilter, '').trim();

                // Clean up any leftover && operators
                newQuery = newQuery.replace(/^\s*&&\s*/, '').replace(/\s*&&\s*$/, '').replace(/\s*&&\s*&&\s*/g, ' && ').trim();

                document.getElementById('queryInput').value = newQuery;
            } else {
                // Add province filter
                console.log('Adding province filter for:', provinceName);

                // Clear other province highlights and highlight clicked province
                document.querySelectorAll('.province-area').forEach(area => {
                    area.classList.remove('active');
                });
                document.querySelector(`[data-province="${provinceName}"]`).classList.add('active');

                // Remove any existing province filters and add the new one
                let newQuery = currentQuery.replace(/\$province\s*===\s*["'][^"']*["']/g, '').trim();

                // Clean up any leftover && operators
                newQuery = newQuery.replace(/^\s*&&\s*/, '').replace(/\s*&&\s*$/, '').replace(/\s*&&\s*&&\s*/g, ' && ').trim();

                // Add new province filter
                if (newQuery) {
                    newQuery = `${provinceFilter} && ${newQuery}`;
                } else {
                    newQuery = provinceFilter;
                }

                document.getElementById('queryInput').value = newQuery;
            }

            console.log('New query:', document.getElementById('queryInput').value);
            executeQuery();
        }

        // Update province highlighting based on current query
        function updateProvinceHighlighting() {
            // Clear all province highlights first
            document.querySelectorAll('.province-area').forEach(area => {
                area.classList.remove('active');
            });

            const query = document.getElementById('queryInput').value;
            console.log('Checking query for province highlighting:', query);

            // Check for province filters in the query (supports === and .includes())
            let provinceMatch = query.match(/\$province\s*===\s*["']([^"']+)["']/);
            if (!provinceMatch) {
                provinceMatch = query.match(/\$province\.includes\s*\(\s*["']([^"']+)["']\s*\)/);
            }

            if (provinceMatch) {
                const provinceName = provinceMatch[1];
                console.log('Found province in query:', provinceName);

                // Find and highlight the matching province
                const provinceElement = document.querySelector(`[data-province="${provinceName}"]`);
                if (provinceElement) {
                    provinceElement.classList.add('active');
                    console.log('Highlighted province:', provinceName);
                } else {
                    console.log('Province element not found for:', provinceName);
                }
            }
        }

        // Update a single property card without re-rendering everything
        function updatePropertyCard(propertyId) {
            const rating = getPropertyRating(propertyId);
            const cardClass = rating === 1 ? 'saved' : (rating === 2 ? 'blacklisted' : '');

            // Find the property card element
            const propertyCard = document.querySelector(`[onclick*="showPropertyDetails('${propertyId}')"]`);
            if (propertyCard) {
                // Update card class - preserve existing classes and only update state class
                propertyCard.classList.remove('saved', 'blacklisted');
                if (cardClass) {
                    propertyCard.classList.add(cardClass);
                }

                // Update rating button
                const ratingBtn = propertyCard.querySelector('.rating-btn');
                if (ratingBtn) {
                    ratingBtn.className = `rating-btn ${rating === 0 ? 'neutral' : (rating === 1 ? 'saved' : 'blacklisted')}`;
                    ratingBtn.innerHTML = rating === 0 ? 'â—‹' : (rating === 1 ? 'âœ“' : 'âœ•');
                    ratingBtn.title = rating === 0 ? 'Click to save' : (rating === 1 ? 'Saved - click to blacklist' : 'Blacklisted - click to neutral');
                }
            }
        }

        // Refresh current results display (fallback for full refresh)
        function refreshCurrentResults() {
            if (currentResults.length > 0) {
                displayResults(currentResults, document.getElementById('queryTime').textContent.replace('ms', ''));
            }
        }

        // Filter definitions for toggle buttons
        const FILTER_DEFINITIONS = {
            'under200k': { name: 'Under â‚¬200k', query: '$price < 200000' },
            'priceOnRequest': { name: 'Price on request', query: '$priceText.includes("op aanvraag") || $priceText.includes("Op aanvraag")' },
            'size80': { name: 'Size > 80mÂ²', query: '$livingArea > 80' },
            'pastDay': { name: 'Past day', query: '$daysAgo <= 1' },
            'pastWeek': { name: 'Past week', query: '$daysAgo <= 7' },
            'past2Months': { name: 'Past 2 months', query: '$daysAgo <= 60' },
            'energyABC': { name: 'Energy A-C', query: '$energyLabel.match(/[ABC]/)' },
            'price200to400': { name: 'â‚¬200k-400k', query: '$price >= 200000 && $price <= 400000' },
            'bedrooms3plus': { name: '3+ bedrooms', query: '$bedrooms >= 3' },
            'largePlot': { name: 'Large plot', query: '$plotArea > 500' },
            'liked': { name: 'Liked only', query: 'getPropertyRating($id) === 1' },
            'disliked': { name: 'Blacklisted only', query: 'getPropertyRating($id) === 2' },
            'hideDisliked': { name: 'Hide blacklisted', query: 'getPropertyRating($id) !== 2' },
            'rated': { name: 'Rated only', query: 'getPropertyRating($id) !== 0' }
        };

        // Variable expansion function
        function expandVariables(queryString) {
            if (!queryString) return queryString;

            // Performance: Use pre-compiled schema functions when available
            if (Object.keys(compiledSchemaFunctions).length > 0) {
                let expanded = queryString;

                for (const variable of Object.keys(compiledSchemaFunctions)) {
                    const regex = new RegExp('\\' + variable + '\\b', 'g');
                    // Use the pre-compiled schema mapping expression
                    const mapping = SCHEMA_MAPPINGS[currentSchema] || SCHEMA_MAPPINGS['funda'];
                    expanded = expanded.replace(regex, mapping[variable]);
                }

                return expanded;
            } else {
                // Fallback to original method
                const mapping = SCHEMA_MAPPINGS[currentSchema] || SCHEMA_MAPPINGS['funda'];
                let expanded = queryString;

                for (const [variable, path] of Object.entries(mapping)) {
                    const regex = new RegExp('\\' + variable + '\\b', 'g');
                    expanded = expanded.replace(regex, path);
                }

                return expanded;
            }
        }

        // Show available variables
        function showAvailableVariables() {
            const mapping = SCHEMA_MAPPINGS[currentSchema] || SCHEMA_MAPPINGS['funda'];
            const variables = Object.keys(mapping);
            
            document.getElementById('variableInfo').style.display = 'block';
            document.getElementById('variableList').innerHTML = variables.map(v => `<code>${v}</code>`).join(', ');
            
            console.log('Available variables (no null checks needed):');
            console.log('$price (number) - Property price');
            console.log('$livingArea (number) - Living area in mÂ²');
            console.log('$plotArea (number) - Plot area in mÂ²');
            console.log('$bedrooms (number) - Number of bedrooms');
            console.log('$daysAgo (number) - Days since last modified');
            console.log('$energyLabel (string) - Energy label');
            console.log('$city (string) - City name');
            console.log('$description (string) - Property description');
            console.log('$id (number) - Property ID');
            console.log('getPropertyRating($id) - Returns 0 (neutral), 1 (saved), 2 (blacklisted)');
            console.log('Example: $price < 200000 && $livingArea > 80 && getPropertyRating($id) === 1');
        }

        function updateCacheInfo() {
            const cacheInfoEl = document.getElementById('cacheInfo');

            if (!properties || properties.length === 0) {
                cacheInfoEl.textContent = '-';
                return;
            }

            // Find newest listing date
            let newestDate = null;
            properties.forEach(prop => {
                const lastmod = prop.sitemapData?.lastmod;
                if (lastmod) {
                    const date = new Date(lastmod);
                    if (!newestDate || date > newestDate) {
                        newestDate = date;
                    }
                }
            });

            // Format cache info
            let cacheText = '';
            if (currentDataLoaded) {
                const loadTime = new Date(currentDataLoaded);
                const hoursAgo = Math.floor((Date.now() - currentDataLoaded) / (1000 * 60 * 60));
                if (hoursAgo < 1) {
                    cacheText = 'Just loaded';
                } else if (hoursAgo < 24) {
                    cacheText = `${hoursAgo}h ago`;
                } else {
                    const daysAgo = Math.floor(hoursAgo / 24);
                    cacheText = `${daysAgo}d ago`;
                }
            }

            if (newestDate) {
                const newestDaysAgo = Math.floor((Date.now() - newestDate.getTime()) / (1000 * 60 * 60 * 24));
                if (newestDaysAgo === 0) {
                    cacheText += ', newest: today';
                } else {
                    cacheText += `, newest: ${newestDaysAgo}d ago`;
                }
            }

            cacheInfoEl.textContent = cacheText || '-';
            cacheInfoEl.title = `Data loaded: ${currentDataLoaded ? new Date(currentDataLoaded).toLocaleString() : 'Unknown'}\nNewest listing: ${newestDate ? newestDate.toLocaleString() : 'Unknown'}`;
        }

        // Toggle filter functionality
        function toggleFilter(filterId) {
            const button = document.querySelector(`[data-filter="${filterId}"]`);
            
            if (activeFilters.has(filterId)) {
                activeFilters.delete(filterId);
                button.classList.remove('active');
            } else {
                activeFilters.add(filterId);
                button.classList.add('active');
            }
            
            buildAndExecuteQuery();
        }

        // Update filter button highlights and sync activeFilters with query box
        function updateFilterHighlights() {
            const currentQuery = document.getElementById('queryInput').value.trim();

            // Reset all highlights and clear activeFilters
            document.querySelectorAll('[data-filter]').forEach(btn => {
                btn.classList.remove('active');
            });
            activeFilters.clear();

            // Parse query and identify which filters are active
            if (currentQuery) {
                Object.entries(FILTER_DEFINITIONS).forEach(([filterId, definition]) => {
                    if (currentQuery.includes(definition.query)) {
                        activeFilters.add(filterId);
                        const button = document.querySelector(`[data-filter="${filterId}"]`);
                        if (button) {
                            button.classList.add('active');
                        }
                    }
                });
            }

            // Update current query display
            if (currentQuery) {
                const displayParts = [];

                // Add predefined filter names
                if (activeFilters.size > 0) {
                    const filterNames = Array.from(activeFilters).map(filterId =>
                        FILTER_DEFINITIONS[filterId].name
                    );
                    displayParts.push(...filterNames);
                }

                // Check for manual parts not covered by predefined filters
                let remainingQuery = currentQuery;
                Object.entries(FILTER_DEFINITIONS).forEach(([filterId, definition]) => {
                    if (activeFilters.has(filterId)) {
                        // Remove this predefined filter from the remaining query
                        remainingQuery = remainingQuery.replace(new RegExp(definition.query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), '').trim();
                    }
                });

                // Clean up remaining query (remove extra && operators)
                remainingQuery = remainingQuery.replace(/^\s*&&\s*/, '').replace(/\s*&&\s*$/, '').replace(/\s*&&\s*&&\s*/g, ' && ').trim();

                // Process remaining manual filters to make them more user-friendly
                if (remainingQuery) {
                    // Split by && to handle individual filter parts
                    const manualParts = remainingQuery.split('&&').map(part => part.trim()).filter(part => part);

                    manualParts.forEach(part => {
                        // Convert province filters to user-friendly format
                        const provinceMatch = part.match(/\$province\s*===\s*["']([^"']+)["']/);
                        if (provinceMatch) {
                            displayParts.push(`Province is ${provinceMatch[1]}`);
                        }
                        // Convert price filters to user-friendly format
                        else if (part.match(/\$price\s*>=?\s*\d+/)) {
                            const priceMatch = part.match(/\$price\s*>=?\s*(\d+)/);
                            if (priceMatch) {
                                const price = Number(priceMatch[1]);
                                displayParts.push(`Price â‰¥ â‚¬${price.toLocaleString()}`);
                            }
                        }
                        else if (part.match(/\$price\s*<=?\s*\d+/)) {
                            const priceMatch = part.match(/\$price\s*<=?\s*(\d+)/);
                            if (priceMatch) {
                                const price = Number(priceMatch[1]);
                                displayParts.push(`Price â‰¤ â‚¬${price.toLocaleString()}`);
                            }
                        }
                        // Convert city filters to user-friendly format
                        else if (part.match(/\$city\s*===?\s*["'][^"']+["']/)) {
                            const cityMatch = part.match(/\$city\s*===?\s*["']([^"']+)["']/);
                            if (cityMatch) {
                                displayParts.push(`City is ${cityMatch[1]}`);
                            }
                        }
                        // Convert description searches to user-friendly format
                        else if (part.match(/\$description\.toLowerCase\(\)\.includes\(["'][^"']*["']\)/)) {
                            const descMatch = part.match(/\$description\.toLowerCase\(\)\.includes\(["']([^"']*)["']\)/);
                            if (descMatch) {
                                displayParts.push(`Description contains "${descMatch[1]}"`);
                            }
                        }
                        else if (part) {
                            // Keep other manual filters as-is
                            displayParts.push(part);
                        }
                    });
                }

                if (displayParts.length > 0) {
                    document.getElementById('currentQueryText').textContent = displayParts.join(' + ');
                    document.getElementById('currentQuery').style.display = 'block';
                } else {
                    document.getElementById('currentQuery').style.display = 'none';
                }
            } else {
                document.getElementById('currentQuery').style.display = 'none';
            }
        }

        // Build query from active filters
        function buildAndExecuteQuery() {
            if (activeFilters.size === 0) {
                document.getElementById('queryInput').value = '';
                document.getElementById('currentQuery').style.display = 'none';
            } else {
                const filterQueries = Array.from(activeFilters).map(filterId =>
                    FILTER_DEFINITIONS[filterId].query
                );
                const combinedQuery = filterQueries.join(' && ');

                document.getElementById('queryInput').value = combinedQuery;

                const filterNames = Array.from(activeFilters).map(filterId =>
                    FILTER_DEFINITIONS[filterId].name
                );
                document.getElementById('currentQueryText').textContent = filterNames.join(' + ');
                document.getElementById('currentQuery').style.display = 'block';
            }

            updateFilterHighlights();
            executeQuery();
        }

        // Clear all filters
        function clearAllFilters() {
            activeFilters.clear();
            document.querySelectorAll('[data-filter].active').forEach(btn =>
                btn.classList.remove('active')
            );
            buildAndExecuteQuery();
        }

        function getPropertyImageUrl(property) {
            const mediaBaseUrl = property.Media?.Photos?.MediaBaseUrl;
            const firstPhotoId = property.Media?.Photos?.Items?.[0]?.Id;
            
            if (mediaBaseUrl && firstPhotoId) {
                return mediaBaseUrl.replace('{id}', firstPhotoId);
            }
            return null;
        }


        async function parseJSONL(text) {
            properties = [];

            try {
                // Try parsing as JSON array first (Apify dataset format)
                updateStats('Parsing JSON array...');
                const parsed = JSON.parse(text);

                if (Array.isArray(parsed)) {
                    // It's a JSON array - process in batches for UI responsiveness
                    const batchSize = 100;
                    for (let i = 0; i < parsed.length; i += batchSize) {
                        const batch = parsed.slice(i, i + batchSize);
                        properties.push(...batch);

                        const progress = 50 + (i / parsed.length) * 50;
                        updateProgress(progress);
                        updateStats(`Parsing... ${properties.length}/${parsed.length} properties`);

                        if (i % (batchSize * 10) === 0) {
                            await new Promise(resolve => setTimeout(resolve, 1));
                        }
                    }
                } else {
                    // Single object
                    properties.push(parsed);
                }
            } catch (e) {
                // Fall back to JSONL format (newline-delimited)
                const lines = text.split('\n').filter(line => line.trim());

                const batchSize = 50;
                let processed = 0;

                for (let i = 0; i < lines.length; i += batchSize) {
                    const batch = lines.slice(i, i + batchSize);

                    for (const line of batch) {
                        try {
                            const property = JSON.parse(line);
                            properties.push(property);
                            processed++;
                        } catch (e) {
                            console.warn('Failed to parse line:', line.substring(0, 100));
                        }
                    }

                    const progress = 50 + (processed / lines.length) * 50;
                    updateProgress(progress);
                    updateStats(`Parsing... ${processed}/${lines.length} properties`);

                    if (i % (batchSize * 10) === 0) {
                        await new Promise(resolve => setTimeout(resolve, 1));
                    }
                }
            }
            
            showAvailableVariables();

            // Performance optimizations: Build indexes and compile schema functions
            compileSchemaFunctions();
            buildPropertyIndexes();
            populateCityDropdown();
            updateCacheInfo();

            // Re-apply any active filters, otherwise show all properties
            if (activeFilters.size > 0) {
                buildAndExecuteQuery();
            } else {
                // Show all properties by default, but filter out "Prijs op Aanvraag"
                const filteredProperties = properties.filter(item => {
                    const priceText = (item.Price?.SellingPrice || "").toString().toLowerCase();
                    return !priceText.includes("op aanvraag");
                });
                currentResults = filteredProperties;
                displayResults(filteredProperties, '0.00');
            }
        }

        function executeQuery() {
            if (isLoading) return;
            if (properties.length === 0) {
                showError('Please load a JSONL file first');
                return;
            }

            // Update province highlighting based on current query
            updateProvinceHighlighting();

            // Save current query to localStorage
            saveCurrentQuery();

            const originalQuery = document.getElementById('queryInput').value.trim();

            // Extract sort syntax from query and remove it for filtering
            const sortValue = parseQueryForSort(originalQuery);
            const filterQuery = removeSortFromQuery(originalQuery);

            const startTime = performance.now();
            
            try {
                let results;
                
                if (!filterQuery) {
                    // Default behavior: filter out "Prijs op Aanvraag" properties
                    results = properties.filter(item => {
                        const priceText = (item.Price?.SellingPrice || "").toString().toLowerCase();
                        return !priceText.includes("op aanvraag");
                    });
                } else {
                    const expandedQuery = expandVariables(filterQuery);
                    console.log('Original query:', originalQuery);
                    console.log('Filter query:', filterQuery);
                    console.log('Expanded query:', expandedQuery);

                    // Performance: Check for simple province filter to use index
                    const simpleProvinceMatch = filterQuery.match(/^\$province\s*===\s*["']([^"']+)["']$/);
                    if (simpleProvinceMatch) {
                        const provinceName = simpleProvinceMatch[1];
                        const provinceIndexes = propertyIndexes.province.get(provinceName) || [];
                        console.log(`Using province index for "${provinceName}": ${provinceIndexes.length} properties`);
                        results = provinceIndexes.map(index => properties[index]);
                    } else {
                        // Fallback to general filtering with pre-compiled functions
                        const filterFn = new Function('item', `
                            try {
                                return ${expandedQuery};
                            } catch (e) {
                                console.error('Filter evaluation error:', e.message);
                                return false;
                            }
                        `);

                        results = properties.filter(filterFn);
                    }
                }
                
                const endTime = performance.now();
                const queryTime = (endTime - startTime).toFixed(2);
                console.log(`Query executed in ${queryTime}ms, found ${results.length} results`);

                // Apply sorting if sort syntax is present
                if (sortValue) {
                    const sortStart = performance.now();
                    console.log('Applying sort:', sortValue);

                    switch (sortValue) {
                        case 'price-asc':
                            results.sort((a, b) => {
                                const priceA = a.Price?.NumericSellingPrice || 0;
                                const priceB = b.Price?.NumericSellingPrice || 0;
                                return priceA - priceB;
                            });
                            break;

                        case 'price-desc':
                            results.sort((a, b) => {
                                const priceA = a.Price?.NumericSellingPrice || 0;
                                const priceB = b.Price?.NumericSellingPrice || 0;
                                return priceB - priceA;
                            });
                            break;

                        case 'date-asc':
                            results.sort((a, b) => {
                                const dateA = new Date(a.sitemapData?.lastmod || 0);
                                const dateB = new Date(b.sitemapData?.lastmod || 0);
                                return dateA - dateB;
                            });
                            break;

                        case 'date-desc':
                            results.sort((a, b) => {
                                const dateA = new Date(a.sitemapData?.lastmod || 0);
                                const dateB = new Date(b.sitemapData?.lastmod || 0);
                                return dateB - dateA;
                            });
                            break;
                    }

                    const sortEnd = performance.now();
                    const sortTime = (sortEnd - sortStart).toFixed(2);
                    console.log(`Sorting applied in ${sortTime}ms`);

                    // Update query time to include sort time
                    const totalTime = (sortEnd - startTime).toFixed(2);
                    displayResults(results, `${totalTime}ms (${queryTime}ms filter + ${sortTime}ms sort)`);
                } else {
                    displayResults(results, queryTime);
                }

                // Store current results for other functions
                currentResults = results;
                updateFilterHighlights();
                // updateStats moved to results header
                
            } catch (error) {
                showError('Filter Error: ' + error.message);
                console.error('Filter error:', error);
            }
        }

        function applyQuickFilters() {
            // With bidirectional sync, the query box is already up-to-date
            // Just execute the current query
            executeQuery();
        }

        function displayResults(results, queryTime) {
            const renderStart = performance.now();

            const container = document.getElementById('resultsList');
            const countEl = document.getElementById('resultsCount');
            const timeEl = document.getElementById('queryTime');

            countEl.textContent = `${results.length} results`;
            timeEl.textContent = `${queryTime}ms`;
            
            if (results.length === 0) {
                container.innerHTML = '<div class="loading">No properties match your filter</div>';
                return;
            }
            
            const displayLimit = 100; // Reduced from 250 for better performance
            const displayResults = results.slice(0, displayLimit);

            // Performance: Pre-generate HTML array instead of template literals
            const htmlParts = [];

            for (const property of displayResults) {
                const propertyId = Number(property.Identifiers?.TinyId || 0);
                const address = property.AddressDetails?.Title || 'Unknown Address';
                const city = property.AddressDetails?.City || '';
                const province = property.AddressDetails?.Province || '';
                const price = property.Price?.SellingPrice || 'Price not available';
                const numericPrice = property.Price?.NumericSellingPrice;
                const livingArea = property.FastView?.LivingArea || 'Unknown';
                const plotArea = property.FastView?.PlotArea || 'Unknown';
                const bedrooms = property.FastView?.NumberOfBedrooms || 'Unknown';
                const energyLabel = property.FastView?.EnergyLabel || 'Unknown';
                const description = property.ListingDescription?.Description || '';
                const shortDescription = description.length > 200 ? description.substring(0, 200) + '...' : description;

                const rating = getPropertyRating(propertyId);
                const cardClass = rating === 1 ? 'saved' : (rating === 2 ? 'blacklisted' : '');
                
                const lastMod = property.sitemapData?.lastmod;
                const lastModFormatted = lastMod ? new Date(lastMod).toLocaleDateString('en-GB', { 
                    day: '2-digit', month: 'short', year: 'numeric' 
                }) : 'Unknown';
                
                const imageUrl = getPropertyImageUrl(property);
                const imageHtml = imageUrl
                    ? `<img src="${imageUrl}" alt="${address}" class="w-20 h-16 sm:w-32 sm:h-24 rounded-md object-cover flex-shrink-0 bg-gray-100" onerror="this.style.display='none'">`
                    : `<div class="w-20 h-16 sm:w-32 sm:h-24 rounded-md bg-gray-100 flex items-center justify-center text-gray-400 text-xs flex-shrink-0">No Image</div>`;

                // Performance: Build HTML string efficiently
                const ratingIcon = rating === 0 ? 'â—‹' : (rating === 1 ? 'âœ“' : 'âœ•');
                const ratingClass = rating === 0 ? 'neutral' : (rating === 1 ? 'saved' : 'blacklisted');
                const ratingTitle = rating === 0 ? 'Click to save' : (rating === 1 ? 'Saved - click to blacklist' : 'Blacklisted - click to neutral');
                const priceDisplay = price;

                htmlParts.push(
                    '<div class="p-3 sm:p-4 md:p-5 border-b border-gray-200 border-l-4 border-l-gray-200 cursor-pointer flex items-start gap-2 sm:gap-3 md:gap-4 hover:bg-gray-50 ', cardClass, '" onclick="showPropertyDetails(\'', propertyId, '\')">',
                    imageHtml,
                    '<div class="flex-1 min-w-0">',
                    '<div class="text-base sm:text-lg font-semibold text-gray-800 mb-1 sm:mb-2 truncate">', address, '</div>',
                    '<div class="grid grid-cols-1 sm:grid-cols-2 gap-1 sm:gap-2 md:gap-2.5 mb-1 sm:mb-2 md:mb-2.5">',
                    '<div class="text-xs sm:text-sm text-gray-600"><strong class="text-gray-800">Price:</strong> ', priceDisplay, '</div>',
                    '<div class="text-xs sm:text-sm text-gray-600"><strong class="text-gray-800">City:</strong> ', city, '</div>',
                    '<div class="text-xs sm:text-sm text-gray-600"><strong class="text-gray-800">Province:</strong> ', province, '</div>',
                    '<div class="text-xs sm:text-sm text-gray-600"><strong class="text-gray-800">Added:</strong> ', lastModFormatted, '</div>',
                    '<div class="text-xs sm:text-sm text-gray-600"><strong class="text-gray-800">Living:</strong> ', livingArea, '</div>',
                    '<div class="text-xs sm:text-sm text-gray-600"><strong class="text-gray-800">Plot:</strong> ', plotArea, '</div>',
                    '<div class="text-xs sm:text-sm text-gray-600"><strong class="text-gray-800">Bedrooms:</strong> ', bedrooms, '</div>',
                    '<div class="text-xs sm:text-sm text-gray-600"><strong class="text-gray-800">Energy:</strong> ', energyLabel, '</div>',
                    '</div>',
                    shortDescription ? '<div class="text-xs sm:text-sm text-gray-700 leading-relaxed mt-1 sm:mt-2 hidden sm:block">' + shortDescription + '</div>' : '',
                    '</div>',
                    '<div class="flex flex-col gap-1.5 sm:gap-2 items-center justify-start pt-0 sm:pt-2.5 flex-shrink-0" style="min-width: 60px; sm:min-width: 90px;">',
                    '<button class="rating-btn ', ratingClass, '" onclick="event.stopPropagation(); cyclePropertyRating(', propertyId, ')" title="', ratingTitle, '">',
                    ratingIcon,
                    '</button>',
                    '<span class="px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 cursor-pointer" data-analysis-house="', propertyId, '" onclick="event.stopPropagation(); triggerAnalysis(', propertyId, ')">',
                    'ðŸ¤– Analyze',
                    '</span>',
                    '</div>',
                    '</div>'
                );
            }

            container.innerHTML = htmlParts.join('');

            if (results.length > displayLimit) {
                container.innerHTML += `
                    <div style="padding: 20px; text-align: center; color: #666; background: #f8f9fa;">
                        Showing first ${displayLimit} of ${results.length} results. Refine your filter to see more specific results.
                    </div>
                `;
            }

            const renderEnd = performance.now();
            const renderTime = (renderEnd - renderStart).toFixed(2);
            console.log(`UI rendered ${displayResults.length} cards in ${renderTime}ms (total: ${results.length} results)`);

            // Check analysis statuses for visible properties only
            checkAnalysisStatuses(displayResults);
        }

        function showPropertyDetails(propertyId) {
            const property = properties.find(p => p.Identifiers?.TinyId === propertyId);
            if (property && property.sitemapData?.originalUrl) {
                window.open(property.sitemapData.originalUrl, '_blank');
            }
        }

        function applySorting() {
            if (currentResults.length === 0) return;
            
            const sortValue = document.getElementById('sortSelect').value;
            if (!sortValue) {
                // Reset to original order (no sorting)
                displayResults(currentResults, document.getElementById('queryTime').textContent.replace('ms', ''));
                return;
            }
            
            const startTime = performance.now();
            let sortedResults = [...currentResults];
            
            switch (sortValue) {
                case 'price-asc':
                    sortedResults.sort((a, b) => {
                        const priceA = a.Price?.NumericSellingPrice || 0;
                        const priceB = b.Price?.NumericSellingPrice || 0;
                        return priceA - priceB;
                    });
                    break;
                    
                case 'price-desc':
                    sortedResults.sort((a, b) => {
                        const priceA = a.Price?.NumericSellingPrice || 0;
                        const priceB = b.Price?.NumericSellingPrice || 0;
                        return priceB - priceA;
                    });
                    break;
                    
                case 'date-asc':
                    sortedResults.sort((a, b) => {
                        const dateA = new Date(a.sitemapData?.lastmod || 0);
                        const dateB = new Date(b.sitemapData?.lastmod || 0);
                        return dateA - dateB;
                    });
                    break;
                    
                case 'date-desc':
                    sortedResults.sort((a, b) => {
                        const dateA = new Date(a.sitemapData?.lastmod || 0);
                        const dateB = new Date(b.sitemapData?.lastmod || 0);
                        return dateB - dateA;
                    });
                    break;
            }
            
            const endTime = performance.now();
            const sortTime = (endTime - startTime).toFixed(2);
            
            displayResults(sortedResults, `${document.getElementById('queryTime').textContent.replace('ms', '')} + ${sortTime}ms sort`);
        }

        function setQuery(query) {
            clearAllFilters();
            document.getElementById('queryInput').value = query;
            document.getElementById('currentQuery').style.display = 'none';
            updateFilterHighlights();
            executeQuery();
        }

        function clearResults() {
            document.getElementById('resultsList').innerHTML = '<div class="loading">Enter a filter to search</div>';
            document.getElementById('resultsCount').textContent = '0 results';
            document.getElementById('queryTime').textContent = '';
            document.getElementById('queryInput').value = '';
            document.getElementById('priceMin').value = '';
            document.getElementById('priceMax').value = '';
            document.getElementById('cityFilter').value = '';
            document.getElementById('textSearch').value = '';
            document.getElementById('sortSelect').value = '';
            currentResults = [];
            clearAllFilters();
        }

        function showError(message) {
            showToast(message, 'error');
        }

        function showSuccess(message) {
            showToast(message, 'success');
        }

        function showToast(message, type = 'info') {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = `fixed top-5 right-5 px-5 py-3 rounded-lg shadow-lg z-50 text-white transition-all duration-300 transform translate-x-0`;

            if (type === 'success') {
                toast.className += ' bg-green-600';
            } else if (type === 'error') {
                toast.className += ' bg-red-600';
            } else {
                toast.className += ' bg-blue-600';
            }

            toast.textContent = message;
            document.body.appendChild(toast);

            // Fade out and remove after 3 seconds
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(400px)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function updateStats(message) {
            // Stats display is now handled in the results header
            console.log('Stats:', message);
        }

        function showProgress(show) {
            document.getElementById('progressContainer').style.display = show ? 'block' : 'none';
            if (!show) updateProgress(0);
        }

        function updateProgress(percent) {
            document.getElementById('progressBar').style.width = percent + '%';
        }

        document.getElementById('queryInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                executeQuery();
            }
        });

        // Debounced province highlighting update
        let provinceHighlightTimeout = null;
        function debouncedProvinceHighlighting() {
            if (provinceHighlightTimeout) {
                clearTimeout(provinceHighlightTimeout);
            }
            provinceHighlightTimeout = setTimeout(updateProvinceHighlighting, 150);
        }

        // Update filter highlights when query input changes
        document.getElementById('queryInput').addEventListener('input', function(e) {
            syncQuickFiltersWithQuery(); // Sync quick filters with query
            updateFilterHighlights();
            debouncedProvinceHighlighting(); // Debounced for better performance
            saveCurrentQuery(); // Save query on every change
        });

        ['priceMin', 'priceMax', 'cityFilter', 'textSearch'].forEach(id => {
            const element = document.getElementById(id);

            // Sync query when input changes
            element.addEventListener('input', function(e) {
                syncQueryWithQuickFilters();
            });

            // Apply filters on Enter key
            element.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    applyQuickFilters();
                }
            });
        });

        // Add event listener for sort dropdown to sync with query box and apply sorting
        document.getElementById('sortSelect').addEventListener('change', function(e) {
            syncQueryWithQuickFilters();
            applySorting();
        });

        document.addEventListener('DOMContentLoaded', async function() {
            loadPropertyRatings();
            loadSavedQuery(); // Restore saved query on page load

            // Auto-load dataset
            await loadFromUrl(DATASET_URL);

            // After data loads, apply saved query if it exists and data is available
            const savedQuery = localStorage.getItem('funda-current-query');
            if (savedQuery && properties.length > 0) {
                executeQuery();
            }

            document.getElementById('queryInput').focus();
        });

        // Close modals when clicking outside
        document.getElementById('bulkBlacklistModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideBulkBlacklistModal();
            }
        });

        // Share state functions - optimized for minimal size
        function collectStateData() {
            const data = {};

            // Only include non-empty query
            const query = document.getElementById('queryInput').value.trim();
            if (query) data.q = query;

            // Only include ratings if they exist, use shorter format
            if (propertyRatings.size > 0) {
                data.r = Array.from(propertyRatings.entries());
            }

            // Minimal data source info
            if (currentDataUrl) {
                data.d = currentDataUrl;
            }

            // Skip timestamp and version for space savings
            return data;
        }

        function compressState(stateData) {
            try {
                // Use minimal JSON with no spaces
                const jsonString = JSON.stringify(stateData);

                // Use deflate with maximum compression (smaller than gzip)
                const compressed = pako.deflate(jsonString, { level: 9 });

                // Convert to base64url (more efficient than standard base64)
                const base64 = btoa(String.fromCharCode.apply(null, compressed));
                return base64.replace(/\+/g, '-').replace(/\//g, '_').replace(/=/g, '');
            } catch (error) {
                console.error('Compression failed:', error);
                return null;
            }
        }

        function decompressState(compressedData) {
            try {
                // Restore URL-safe base64
                const base64 = compressedData.replace(/-/g, '+').replace(/_/g, '/');
                // Add padding if needed
                const padding = '='.repeat((4 - base64.length % 4) % 4);
                const paddedBase64 = base64 + padding;

                const binaryString = atob(paddedBase64);
                const bytes = new Uint8Array(binaryString.length);
                for (let i = 0; i < binaryString.length; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }

                // Use inflate instead of ungzip to match deflate
                const decompressed = pako.inflate(bytes, { to: 'string' });
                return JSON.parse(decompressed);
            } catch (error) {
                console.error('Decompression failed:', error);
                return null;
            }
        }

        function shareState() {
            if (properties.length === 0) {
                showError('Please load data first before sharing');
                return;
            }

            const stateData = collectStateData();
            const compressed = compressState(stateData);

            if (!compressed) {
                showError('Failed to compress state data');
                return;
            }

            const shareUrl = `${window.location.origin}${window.location.pathname}?state=${compressed}`;

            // Copy to clipboard
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(shareUrl).then(() => {
                    alert(`Share URL copied to clipboard!\n\nURL size: ${shareUrl.length} characters\nCompressed data includes:\n- Current query and filters\n- Property ratings (${propertyRatings.size} ratings)\n- Data source: ${stateData.d || 'local file'}`);
                }).catch(err => {
                    console.error('Failed to copy to clipboard:', err);
                    showShareUrlModal(shareUrl, stateData);
                });
            } else {
                showShareUrlModal(shareUrl, stateData);
            }
        }

        function showShareUrlModal(shareUrl, stateData) {
            // Create a temporary modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white p-6 rounded-lg max-w-2xl w-full mx-4">
                    <h3 class="text-lg font-bold mb-4">Share URL Generated</h3>
                    <p class="text-sm text-gray-600 mb-4">
                        URL size: ${shareUrl.length} characters<br>
                        Includes: Query, ${propertyRatings.size} ratings, data source
                    </p>
                    <textarea readonly class="w-full h-32 p-3 border border-gray-300 rounded text-sm font-mono"
                              onclick="this.select()">${shareUrl}</textarea>
                    <div class="flex gap-2 mt-4">
                        <button onclick="navigator.clipboard.writeText('${shareUrl.replace(/'/g, "\\'")}').then(() => alert('Copied!')).catch(() => alert('Copy failed - please select and copy manually'))"
                                class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Copy URL</button>
                        <button onclick="this.closest('.fixed').remove()"
                                class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">Close</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // Remove modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) modal.remove();
            });
        }

        function loadStateFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const stateParam = urlParams.get('state');

            if (!stateParam) return false;

            const stateData = decompressState(stateParam);
            if (!stateData) {
                showError('Failed to decode shared state from URL');
                return false;
            }

            try {
                // Restore query
                if (stateData.q) {
                    document.getElementById('queryInput').value = stateData.q;
                    console.log('Restored query:', stateData.q);
                }

                // Restore ratings
                if (stateData.r && Array.isArray(stateData.r)) {
                    propertyRatings.clear();
                    stateData.r.forEach(([id, rating]) => {
                        propertyRatings.set(Number(id), rating);
                    });
                    savePropertyRatings();
                    console.log('Restored ratings:', stateData.r.length);
                }

                // Load data source if different from current
                if (stateData.d && stateData.d !== currentDataUrl) {
                    console.log('Loading shared data source:', stateData.d);
                    return loadFromUrl(stateData.d).then(() => {
                        // Execute query after data loads
                        if (stateData.q && properties.length > 0) {
                            executeQuery();
                        }
                        // Sync UI elements
                        syncQuickFiltersWithQuery();
                        return true;
                    });
                } else {
                    // Same data source, just apply query
                    if (stateData.q && properties.length > 0) {
                        executeQuery();
                    }
                    // Sync UI elements
                    syncQuickFiltersWithQuery();
                    return Promise.resolve(true);
                }
            } catch (error) {
                console.error('Failed to restore state:', error);
                showError('Failed to restore shared state: ' + error.message);
                return false;
            }
        }

        // Check for shared state on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check if URL contains shared state
            if (window.location.search.includes('state=')) {
                console.log('Found shared state in URL, loading...');
                loadStateFromUrl();
            }
        });
    </script>
</body>
</html>
